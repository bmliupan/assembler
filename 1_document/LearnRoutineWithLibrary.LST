     1  000000             Chip FC2204
     2  000000             //{{SONIX_CODE_OPTION
     3  000000             	.Code_Option	Reset_Pin	P05
     4  000000             	.Code_Option	Watch_Dog	Always_On
     5  000000             	.Code_Option	OSC_Sel		6M_X'tal	; Fosc = 12MHz, 6MHz Crystal/Resonator on XIN/XOUT
     6  000000             	.Code_Option	Fcpu		Fosc/1
     7  000000             	.Code_Option	Security	Enable
     8  000000             //}}SONIX_CODE_OPTION
     9  000000             
    10  000000             ;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    11  000000             ;>>>	芯片：	FC2204
    12  000000             ;>>>	设计：	刘盼
    13  000000             ;>>>	日期：	2020/08/19
    14  000000             ;>>>	版本：	V2.0
    15  000000             ;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    16  000000             ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    17  000000             ;;; 数据段定义
    18  000000             .DATA
    19  000000             ;>>>	RAM地址范围000H-07FH/100H-1FFH
    20  000000             ;-------------- bank 0 页 -------------------------------
    21  000000             ;***	全局变量
    22  000000             		ORG	000H
    23  0000 D             RFlag		DS	1
    24  000001             ;RFlag.7	0,无按键	1,有按键
    25  000001             ;RFlag.6	0,无双键	1,有双键
    26  000001             ;RFlag.5	0,波形1		1,波形2
    27  000001             ;RFlag.4	0,未拆分	1,已拆分
    28  000001             ;RFlag.3	0,首次发码	1,再次发码
    29  000001             ;RFlag.2	0,未进入万能	1,进入万能设置
    30  000001             ;RFlag.1	0,		1,power键进入学习标志
    31  000001             ;RFlag.0	0,保留		1,保留
    32  0001 D             KeyNum1		DS	1
    33  0002 D             KeyNum2		DS	1
    34  0003 D             KeyNum1BK	DS	1
    35  0004 D             KeyNum2BK	DS	1
    36  0005 D             Count		DS	1
    37  0006 D             Zero		DS	1
    38  0007 D             Toggle		DS	1
    39  000008             
    40  000008             ;***	全局变量	（保存到MTP中）
    41  0008 D             SetData		DS	1	
    42  000009             
    43  000009             ;***	局部变量
    44  0009 D             Data		DS	48	; 学习数据解码结果或发码数据初始值
    45  0039 D             Temp		DS	12	; 底层数据缓存
    46  0045 D             Time		DS	3	; 时间参数
    47  0048 D             DecPara		DS	4	; 解码参数
    48  004C D             FmtAddr		DS	2       ; 格式地址
    49  004E D             CapAddr		DS	2       ; 捕获数据地址
    50  0050 D             CtrlAddr	DS	2       ; 控制数据地址
    51  0052 D             LibAddr		DS	2       ; 库数据地址
    52  0054 D             BakAddr		DS	4       ; 备份数据地址
    53  0058 D             RltAddr		DS	2       ; 结果数据地址
    54  005A D             CapData		DS	2       ; 捕获数据
    55  005C D             LibData		DS	2       ; 库数据
    56  005E D             DifData		DS	2       ; 差值数据
    57  0060 D             BitNum		DS	3       ; 位数
    58  0063 D             CrrBuff		DS	2       ; 载波数据
    59  0065 D             BitPoint	DS	2       ; 位指针
    60  0067 D             Tolerance	DS	1	; 容差
    61  0068 D             LevelNum	DS	1       ; 电平数
    62  0069 D             CrrPoint	DS	1       ; 载波指针
    63  006A D             Result		DS	1       ; 数据解码
    64  006B D             MaskCode	DS	2       ; 掩码
    65  006D D             LogicNum	DS	1       ; 逻辑数
    66  006E D             LevelFlag	DS	1       ; 电平标志
    67  006F D             CtrlData	DS	1       ; 控制数据
    68  0070 D             DatPoint	DS	1       ; 数据指针
    69  0071 D             DstAddr		DS	2	; 目的地址
    70  0073 D             SrcAddr		DS	2	; 源地址
    71  0075 D             MTPAddr		DS	2	; MTP地址缓存
    72  0077 D             Length		DS	2	; 帧长
    73  0079 D             Carrier		DS	1	; 载波
    74  007A D             BitWidth	DS	1	; 位宽（6122：1bit，RCMM：2bit，dream：4bit）
    75  007B D             SendFlag	DS	1	; 发码标志位
    76  007C D             SendTimes	DS	2	; 发码次数
    77  007E D             Number		DS	1
    78  007F D             Pointer		DS	1
    79  E 00000009         Format		EQU	Data
    80  000080             ;-------------- bank 1 页 -------------------------------
    81  000100             		ORG	100H	
    82  E 00000013         MaxLvlNum	EQU	19	
    83  0100 D             LevelData	DS	2*MaxLvlNum  ;按照dream-dvb格式设置最大值，可容纳19个电平	
    84  0126 D             LearnData	DS	256-2*MaxLvlNum
    85  000200             ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    86  000200             ;;; 立即数（宏值）定义			
    87  000000             .CONST
    88  E 0000000B         Learn_Set	=	11
    89  E 0000000B         K_Power         =       11
    90  000000             
    91  E 00000009         L_Key01		=	9
    92  E 00000008         L_Key02		=	8
    93  E 00000007         L_Key03		=	7
    94  E 00000006         L_Key04		=	6
    95  E 0000000A         L_Key05		=	10
    96  E 0000004D         L_Key06		=	77
    97  E 0000004D         L_Key07		=	77
    98  E 0000004D         L_Key08		=	77
    99  E 0000004D         L_Key09		=	77
   100  E 0000004D         L_Key10		=	77
   101  000000             
   102  E 00000008         SetAddr		EQU	SetData		;设置数据地址（保存在MTP中，用于掉电记忆）
   103  E 00000126         LrnAddr		EQU	LearnData	;学习数据缓冲首地址
   104  E 000001FF         EndAddr		EQU	LearnData+217
   105  E 00000100         LvlAddr		EQU	LevelData	;IR电平数据首地址
   106  E 00000125         LvlLAddr	EQU	LevelData+37	;IR电平数据尾地址
   107  E 00000009         RstAddr		EQU	Data		;解码结果数据首地址
   108  E 00000038         RstLAddr	EQU	Data+47		;解码结果数据尾地址
   109  E 0000000A         UsrAddr		EQU	Data+1		;用户码结果数据首地址（升序）
   110  E 00000037         DatAddr		EQU	Data+46		;数据码结果数据首地址（降序）
   111  E 00000138         TstAddr		EQU	LrnAddr+18
   112  000000             
   113  000000             #define		Debug	0		;为0则关闭debug信息
   114  000000             
   115  000000             .Code
   116  000000             	ORG	0000H
   117  000000   0000(1)  	NOP
   118  000001   0000(1)  	NOP
   119  000002   0000(1)  	NOP
   120  000003   8010(2)  	JMP	SYS_Reset			; 系统重置入口	（地址4-7 为系统保留）
   121  000004             
   122  000008             	ORG	0008H
   123  000008   8087(2)  	JMP	INT_Proccess
   124  000009             
   125  000010             	ORG	0010H
   126  000010             SYS_Reset:
   127  000010   2D7F(1)  	MOV	A,#07FH
   128  000011   2FDF(1)     	B0MOV	STKP,A				; 关闭全局中断并初始化栈指针
   129  000012   2D00(1)  	MOV	A,#00H
   130  000013   2F87(1)  	B0MOV	RBANK,A				; RAM切换到Bank0页
   131  000014   2B86(1)  	CLR	PFLAG				; 清除状态寄存器
   132  000015   CE16(2)  	CALL	MCU_Initialize	
   133  000016   CE2D(2)  	CALL	Close_IO_Wake	
   134  000017   CEAA(2)  	CALL	Delay_200ms
   135  000018   CEAA(2)  	CALL	Delay_200ms			; 延时等待cpu稳定
   136  000019             	Slow2Normal				; 初始化MCU工作模式
   137  000019   61CA(1)             B0BCLR     FSTPHX
   138  00001A   0000(1)             NOP
   139  00001B   0000(1)             NOP
   140  00001C   0000(1)             NOP
   141  00001D   62CA(1)             B0BCLR     FCLKMD
   142  00001E   2D5A(1)  	MOV	A,#05AH
   143  00001F   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
   144  000020   2DF7(1)  	MOV	A,#LVDEN+LV180+WD1_02s
   145  000021   2F96(1)  	B0MOV	OPTION,A
   146  000022   2D45(1)  	MOV	A,#TS08ms+TScan+T1D32+T1DDS+POWEN+IREN+D300
   147  000023   2F97(1)  	B0MOV	PTCON,A
   148  000024   CAB9(2)  	CALL	Read_Set_Data			; 读取设置数据
   149  000025   2E09(1)  	B0MOV	A,SetData+1
   150  000026   0696(1+S)  	CMPRS	A,#96H
   151  000027   802C(2)  	JMP	Initial_SetData
   152  000028   2E0A(1)  	B0MOV	A,SetData+2
   153  000029   065A(1+S)  	CMPRS	A,#5AH
   154  00002A   802C(2)  	JMP	Initial_SetData
   155  00002B   8033(2)  	JMP	SYS_Sleep			; 判断固定区域数据是否被赋值过，是则不进行初始化
   156  00002C             Initial_SetData:
   157  00002C   2D96(1)  	MOV	A,#96H
   158  00002D   2F09(1)  	B0MOV	SetData+1,A
   159  00002E   2D5A(1)  	MOV	A,#5AH
   160  00002F   2F0A(1)  	B0MOV	SetData+2,A			; 初始化万能数据
   161  000030   CAB1(2)  	CALL	Store_Set_Data
   162  000031   7A86(1+S)  	B0BTS1	FC	
   163  000032   CEDA(2)  	CALL	Flash_3Times			; 若存储失败则将红灯闪烁六下，否则闪烁三下
   164  000033             ;	CALL	Flash_3Times	
   165  000033             SYS_Sleep:
   166  000033   2D00(1)  	MOV	A,#0
   167  000034   2F06(1)  	B0MOV	Zero,A
   168  000035   67DA(1)  	B0BCLR	T1M.7
   169  000036   67D8(1)  	B0BCLR	T0M.7
   170  000037   2D1C(1)  	MOV	A,#OPDS+SYNDS+IRIDS+OV96us+OPA1
   171  000038   2FA5(1)  	B0MOV	OPA,A				; 配置为关闭放大 P12不输出IR波形 溢出时间96us 放大倍数 1
   172  000039   CE16(2)  	CALL	MCU_Initialize
   173  00003A   CEC2(2)  	CALL	Delay_1ms
   174  00003B             	SleepMode
   175  00003B   6BCA(1)             B0BSET      FCPUM0
   176  00003C             SYS_WakeUp:
   177  00003C   CE2D(2)  	CALL	Close_IO_Wake
   178  00003D             SYS_Main:	
   179  00003D   CEC2(2)  	CALL	Delay_1ms
   180  00003E   C088(2)  	CALL	Scan_Key
   181  00003F   7F00(1+S)  	B0BTS1	RFlag.7
   182  000040   8033(2)  	JMP	SYS_Sleep			; 检测按键标志位  无按键跳去睡眠
   183  000041   7600(1+S)  	B0BTS0	RFlag.6
   184  000042   803D(2)  	JMP	SYS_Main			; 双键按下，重新键扫	
   185  000043   1607(1+S)  	INCMS	Toggle
   186  000044   0000(1)  	NOP
   187  000045   6300(1)  	B0BCLR	RFlag.3				; 清发码标志位
   188  000046   6100(1)  	B0BCLR  RFlag.1                         ; 清power键进学习标志位
   189  000047   CEED(2)  	CALL	BackUp_KeyNum			; 备份键值		
   190  000048   2E01(1)  	B0MOV	A,KeyNum1
   191  000049             SET_KEY_ADDR1:	
   192  000049   060B(1+S)  	CMPRS	A,#Learn_Set
   193  00004A   8064(2)  	JMP	Normal_Mode
   194  00004B             
   195  00004B             Learn_Mode:
   196  00004B   C4B0(2)  	CALL	Wait_Set_Time			; 等待设置键按下达到一定时间
   197  00004C   7A86(1+S)  	B0BTS1	FC
   198  00004D   807C(2)  	JMP	Wait_All_Key_Release
   199  00004E             Learn_Again:
   200  00004E   C4CD(2)  	CALL	Wait_Learn_Key			; 等待学习键按下
   201  00004F   7A86(1+S)  	B0BTS1	FC
   202  000050   807C(2)  	JMP	Wait_All_Key_Release
   203  000051             Capture_Again:
   204  000051   C4E6(2)  	CALL	Wait_IR_Wave			; 等待红外波形
   205  000052   7A86(1+S)  	B0BTS1	FC
   206  000053   807C(2)  	JMP	Wait_All_Key_Release
   207  000054   C555(2)  	CALL	Capture_IR_Wave			; 捕捉红外波形数据
   208  000055   7A86(1+S)  	B0BTS1	FC
   209  000056   8051(2)  	JMP	Capture_Again	
   210  000057   C5F8(2)  	CALL	Decode_IR_Data			; 红外波形数据解码
   211  000058   7286(1+S)  	B0BTS0	FC
   212  000059   805F(2)  	JMP	Decode_Success
   213  00005A   7400(1+S)  	B0BTS0	RFlag.4
   214  00005B   8051(2)  	JMP	Capture_Again			; 若数据进行ppm解码拆分过，便不再进行录制学习
   215  00005C   CA07(2)  	CALL	Direct_Record			; 格式库解码失败，采用直接存储
   216  00005D   7A86(1+S)  	B0BTS1	FC
   217  00005E   8051(2)  	JMP	Capture_Again	
   218  00005F             Decode_Success:
   219  00005F             ;	CALL	Delay_200ms	
   220  00005F             ;        CALL    Send_LrnData	
   221  00005F   C903(2)  	CALL	Cal_CheckSum
   222  000060   CAAC(2)  	CALL	Store_Learn_Data		; 存储学习数据
   223  000061   CED7(2)  	CALL	Flash_1Times	
   224  000062   CED7(2)  	CALL	Flash_1Times			; 红灯闪烁三下，以示学习成功
   225  000063   804E(2)  	JMP	Learn_Again
   226  000064             
   227  000064             Normal_Mode:
   228  000064   CF95(2)  	CALL	Check_Learn_Key
   229  000065   7A86(1+S)  	B0BTS1	FC
   230  000066   8076(2)  	JMP	STB_Mode			; 判断是否为学习按键，是则返回学习按键指针
   231  000067             TV_Mode:
   232  000067   CE45(2)  	CALL	Clr_RltData
   233  000068   CAB4(2)  	CALL	Read_Learn_Data
   234  000069   C8E6(2)  	CALL	Check_00FF
   235  00006A   7A86(1+S)  	B0BTS1	FC
   236  00006B   8074(2)  	JMP	TV_ModeS
   237  00006C   2E38(1)  	B0MOV	A,Data+47
   238  00006D   2F44(1)  	B0MOV	Temp+11,A			; 将从MTP中读取到的校验和数据保存
   239  00006E   C903(2)  	CALL	Cal_CheckSum			; 重新计算校验和
   240  00006F   2E38(1)  	B0MOV	A,Data+47
   241  000070   0744(1+S)  	CMPRS	A,Temp+11
   242  000071   8074(2)  	JMP	TV_ModeS			; 比较MTP中的数据生成的校验和与保存的校验和是否一致
   243  000072   CB9E(2)  	CALL	Initial_Toggle	
   244  000073   8077(2)  	JMP	Send_IR_Com
   245  000074             TV_ModeS:
   246  000074   CF6B(2)  	CALL	Load_TV_Data
   247  000075   8077(2)  	JMP	Send_IR_Com
   248  000076             	
   249  000076             STB_Mode:
   250  000076   CF76(2)  	CALL	Load_STB_Data
   251  000077             Send_IR_Com:
   252  000077   CC7E(2)  	CALL	Send_IR
   253  000078   CCD6(2)  	CALL    Check_PowerKey
   254  000079   7100(1+S)  	B0BTS0  RFlag.1
   255  00007A   84BC(2)  	JMP     Wait_Set_Free	
   256  00007B   807C(2)  	JMP	Wait_All_Key_Release
   257  00007C             
   258  00007C             Wait_All_Key_Release:
   259  00007C   2D64(1)          MOV     A,#100
   260  00007D   2F05(1)          B0MOV   Count,A
   261  00007E             Wait_All_Key_Release0:
   262  00007E   CEB6(2)  	CALL	Delay_30ms
   263  00007F   C088(2)  	CALL	Scan_Key
   264  000080   CCD6(2)  	CALL    Check_PowerKey
   265  000081   7100(1+S)  	B0BTS0  RFlag.1
   266  000082   84BC(2)  	JMP     Wait_Set_Free	
   267  000083   CEE3(2)          CALL    Check_Key
   268  000084   7286(1+S)          B0BTS0  FC
   269  000085   807E(2)          JMP     Wait_All_Key_Release0
   270  000086   803D(2)  	JMP	SYS_Main
   271  000087             
   272  000087             //中断处理程序
   273  000087             INT_Proccess:
   274  000087             ;	PUSH
   275  000087             
   276  000087             ;	POP
   277  000087   0F00(2)  	RETI
   278  000088             
   279  000088             ;*********************************************
   280  000088             ;*********************************************
   281  000088             ;*********************************************
   282  000088             .LIST
   283  000088             	INCLUDE		.\Source\KeyScan.asm
   284  000088             
   285  000088             //键盘扫描
   286  000088             ;****************************************************************************
   287  000088             ;程序功能:	扫描键盘
   288  000088             ;输入参数:	无
   289  000088             ;输出参数:	键值
   290  000088             ;堆栈层数:	1层
   291  000088             ;内存占用:	无
   292  000088             ;程序设计:	刘盼
   293  000088             ;****************************************************************************
   294  000088             Scan_Key:
   295  000088   CE24(2)  	CALL	IO_Initialize
   296  000089   2DFF(1)  	MOV	A,#0FFH
   297  00008A   2F01(1)  	B0MOV	KeyNum1,A
   298  00008B   2F02(1)  	B0MOV	KeyNum2,A
   299  00008C   6700(1)  	B0BCLR	RFlag.7
   300  00008D   6600(1)  	B0BCLR	RFlag.6	
   301  00008E   2D00(1)  	MOV	A,#0
   302  00008F   2F39(1)  	B0MOV	Temp+0,A
   303  000090   2D0C(1)  	MOV	A,#12
   304  000091   2F3A(1)  	B0MOV	Temp+1,A
   305  000092   2D00(1)  	MOV	A,#00000000B
   306  000093   2F3B(1)  	B0MOV	Temp+2,A
   307  000094             KEY_START_ADDR:
   308  000094   2D10(1)  	MOV	A,#00010000B
   309  000095   2F3C(1)  	B0MOV	Temp+3,A
   310  000096   80A0(2)  	JMP	Read_IO_Statu
   311  000097             Set_IO_Loop:
   312  000097   6286(1)  	B0BCLR	FC
   313  000098   093C(1)  	RRCM	Temp+3
   314  000099   093B(1)  	RRCM	Temp+2
   315  00009A   2E3C(1)  	B0MOV	A,Temp+3
   316  00009B             KEY_P2MODE_ADDR:	
   317  00009B   1A30(1)  	OR	A,#00110000B
   318  00009C   2FC2(1)  	B0MOV	P2Mode,A
   319  00009D   2E3B(1)  	B0MOV	A,Temp+2
   320  00009E             KEY_P1MODE_ADDR:	
   321  00009E   1A00(1)  	OR	A,#00000000B
   322  00009F   2FC1(1)  	B0MOV	P1Mode,A		; 改变扫描输出端口
   323  0000A0             Read_IO_Statu:
   324  0000A0   CECA(2)  	CALL	Delay_100us
   325  0000A1             ;	CALL	Delay_100us
   326  0000A1   2ED2(1)  	B0MOV	A,P2Data
   327  0000A2             KEY_P2DATA_ADDR:	
   328  0000A2   1A00(1)  	OR	A,#00000000B	
   329  0000A3   2F3E(1)  	B0MOV	Temp+5,A
   330  0000A4             
   331  0000A4   2ED1(1)  	B0MOV	A,P1Data
   332  0000A5             KEY_P1DATA_ADDR:	
   333  0000A5   1A00(1)  	OR	A,#00000000B			
   334  0000A6   2F3D(1)  	B0MOV	Temp+4,A		; 读取其他端口数据
   335  0000A7   2E3A(1)  	B0MOV	A,Temp+1
   336  0000A8   2F3F(1)  	B0MOV	Temp+6,A
   337  0000A9   80AC(2)  	JMP     Check_IO_First
   338  0000AA             Check_IO_Loop:
   339  0000AA   093E(1)  	RRCM	Temp+5
   340  0000AB   093D(1)  	RRCM	Temp+4
   341  0000AC             Check_IO_First:
   342  0000AC             CHECK_IO_ADDR:
   343  0000AC   783D(1+S)  	B0BTS1	Temp+4.0		; 轮询IO口状态
   344  0000AD   80B5(2)  	JMP	Have_Key_Press
   345  0000AE             Check_IO_Go:	
   346  0000AE   1639(1+S)  	INCMS	Temp+0
   347  0000AF   0000(1)  	NOP
   348  0000B0   263F(1+S)  	DECMS	Temp+6
   349  0000B1   80AA(2)  	JMP	Check_IO_Loop
   350  0000B2   263A(1+S)  	DECMS	Temp+1
   351  0000B3   8097(2)  	JMP	Set_IO_Loop
   352  0000B4   80C2(2)  	JMP	Scan_Key_Exit
   353  0000B5             	
   354  0000B5             Have_Key_Press:
   355  0000B5   6F00(1)  	B0BSET	RFlag.7
   356  0000B6   2E01(1)  	B0MOV	A,KeyNum1
   357  0000B7   06FF(1+S)  	CMPRS	A,#0FFH
   358  0000B8   80BF(2)  	JMP	Second_Key
   359  0000B9             First_Key:
   360  0000B9   2E39(1)  	B0MOV	A,Temp+0
   361  0000BA   2F01(1)  	B0MOV	KeyNum1,A
   362  0000BB   2E3A(1)  	B0MOV	A,Temp+1
   363  0000BC   060C(1+S)  	CMPRS	A,#12
   364  0000BD   80AE(2)  	JMP	Check_IO_Go
   365  0000BE   80C2(2)  	JMP	Scan_Key_Finish
   366  0000BF             Second_Key:
   367  0000BF   2E39(1)  	B0MOV	A,Temp+0
   368  0000C0   2F02(1)  	B0MOV	KeyNum2,A
   369  0000C1   6E00(1)  	B0BSET	RFlag.6
   370  0000C2             Scan_Key_Finish:
   371  0000C2             Scan_Key_Exit:
   372  0000C2   CE24(2)  	CALL	IO_Initialize
   373  0000C3   0E00(2)  	RET
   374  0000C4             ///
   375  0000C4             
   376  0000C4             
   377  0000C4             
   378  0000C4             
   379  0000C4             
   380  0000C4             
   381  0000C4             
   382  0000C4             	INCLUDE		.\Source\FormatLib.asm
   383  0000C4             ;>>>	调制方式
   384  E 00000000         PWM		=	0X0000	; 脉冲宽度调制
   385  E 00008000         PPM		=	0X8000	; 脉冲位置调制
   386  0000C4             ;>>>	帧长模式
   387  E 00000000         F_F		=	0X0000	; 固定帧长
   388  E 00004000         F_D		=	0X4000	; 固定延时
   389  0000C4             ;>>>	重发类型
   390  E 00000000         R_Self          =	0X0000    ; 重发第一帧
   391  E 00001000         R_Tail          =	0X1000    ; 重发尾帧
   392  E 00002000         R_F_S           =	0X2000    ; 重复第一帧与第二帧
   393  E 00003000         R_P_R           =	0X3000    ; 按下发第二帧 松开发第一帧
   394  0000C4             ;>>>	逻辑位电平数
   395  E 00000200         L_W2  		=	0X0200    ; 2bit   JKxJ
   396  E 00000400         L_W4  		=	0X0400    ; 4bit   JKxJKxJ
   397  0000C4             ;>>>	取值掩码
   398  E 00000010         B_N2      	=	0X0010
   399  E 00000030         B_N4      	=	0X0030
   400  0000C4             ;B_N8 		=	0X0070
   401  E 000000F0         B_N16		=	0X00F0
   402  0000C4             ;>>>	电平标志位
   403  E 00000000         H_Lvl           =	0X0000
   404  E 00008000         L_Lvl           =	0X8000
   405  0000C4             ;>>>	发码停止标志位
   406  E 00004000         S_Flag          =	0X4000
   407  0000C4             ;>>>	帧停止标志位
   408  E 00009000         T_Flag1		=	0X9000
   409  E 0000A000         T_Flag2		=	0XA000
   410  0000C4             
   411  0000C4             ;>>>	连发时此格式的发码次数
   412  E 00001000         S1		=	0X1000
   413  E 00002000         S2		=	0X2000
   414  E 00003000         S3		=	0X3000
   415  E 00004000         S4		=	0X4000
   416  0000C4             ;>>>	计数基值
   417  E 00000004         Tc		=	4	; 计数基值 4us
   418  0000C4             ;>>>	载波指针
   419  E 00000000         C_31K		=	0*0X0100
   420  E 00000100         C_33K		=	1*0X0100
   421  E 00000200         C_36K		=	2*0X0100
   422  E 00000300         C_37K		=	3*0X0100
   423  E 00000400         C_38K		=	4*0X0100
   424  E 00000500         C_40K		=	5*0X0100
   425  E 00000600         C_56K		=	6*0X0100
   426  0000C4             ;>>>	载波周期数值
   427  E 000000FF         S_31K		=	255	;32.26us 0X0102
   428  E 000000F2         S_33K		=	242	;30.30us 0X00F2
   429  E 000000DE         S_36K		=	222	;27.78us 0X00DE
   430  E 000000D8         S_37K		=	216	;27.03us 0X00D8
   431  E 000000D3         S_38K		=	211	;26.32us 0X00D2
   432  E 000000C8         S_40K		=	200	;25.00us 0X00C8
   433  E 0000008F         S_56K		=	143	;17.86us 0X008E
   434  0000C4             ;>>>	载波周期上限数值
   435  E 00000109         U_31K		=	S_31K+10
   436  E 000000FC         U_33K		=	S_33K+10
   437  E 000000E3         U_36K		=	S_36K+5
   438  E 000000E2         U_37K		=	S_37K+10
   439  E 000000E2         U_38K		=	S_38K+15
   440  E 000000D7         U_40K		=	S_40K+15
   441  E 00000099         U_56K		=	S_56K+10
   442  0000C4             ;>>>	载波周期下限数值
   443  E 000000F5         D_31K		=	S_31K-10
   444  E 000000E8         D_33K		=	S_33K-10
   445  E 000000D9         D_36K		=	S_36K-5
   446  E 000000CE         D_37K		=	S_37K-10
   447  E 000000C4         D_38K		=	S_38K-15
   448  E 000000B9         D_40K		=	S_40K-15
   449  E 00000085         D_56K		=	S_56K-10
   450  0000C4             ;>>>	载波列表（用于发射）
   451  0000C4             Carrier_List:
   452  0000C4   00FF(1)  DW	S_31K	; 31KHz	0
   453  0000C5   00F2(1)  DW	S_33K	; 33KHz	1
   454  0000C6   00DE(1)  DW	S_36K	; 36KHz	2
   455  0000C7   00D8(1)  DW	S_37K	; 37KHz	3
   456  0000C8   00D3(1)  DW	S_38K	; 38KHz	4
   457  0000C9   00C8(1)  DW	S_40K	; 40KHz	5
   458  0000CA   008F(1)  DW	S_56K	; 56KHz	6
   459  0000CB             
   460  0000CB             ;>>>	载波范围（用于解码）
   461  0000CB             Carrier_Range:
   462  0000CB   0109(1)  DW	U_31K,	D_31K      ; 31KHz	0
   463  0000CC   00F5(1)  
   464  0000CD   00FC(1)  DW	U_33K,	D_33K      ; 33KHz	1
   465  0000CE   00E8(1)  
   466  0000CF   00E3(1)  DW	U_36K,	D_36K      ; 36KHz	2
   467  0000D0   00D9(1)  
   468  0000D1   00E2(1)  DW	U_37K,	D_37K      ; 37KHz	3
   469  0000D2   00CE(1)  
   470  0000D3   00E2(1)  DW	U_38K,	D_38K      ; 38KHz	4
   471  0000D4   00C4(1)  
   472  0000D5   00D7(1)  DW	U_40K,	D_40K      ; 40KHz	5
   473  0000D6   00B9(1)  
   474  0000D7   0099(1)  DW	U_56K,	D_56K      ; 56KHz	6
   475  0000D8   0085(1)  
   476  0000D9             
   477  0000D9             Format_List:
   478  E 00000000         V_3004		=	$-Format_List
   479  0000D9   03D9(1)  DW		F_3004
   480  E 00000001         V_50119P	=	$-Format_List
   481  0000DA   046A(1)  DW		F_50119P
   482  E 00000002         V_50462		=	$-Format_List
   483  0000DB   0435(1)  DW		F_50462
   484  E 00000003         V_50560		=	$-Format_List
   485  0000DC   02F8(1)  DW		F_50560
   486  E 00000004         V_50560X	=	$-Format_List
   487  0000DD   0309(1)  DW		F_50560X
   488  E 00000005         V_6014C6X	=	$-Format_List
   489  0000DE   02A3(1)  DW		F_6014C6X
   490  E 00000006         V_6014C5X	=	$-Format_List
   491  0000DF   02C3(1)  DW		F_6014C5X
   492  E 00000007         V_6122X		=	$-Format_List
   493  0000E0   01D7(1)  DW		F_6122X
   494  E 00000008         V_6122F		=	$-Format_List
   495  0000E1   01EC(1)  DW		F_6122F
   496  E 00000009         V_6124C13	=	$-Format_List
   497  0000E2   02EB(1)  DW		F_6124C13
   498  E 0000000A         V_6124C8	=	$-Format_List
   499  0000E3   02DF(1)  DW		F_6124C8
   500  E 0000000B         V_6124C5	=	$-Format_List
   501  0000E4   02D3(1)  DW		F_6124C5
   502  E 0000000C         V_7464		=	$-Format_List
   503  0000E5   035B(1)  DW		F_7464
   504  E 0000000D         V_AH5900134K	=	$-Format_List
   505  0000E6   041E(1)  DW		F_AH5900134K
   506  E 0000000E         V_7051		=	$-Format_List
   507  0000E7   037B(1)  DW		F_7051
   508  E 0000000F         V_7461X		=	$-Format_List
   509  0000E8   027E(1)  DW		F_7461X
   510  E 00000010         V_9012F		=	$-Format_List
   511  0000E9   022B(1)  DW		F_9012F
   512  E 00000011         V_9012X		=	$-Format_List
   513  0000EA   0217(1)  DW		F_9012X
   514  E 00000012         V_Custom6Bit	=	$-Format_List
   515  0000EB   0414(1)  DW		F_Custom6Bit
   516  E 00000013         V_DVB40bit	=	$-Format_List
   517  0000EC   038D(1)  DW		F_DVB40bit
   518  E 00000014         V_HuiZhou	=	$-Format_List
   519  0000ED   03F2(1)  DW		F_HuiZhou
   520  E 00000015         V_JVC		=	$-Format_List
   521  0000EE   0338(1)  DW		F_JVC
   522  E 00000016         V_RCMM32	=	$-Format_List
   523  0000EF   0255(1)  DW		F_RCMM32
   524  E 00000017         V_RCMM24	=	$-Format_List
   525  0000F0   0242(1)  DW		F_RCMM24
   526  E 00000018         V_RCA38		=	$-Format_List
   527  0000F1   03B9(1)  DW		F_RCA38
   528  E 00000019         V_RCA56		=	$-Format_List
   529  0000F2   03C9(1)  DW		F_RCA56
   530  E 0000001A         V_RCT311	=	$-Format_List
   531  0000F3   03E6(1)  DW		F_RCT311
   532  E 0000001B         V_Sharp		=	$-Format_List
   533  0000F4   0325(1)  DW		F_Sharp
   534  E 0000001C         V_TopWay	=	$-Format_List
   535  0000F5   0400(1)  DW		F_TopWay
   536  E 0000001D         V_Y261		=	$-Format_List
   537  0000F6   034A(1)  DW		F_Y261
   538  E 0000001E         V_MITC8D8	=	$-Format_List
   539  0000F7   031A(1)  DW		F_MITC8D8
   540  E 0000001F         V_Pioneer	=	$-Format_List
   541  0000F8   0440(1)  DW		F_Pioneer
   542  E 00000020         V_MiBox		=	$-Format_List
   543  0000F9   0457(1)  DW		F_MiBox
   544  E 00000021         V_DreamDVB	=	$-Format_List
   545  0000FA   0475(1)  DW		F_DreamDVB
   546  E 00000022         V_3010P38K	=	$-Format_List
   547  0000FB   0186(1)  DW		F_3010P38K
   548  E 00000023         V_3010P56K	=	$-Format_List
   549  0000FC   0195(1)  DW		F_3010P56K
   550  E 00000024         V_301036K	=	$-Format_List
   551  0000FD   01A4(1)  DW		F_301036K
   552  E 00000025         V_301038K	=	$-Format_List
   553  0000FE   01B3(1)  DW		F_301038K
   554  E 00000026         V_GeminiC10	=	$-Format_List
   555  0000FF   0170(1)  DW		F_GeminiC10
   556  E 00000027         V_PhilipsRC6	=	$-Format_List
   557  000100   0121(1)  DW		F_PhilipsRC6
   558  E 00000028         V_RC6_38K	=	$-Format_List
   559  000101   013C(1)  DW		F_PhilipsRC6_38K
   560  E 00000029         V_PhilipsRC63	=	$-Format_List
   561  000102   0157(1)  DW		F_PhilipsRC63
   562  E 0000002A         V_Philips	=	$-Format_List
   563  000103   0109(1)  DW		F_Philips
   564  E 0000002B         Format_Num	=	$-Format_List			;	学习格式库边界
   565  000104             ;-----------------------------------------------------------------------------
   566  E 0000002B         V_6014C5	=	$-Format_List
   567  000104   02B3(1)  DW		F_6014C5
   568  E 0000002C         V_6014C6	=	$-Format_List
   569  000105   0293(1)  DW		F_6014C6
   570  E 0000002D         V_7461		=	$-Format_List
   571  000106   0269(1)  DW		F_7461
   572  E 0000002E         V_6122		=	$-Format_List
   573  000107   01C2(1)  DW		F_6122
   574  E 0000002F         V_9012		=	$-Format_List
   575  000108   0203(1)  DW		F_9012
   576  000109             ;*******************************************************************************************************
   577  000109             ;>>> 格式库说明
   578  000109             ;	第一个字为：	调制类型，帧长类型，发码类型，逻辑位电平数，掩码组成
   579  000109             ;	第二个字为：	串发码时该格式发码帧数，载波，解码容差（最大255*4us）
   580  000109             ;	电平数据部分：	H_Lvl代表高电平，L_Lvl代表低电平，S_Flag代表逻辑位停止标志
   581  000109             ;	控制数据部分：	D3D2D1D0H
   582  000109             ;			D3表示解码或发码类型
   583  000109             ;			D2表示解码位数
   584  000109             ;			D1表示电平数据指针（意即表头到所需电平数据首地址的偏移量）
   585  000109             ;			D0表示解码数据指针（意即用户码和键码的存储指针，相互独立）
   586  000109             ;	D3数据说明：
   587  000109             ;			 0:	数据零或者引导电平
   588  000109             ;			 1:	数据一
   589  000109             ;			 2:	用户码
   590  000109             ;			 3:	用户码反码
   591  000109             ;			 4:	键码
   592  000109             ;			 5:	键码反码
   593  000109             ;			 6:	跳变位
   594  000109             ;			 7:	停止位
   595  000109             ;			 8:	数据零（用于特殊电平解码误差调大）
   596  000109             ;			 9:	第一帧解码结束标志以及帧长
   597  000109             ;			10:	第二帧解码结束标志以及帧长
   598  000109             ;			11:	无效数据
   599  000109             ;			12:	无效数据
   600  000109             ;			13:	无效数据
   601  000109             ;			14:	无效数据
   602  000109             ;			15:	无效数据
   603  000109             ;	注意：
   604  000109             ;			1、由于解码与发码共用一个库，因此电平数据修正应尽量小.
   605  000109             ;			2、由于解码过程是遍历每个格式，所以要将相同格式特征的
   606  000109             ;			   两个格式中的长度更短或描述更细的格式放在前面.
   607  000109             ;			3、为提高解码速度可将常见格式放在前面.
   608  000109             ;			4、PPM格式采取了数据拆分的方法，因此需要有波形识别库支撑
   609  000109             ;			   库建立方法如下：
   610  000109             ;			   (1)支持两种PPM电平长度定义，当只有一种PPM电平时，将
   611  000109             ;			      库中的第二电平定义成和第一相同.
   612  000109             ;			   (2)若有两种PPM电平，则将长度较短的排在前面.
   613  000109             ;			5、由于捕获数据时只会捕获两帧IR波形的数据，且区分IR帧的依据
   614  000109             ;			   是低电平时间超过16ms，故而添加的PPM格式停止位不能小于16ms
   615  000109             ;			   否则数据拆分会出错.
   616  000109             ;			6、全0XFFFF数据为控制数据位置识别标志.
   617  000109             ;			7、由于TV万能发码库也共享学习格式库，而发码库考虑到节省初始
   618  000109             ;			   化程序的原因，在数据结构上有较大限制，故对此类格式加以扩展
   619  000109             ;			   用后缀X区分（只针对反码数据不保存的格式库）
   620  000109             ;*******************************************************************************************************
   621  000109             F_Philips:
   622  000109   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   623  00010A   1225(1)  DW	S1+C_36K+150/Tc						;	解码及发码参数
   624  00010B   006F(1)  DW	444/Tc							;	拆分基值1
   625  00010C   00DE(1)  DW	888/Tc							;       拆分基值2
   626  00010D   014D(1)  DW	444/Tc+888/Tc
   627  00010E   01BC(1)  DW	(888/Tc)*2
   628  00010F   029B(1)  DW	2670/Tc							;	PPM 格式波形识别库
   629  000110   029B(1)  DW	H_Lvl+2670/Tc-0,	L_Lvl+889/Tc-0+S_Flag		;	引导电平
   630  000111   C0DE(2)  
   631  000112   806F(2)  DW	L_Lvl+444/Tc-0,		H_Lvl+444/Tc-0+S_Flag		;	逻辑0电平
   632  000113   406F(1)  
   633  000114   006F(1)  DW	H_Lvl+444/Tc-0,		L_Lvl+444/Tc-0+S_Flag		;	逻辑1电平
   634  000115   C06F(2)  
   635  000116   80DE(2)  DW	L_Lvl+888/Tc-0,		H_Lvl+888/Tc-0+S_Flag		;	逻辑0电平
   636  000117   40DE(1)  
   637  000118   00DE(1)  DW	H_Lvl+888/Tc-0,		L_Lvl+888/Tc-0+S_Flag		;	逻辑1电平	（翻转位电平）
   638  000119   C0DE(2)  
   639  00011A   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   640  00011B   0170(1)  DW	0170H,2490H,61D0H,2891H,4890H,T_Flag2+108000/128	;	控制数据
   641  00011C   2490(1)  
   642  00011D   61D0(1)  
   643  00011E   2891(1)  
   644  00011F   4890(1)  
   645  000120   A34B(2)  
   646  000121             
   647  000121             ;*******************************************************************************************************
   648  000121             F_PhilipsRC6:
   649  000121   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   650  000122   1225(1)  DW	S1+C_36K+150/Tc						;	解码及发码参数
   651  000123   006F(1)  DW	444/Tc							;	拆分基值1
   652  000124   00DE(1)  DW	888/Tc							;       拆分基值2
   653  000125   014D(1)  DW	444/Tc+888/Tc
   654  000126   01BC(1)  DW	(888/Tc)*2
   655  000127   029B(1)  DW	2670/Tc							;	PPM 格式波形识别库
   656  000128   029B(1)  DW	H_Lvl+2670/Tc-0,	L_Lvl+889/Tc-0+S_Flag		;	引导电平
   657  000129   C0DE(2)  
   658  00012A   806F(2)  DW	L_Lvl+444/Tc-0,		H_Lvl+444/Tc-0+S_Flag		;	逻辑0电平
   659  00012B   406F(1)  
   660  00012C   006F(1)  DW	H_Lvl+444/Tc-0,		L_Lvl+444/Tc-0+S_Flag		;	逻辑1电平
   661  00012D   C06F(2)  
   662  00012E   80DE(2)  DW	L_Lvl+888/Tc-0,		H_Lvl+888/Tc-0+S_Flag		;	逻辑0电平
   663  00012F   40DE(1)  
   664  000130   00DE(1)  DW	H_Lvl+888/Tc-0,		L_Lvl+888/Tc-0+S_Flag		;	逻辑1电平	（翻转位电平）
   665  000131   C0DE(2)  
   666  000132   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   667  000133   0170(1)  DW	0170H,2490H,21D1H,2892H,2893H,6194H,2794H,4890H,T_Flag2+108000/128	;	控制数据
   668  000134   2490(1)  
   669  000135   21D1(1)  
   670  000136   2892(1)  
   671  000137   2893(1)  
   672  000138   6194(1)  
   673  000139   2794(1)  
   674  00013A   4890(1)  
   675  00013B   A34B(2)  
   676  00013C             
   677  00013C             ;*******************************************************************************************************
   678  00013C             F_PhilipsRC6_38K:
   679  00013C   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   680  00013D   1425(1)  DW	S1+C_38K+150/Tc						;	解码及发码参数
   681  00013E   006F(1)  DW	444/Tc							;	拆分基值1
   682  00013F   00DE(1)  DW	888/Tc							;       拆分基值2
   683  000140   014D(1)  DW	444/Tc+888/Tc
   684  000141   01BC(1)  DW	(888/Tc)*2
   685  000142   0291(1)  DW	2630/Tc							;	PPM 格式波形识别库
   686  000143   029B(1)  DW	H_Lvl+2670/Tc-0,	L_Lvl+889/Tc-0+S_Flag		;	引导电平
   687  000144   C0DE(2)  
   688  000145   806F(2)  DW	L_Lvl+444/Tc-0,		H_Lvl+444/Tc-0+S_Flag		;	逻辑0电平
   689  000146   406F(1)  
   690  000147   006F(1)  DW	H_Lvl+444/Tc-0,		L_Lvl+444/Tc-0+S_Flag		;	逻辑1电平
   691  000148   C06F(2)  
   692  000149   80DE(2)  DW	L_Lvl+888/Tc-0,		H_Lvl+888/Tc-0+S_Flag		;	逻辑0电平
   693  00014A   40DE(1)  
   694  00014B   00DE(1)  DW	H_Lvl+888/Tc-0,		L_Lvl+888/Tc-0+S_Flag		;	逻辑1电平	（翻转位电平）
   695  00014C   C0DE(2)  
   696  00014D   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   697  00014E   0170(1)  DW	0170H,2490H,21D1H,2892H,2893H,6194H,2794H,4890H,T_Flag2+108000/128	;	控制数据
   698  00014F   2490(1)  
   699  000150   21D1(1)  
   700  000151   2892(1)  
   701  000152   2893(1)  
   702  000153   6194(1)  
   703  000154   2794(1)  
   704  000155   4890(1)  
   705  000156   A34B(2)  
   706  000157             
   707  000157             ;*******************************************************************************************************
   708  000157             F_PhilipsRC63:
   709  000157   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   710  000158   1225(1)  DW	S1+C_36K+150/Tc						;	解码及发码参数
   711  000159   006F(1)  DW	444/Tc							;	拆分基值1
   712  00015A   00DE(1)  DW	888/Tc							;       拆分基值2
   713  00015B   014D(1)  DW	444/Tc+888/Tc
   714  00015C   01BC(1)  DW	(888/Tc)*2
   715  00015D   029B(1)  DW	2670/Tc							;	PPM 格式波形识别库
   716  00015E   029B(1)  DW	H_Lvl+2670/Tc-0,	L_Lvl+889/Tc-0+S_Flag		;	引导电平
   717  00015F   C0DE(2)  
   718  000160   806F(2)  DW	L_Lvl+444/Tc-0,		H_Lvl+444/Tc-0+S_Flag		;	逻辑0电平
   719  000161   406F(1)  
   720  000162   006F(1)  DW	H_Lvl+444/Tc-0,		L_Lvl+444/Tc-0+S_Flag		;	逻辑1电平
   721  000163   C06F(2)  
   722  000164   80DE(2)  DW	L_Lvl+888/Tc-0,		H_Lvl+888/Tc-0+S_Flag		;	逻辑0电平
   723  000165   40DE(1)  
   724  000166   00DE(1)  DW	H_Lvl+888/Tc-0,		L_Lvl+888/Tc-0+S_Flag		;	逻辑1电平	（翻转位电平）
   725  000167   C0DE(2)  
   726  000168   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   727  000169   0170(1)  DW	0170H,2490H,21D1H,2892H,2493H,4890H,T_Flag2+150000/128	;	控制数据
   728  00016A   2490(1)  
   729  00016B   21D1(1)  
   730  00016C   2892(1)  
   731  00016D   2493(1)  
   732  00016E   4890(1)  
   733  00016F   A493(2)  
   734  000170             
   735  000170             ;*******************************************************************************************************
   736  000170             F_GeminiC10:
   737  000170   B210(2)  DW	PPM+F_F+R_P_R+L_W2+B_N2
   738  000171   1032(1)  DW	S1+C_31K+200/Tc						;	解码及发码参数
   739  000172   007F(1)  DW	510/Tc							;	拆分基值1
   740  000173   007F(1)  DW	510/Tc							;       拆分基值2
   741  000174   00FE(1)  DW	(510/Tc)*2
   742  000175   027D(1)  DW	(2550/Tc)						;	PPM 格式波形识别库
   743  000176   007F(1)  DW	H_Lvl+510/Tc-0,		L_Lvl+2550/Tc-0+S_Flag		;	引导电平
   744  000177   C27D(2)  
   745  000178   807F(2)  DW	L_Lvl+510/Tc-0,		H_Lvl+510/Tc-0+S_Flag		;	逻辑0电平
   746  000179   407F(1)  
   747  00017A   007F(1)  DW	H_Lvl+510/Tc-0,		L_Lvl+510/Tc-0+S_Flag		;	逻辑1电平
   748  00017B   C07F(2)  
   749  00017C   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   750  00017D   0160(1)  DW	0160H,2880H,2281H,T_Flag1+35000/128			;	控制数据
   751  00017E   2880(1)  
   752  00017F   2281(1)  
   753  000180   9111(2)  
   754  000181   0160(1)  DW	0160H,2182H,4880H,4181H,T_Flag2+131000/128		;	控制数据
   755  000182   2182(1)  
   756  000183   4880(1)  
   757  000184   4181(1)  
   758  000185   A3FF(2)  
   759  000186             
   760  000186             ;*******************************************************************************************************
   761  000186             F_3010P38K:
   762  000186   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   763  000187   1425(1)  DW	S1+C_38K+150/Tc						;	解码及发码参数
   764  000188   00DE(1)  DW	889/Tc							;	拆分基值1
   765  000189   00DE(1)  DW	889/Tc							;       拆分基值2
   766  00018A   01BC(1)  DW	(889/Tc)*2						;	PPM 格式波形识别库
   767  00018B   00D3(1)  DW	H_Lvl+844/Tc-0,		L_Lvl+844/Tc-0+S_Flag		;	逻辑0电平
   768  00018C   C0D3(2)  
   769  00018D   80D3(2)  DW	L_Lvl+844/Tc-0,		H_Lvl+844/Tc-0+S_Flag		;	逻辑1电平
   770  00018E   40D3(1)  
   771  00018F   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   772  000190   2250(1)  DW	2250H,6150H,2551H,4750H,T_Flag2+108000/128		;	控制数据
   773  000191   6150(1)  
   774  000192   2551(1+S)  
   775  000193   4750(1)  
   776  000194   A34B(2)  
   777  000195             
   778  000195             ;*******************************************************************************************************
   779  000195             F_3010P56K:
   780  000195   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   781  000196   1625(1+S)  DW	S1+C_56K+150/Tc						;	解码及发码参数
   782  000197   00DE(1)  DW	889/Tc							;	拆分基值1
   783  000198   00DE(1)  DW	889/Tc                                                  ;       拆分基值2
   784  000199   01BC(1)  DW	(889/Tc)*2						;	PPM 格式波形识别库
   785  00019A   00DE(1)  DW	H_Lvl+889/Tc-0,		L_Lvl+889/Tc-0+S_Flag		;	逻辑0电平
   786  00019B   C0DE(2)  
   787  00019C   80DE(2)  DW	L_Lvl+889/Tc-0,		H_Lvl+889/Tc-0+S_Flag		;	逻辑1电平
   788  00019D   40DE(1)  
   789  00019E   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   790  00019F   2250(1)  DW	2250H,6150H,2551H,4750H,T_Flag2+108000/128		;	控制数据
   791  0001A0   6150(1)  
   792  0001A1   2551(1+S)  
   793  0001A2   4750(1)  
   794  0001A3   A34B(2)  
   795  0001A4             
   796  0001A4             
   797  0001A4             ;*******************************************************************************************************
   798  0001A4             F_301036K:
   799  0001A4   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   800  0001A5   1225(1)  DW	S1+C_36K+150/Tc						;	解码及发码参数
   801  0001A6   00DE(1)  DW	889/Tc							;	拆分基值1
   802  0001A7   00DE(1)  DW	889/Tc                                                  ;       拆分基值2
   803  0001A8   01BC(1)  DW	(889/Tc)*2						;	PPM 格式波形识别库
   804  0001A9   00DE(1)  DW	H_Lvl+889/Tc-0,		L_Lvl+889/Tc-0+S_Flag		;	逻辑0电平
   805  0001AA   C0DE(2)  
   806  0001AB   80DE(2)  DW	L_Lvl+889/Tc-0,		H_Lvl+889/Tc-0+S_Flag		;	逻辑1电平
   807  0001AC   40DE(1)  
   808  0001AD   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   809  0001AE   2250(1)  DW	2250H,6150H,2551H,4650H,T_Flag2+108000/128		;	控制数据
   810  0001AF   6150(1)  
   811  0001B0   2551(1+S)  
   812  0001B1   4650(1)  
   813  0001B2   A34B(2)  
   814  0001B3             
   815  0001B3             ;*******************************************************************************************************
   816  0001B3             F_301038K:
   817  0001B3   8210(2)  DW	PPM+F_F+R_Self+L_W2+B_N2
   818  0001B4   1425(1)  DW	S1+C_38K+150/Tc						;	解码及发码参数
   819  0001B5   00D3(1)  DW	844/Tc							;	拆分基值1
   820  0001B6   00D3(1)  DW	844/Tc                                                  ;       拆分基值2
   821  0001B7   01A6(1)  DW	(844/Tc)*2						;	PPM 格式波形识别库
   822  0001B8   00D3(1)  DW	H_Lvl+844/Tc-0,		L_Lvl+844/Tc-0+S_Flag		;	逻辑0电平
   823  0001B9   C0D3(2)  
   824  0001BA   80D3(2)  DW	L_Lvl+844/Tc-0,		H_Lvl+844/Tc-0+S_Flag		;	逻辑1电平
   825  0001BB   40D3(1)  
   826  0001BC   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   827  0001BD   2250(1)  DW	2250H,6150H,2551H,4650H,T_Flag2+108000/128		;	控制数据
   828  0001BE   6150(1)  
   829  0001BF   2551(1+S)  
   830  0001C0   4650(1)  
   831  0001C1   A34B(2)  
   832  0001C2             
   833  0001C2             ;*******************************************************************************************************
   834  0001C2             F_6122:
   835  0001C2   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
   836  0001C3   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
   837  0001C4   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
   838  0001C5   C465(2)  
   839  0001C6   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
   840  0001C7   C08C(2)  
   841  0001C8   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
   842  0001C9   C1A4(2)  
   843  0001CA   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+2250/Tc-0+S_Flag		;	尾帧引导电平
   844  0001CB   C232(2)  
   845  0001CC   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   846  0001CD   0120(1)  DW	0120H,2840H,2841H,4840H,5840H,7140H,T_Flag1+108000/128	;	控制数据
   847  0001CE   2840(1)  
   848  0001CF   2841(1)  
   849  0001D0   4840(1)  
   850  0001D1   5840(1+S)  
   851  0001D2   7140(1+S)  
   852  0001D3   934B(2)  
   853  0001D4   0180(1)  DW	0180H,7140H,T_Flag2+108000/128
   854  0001D5   7140(1+S)  
   855  0001D6   A34B(2)  
   856  0001D7             
   857  0001D7             ;*******************************************************************************************************
   858  0001D7             F_6122X:
   859  0001D7   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
   860  0001D8   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
   861  0001D9   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
   862  0001DA   C465(2)  
   863  0001DB   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
   864  0001DC   C08C(2)  
   865  0001DD   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
   866  0001DE   C1A4(2)  
   867  0001DF   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+2250/Tc-0+S_Flag		;	尾帧引导电平
   868  0001E0   C232(2)  
   869  0001E1   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   870  0001E2   0120(1)  DW	0120H,2840H,2841H,2842H,2843H,7140H,T_Flag1+108000/128	;	控制数据
   871  0001E3   2840(1)  
   872  0001E4   2841(1)  
   873  0001E5   2842(1)  
   874  0001E6   2843(1)  
   875  0001E7   7140(1+S)  
   876  0001E8   934B(2)  
   877  0001E9   0180(1)  DW	0180H,7140H,T_Flag2+108000/128
   878  0001EA   7140(1+S)  
   879  0001EB   A34B(2)  
   880  0001EC             
   881  0001EC             ;*******************************************************************************************************
   882  0001EC             F_6122F:
   883  0001EC   2210(1)  DW	PWM+F_F+R_F_S+L_W2+B_N2
   884  0001ED   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
   885  0001EE   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
   886  0001EF   C465(2)  
   887  0001F0   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
   888  0001F1   C08C(2)  
   889  0001F2   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
   890  0001F3   C1A4(2)  
   891  0001F4   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   892  0001F5   0120(1)  DW	0120H,2840H,2841H,2842H,2843H,7140H,T_Flag1+108000/128	;	控制数据
   893  0001F6   2840(1)  
   894  0001F7   2841(1)  
   895  0001F8   2842(1)  
   896  0001F9   2843(1)  
   897  0001FA   7140(1+S)  
   898  0001FB   934B(2)  
   899  0001FC   0120(1)  DW	0120H,2844H,2845H,2846H,2847H,7140H,T_Flag2+108000/128
   900  0001FD   2844(1)  
   901  0001FE   2845(1)  
   902  0001FF   2846(1)  
   903  000200   2847(1)  
   904  000201   7140(1+S)  
   905  000202   A34B(2)  
   906  000203             
   907  000203             ;*******************************************************************************************************
   908  000203             F_9012:
   909  000203   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
   910  000204   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
   911  000205   0465(1)  DW	H_Lvl+4500/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
   912  000206   C465(2)  
   913  000207   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
   914  000208   C08C(2)  
   915  000209   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
   916  00020A   C1A4(2)  
   917  00020B   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   918  00020C   0120(1)  DW	0120H,2840H,2841H,4840H,5840H,7140H,T_Flag1+108000/128	;	控制数据
   919  00020D   2840(1)  
   920  00020E   2841(1)  
   921  00020F   4840(1)  
   922  000210   5840(1+S)  
   923  000211   7140(1+S)  
   924  000212   934B(2)  
   925  000213   0120(1)  DW	0120H,3140H,7140H,T_Flag2+108000/128
   926  000214   3140(1)  
   927  000215   7140(1+S)  
   928  000216   A34B(2)  
   929  000217             
   930  000217             ;*******************************************************************************************************
   931  000217             F_9012X:
   932  000217   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
   933  000218   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
   934  000219   0465(1)  DW	H_Lvl+4500/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
   935  00021A   C465(2)  
   936  00021B   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
   937  00021C   C08C(2)  
   938  00021D   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
   939  00021E   C1A4(2)  
   940  00021F   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   941  000220   0120(1)  DW	0120H,2840H,2841H,2842H,2843H,7140H,T_Flag1+108000/128	;	控制数据
   942  000221   2840(1)  
   943  000222   2841(1)  
   944  000223   2842(1)  
   945  000224   2843(1)  
   946  000225   7140(1+S)  
   947  000226   934B(2)  
   948  000227   0120(1)  DW	0120H,2144H,7140H,T_Flag2+108000/128
   949  000228   2144(1)  
   950  000229   7140(1+S)  
   951  00022A   A34B(2)  
   952  00022B             
   953  00022B             ;*******************************************************************************************************
   954  00022B             F_9012F:
   955  00022B   2210(1)  DW	PWM+F_F+R_F_S+L_W2+B_N2
   956  00022C   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
   957  00022D   0465(1)  DW	H_Lvl+4500/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
   958  00022E   C465(2)  
   959  00022F   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
   960  000230   C08C(2)  
   961  000231   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
   962  000232   C1A4(2)  
   963  000233   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   964  000234   0120(1)  DW	0120H,2840H,2841H,2842H,2843H,7140H,T_Flag1+108000/128	;	控制数据
   965  000235   2840(1)  
   966  000236   2841(1)  
   967  000237   2842(1)  
   968  000238   2843(1)  
   969  000239   7140(1+S)  
   970  00023A   934B(2)  
   971  00023B   0120(1)  DW	0120H,2844H,2845H,2846H,2847H,7140H,T_Flag2+108000/128
   972  00023C   2844(1)  
   973  00023D   2845(1)  
   974  00023E   2846(1)  
   975  00023F   2847(1)  
   976  000240   7140(1+S)  
   977  000241   A34B(2)  
   978  000242             
   979  000242             ;*******************************************************************************************************
   980  000242             F_RCMM24:
   981  000242   0230(1)  DW	PWM+F_F+R_Self+L_W2+B_N4
   982  000243   1219(1)  DW	S1+C_36K+100/Tc						;	解码及发码参数
   983  000244   0068(1)  DW	H_Lvl+416/Tc-0,		L_Lvl+278/Tc-0+S_Flag		;	首帧引导电平
   984  000245   C045(2)  
   985  000246   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+278/Tc-0+S_Flag		;	逻辑0电平
   986  000247   C045(2)  
   987  000248   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+444/Tc-0+S_Flag		;	逻辑1电平
   988  000249   C06F(2)  
   989  00024A   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+611/Tc-0+S_Flag		;	逻辑2电平
   990  00024B   C098(2)  
   991  00024C   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+778/Tc-0+S_Flag		;	逻辑3电平
   992  00024D   C0C2(2)  
   993  00024E   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
   994  00024F   0120(1)  DW	0120H,2840H,2841H,4840H,7140H,T_Flag2+103000/128	;	控制数据
   995  000250   2840(1)  
   996  000251   2841(1)  
   997  000252   4840(1)  
   998  000253   7140(1+S)  
   999  000254   A324(2)  
  1000  000255             
  1001  000255             ;*******************************************************************************************************
  1002  000255             F_RCMM32:
  1003  000255   0230(1)  DW	PWM+F_F+R_Self+L_W2+B_N4
  1004  000256   1219(1)  DW	S1+C_36K+100/Tc						;	解码及发码参数
  1005  000257   0068(1)  DW	H_Lvl+416/Tc-0,		L_Lvl+278/Tc-0+S_Flag		;	首帧引导电平
  1006  000258   C045(2)  
  1007  000259   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+278/Tc-0+S_Flag		;	逻辑0电平
  1008  00025A   C045(2)  
  1009  00025B   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+444/Tc-0+S_Flag		;	逻辑1电平
  1010  00025C   C06F(2)  
  1011  00025D   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+611/Tc-0+S_Flag		;	逻辑2电平
  1012  00025E   C098(2)  
  1013  00025F   0029(1)  DW	H_Lvl+166/Tc-0,		L_Lvl+778/Tc-0+S_Flag		;	逻辑3电平
  1014  000260   C0C2(2)  
  1015  000261   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1016  000262   0120(1)  DW	0120H,2840H,2841H,2842H,4840H,7140H,T_Flag2+103000/128	;	控制数据
  1017  000263   2840(1)  
  1018  000264   2841(1)  
  1019  000265   2842(1)  
  1020  000266   4840(1)  
  1021  000267   7140(1+S)  
  1022  000268   A324(2)  
  1023  000269             
  1024  000269             ;*******************************************************************************************************
  1025  000269             F_7461:
  1026  000269   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
  1027  00026A   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1028  00026B   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
  1029  00026C   C465(2)  
  1030  00026D   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
  1031  00026E   C08C(2)  
  1032  00026F   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
  1033  000270   C1A4(2)  
  1034  000271   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1035  000272   0120(1)  DW	0120H,2840H,2541H,3840H,3541H,4840H,5840H,7140H,T_Flag1+108000/128	;	控制数据
  1036  000273   2840(1)  
  1037  000274   2541(1+S)  
  1038  000275   3840(2)  
  1039  000276   3541(1)  
  1040  000277   4840(1)  
  1041  000278   5840(1+S)  
  1042  000279   7140(1+S)  
  1043  00027A   934B(2)  
  1044  00027B   0120(1)  DW	0120H,7140H,T_Flag2+108000/128
  1045  00027C   7140(1+S)  
  1046  00027D   A34B(2)  
  1047  00027E             
  1048  00027E             ;*******************************************************************************************************
  1049  00027E             F_7461X:
  1050  00027E   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
  1051  00027F   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1052  000280   08CA(1)  DW	H_Lvl+9000/Tc-0,	L_Lvl+4500/Tc-0+S_Flag		;	首帧引导电平
  1053  000281   C465(2)  
  1054  000282   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
  1055  000283   C08C(2)  
  1056  000284   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1680/Tc-0+S_Flag		;	逻辑1电平
  1057  000285   C1A4(2)  
  1058  000286   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1059  000287   0120(1)  DW	0120H,2840H,2541H,2842H,2543H,2844H,2845H,7140H,T_Flag1+108000/128	;	控制数据
  1060  000288   2840(1)  
  1061  000289   2541(1+S)  
  1062  00028A   2842(1)  
  1063  00028B   2543(1+S)  
  1064  00028C   2844(1)  
  1065  00028D   2845(1)  
  1066  00028E   7140(1+S)  
  1067  00028F   934B(2)  
  1068  000290   0120(1)  DW	0120H,7140H,T_Flag2+108000/128
  1069  000291   7140(1+S)  
  1070  000292   A34B(2)  
  1071  000293             
  1072  000293             ;*******************************************************************************************************
  1073  000293             F_6014C6:
  1074  000293   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1075  000294   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1076  000295   034A(1)  DW	H_Lvl+3370/Tc-0,	L_Lvl+3370/Tc-0+S_Flag		;	首帧引导电平
  1077  000296   C34A(2)  
  1078  000297   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+841/Tc-0+S_Flag		;	逻辑0电平
  1079  000298   C0D2(2)  
  1080  000299   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+2523/Tc-0+S_Flag		;	逻辑1电平
  1081  00029A   C276(2)  
  1082  00029B   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1083  00029C   0120(1)  DW	0120H,2640H,4640H,3640H,5640H,7140H,T_Flag2+102000/128	;	控制数据
  1084  00029D   2640(1+S)  
  1085  00029E   4640(1)  
  1086  00029F   3640(1)  
  1087  0002A0   5640(1+S)  
  1088  0002A1   7140(1+S)  
  1089  0002A2   A31C(2)  
  1090  0002A3             
  1091  0002A3             ;*******************************************************************************************************
  1092  0002A3             F_6014C6X:
  1093  0002A3   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1094  0002A4   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1095  0002A5   034A(1)  DW	H_Lvl+3370/Tc-0,	L_Lvl+3370/Tc-0+S_Flag		;	首帧引导电平
  1096  0002A6   C34A(2)  
  1097  0002A7   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+841/Tc-0+S_Flag		;	逻辑0电平
  1098  0002A8   C0D2(2)  
  1099  0002A9   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+2523/Tc-0+S_Flag		;	逻辑1电平
  1100  0002AA   C276(2)  
  1101  0002AB   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1102  0002AC   0120(1)  DW	0120H,2640H,2641H,2642H,2643H,7140H,T_Flag2+102000/128	;	控制数据
  1103  0002AD   2640(1+S)  
  1104  0002AE   2641(1+S)  
  1105  0002AF   2642(1+S)  
  1106  0002B0   2643(1+S)  
  1107  0002B1   7140(1+S)  
  1108  0002B2   A31C(2)  
  1109  0002B3             
  1110  0002B3             ;*******************************************************************************************************
  1111  0002B3             F_6014C5:
  1112  0002B3   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1113  0002B4   1332(1)  DW	S1+C_37K+200/Tc						;	解码及发码参数
  1114  0002B5   034A(1)  DW	H_Lvl+3370/Tc-0,	L_Lvl+3370/Tc-0+S_Flag		;	首帧引导电平
  1115  0002B6   C34A(2)  
  1116  0002B7   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+841/Tc-0+S_Flag		;	逻辑0电平
  1117  0002B8   C0D2(2)  
  1118  0002B9   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+2523/Tc-0+S_Flag		;	逻辑1电平
  1119  0002BA   C276(2)  
  1120  0002BB   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1121  0002BC   0120(1)  DW	0120H,2540H,4640H,3540H,5640H,7140H,T_Flag2+102000/128	;	控制数据
  1122  0002BD   2540(1+S)  
  1123  0002BE   4640(1)  
  1124  0002BF   3540(1)  
  1125  0002C0   5640(1+S)  
  1126  0002C1   7140(1+S)  
  1127  0002C2   A31C(2)  
  1128  0002C3             
  1129  0002C3             ;*******************************************************************************************************
  1130  0002C3             F_6014C5X:
  1131  0002C3   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1132  0002C4   1332(1)  DW	S1+C_37K+200/Tc						;	解码及发码参数
  1133  0002C5   034A(1)  DW	H_Lvl+3370/Tc-0,	L_Lvl+3370/Tc-0+S_Flag		;	首帧引导电平
  1134  0002C6   C34A(2)  
  1135  0002C7   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+841/Tc-0+S_Flag		;	逻辑0电平
  1136  0002C8   C0D2(2)  
  1137  0002C9   00D2(1)  DW	H_Lvl+841/Tc-0,		L_Lvl+2523/Tc-0+S_Flag		;	逻辑1电平
  1138  0002CA   C276(2)  
  1139  0002CB   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1140  0002CC   0120(1)  DW	0120H,2540H,2641H,2542H,2643H,7140H,T_Flag2+102000/128	;	控制数据
  1141  0002CD   2540(1+S)  
  1142  0002CE   2641(1+S)  
  1143  0002CF   2542(1+S)  
  1144  0002D0   2643(1+S)  
  1145  0002D1   7140(1+S)  
  1146  0002D2   A31C(2)  
  1147  0002D3             
  1148  0002D3             ;*******************************************************************************************************
  1149  0002D3             F_6124C5:
  1150  0002D3   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1151  0002D4   3532(1)  DW	S3+C_40K+200/Tc						;	解码及发码参数
  1152  0002D5   4258(1)  DW	H_Lvl+2400/Tc-0+S_Flag					;	首帧引导电平
  1153  0002D6   8096(2)  DW	L_Lvl+600/Tc-0,		H_Lvl+600/Tc-0+S_Flag		;	逻辑0电平
  1154  0002D7   4096(1)  
  1155  0002D8   8096(2)  DW	L_Lvl+600/Tc-0,		H_Lvl+1200/Tc-0+S_Flag		;	逻辑1电平
  1156  0002D9   412C(1)  
  1157  0002DA   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1158  0002DB   0120(1)  DW	0120H,4730H,2530H,T_Flag2+45000/128			;	控制数据
  1159  0002DC   4730(1)  
  1160  0002DD   2530(1+S)  
  1161  0002DE   A15F(2)  
  1162  0002DF             
  1163  0002DF             ;*******************************************************************************************************
  1164  0002DF             F_6124C8:
  1165  0002DF   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1166  0002E0   3532(1)  DW	S3+C_40K+200/Tc						;	解码及发码参数
  1167  0002E1   4258(1)  DW	H_Lvl+2400/Tc-0+S_Flag					;	首帧引导电平
  1168  0002E2   8096(2)  DW	L_Lvl+600/Tc-0,		H_Lvl+600/Tc-0+S_Flag		;	逻辑0电平
  1169  0002E3   4096(1)  
  1170  0002E4   8096(2)  DW	L_Lvl+600/Tc-0,		H_Lvl+1200/Tc-0+S_Flag		;	逻辑1电平
  1171  0002E5   412C(1)  
  1172  0002E6   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1173  0002E7   0120(1)  DW	0120H,4730H,2830H,T_Flag2+45000/128			;	控制数据
  1174  0002E8   4730(1)  
  1175  0002E9   2830(1)  
  1176  0002EA   A15F(2)  
  1177  0002EB             
  1178  0002EB             ;*******************************************************************************************************
  1179  0002EB             F_6124C13:
  1180  0002EB   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1181  0002EC   3532(1)  DW	S3+C_40K+200/Tc						;	解码及发码参数
  1182  0002ED   4258(1)  DW	H_Lvl+2400/Tc-0+S_Flag					;	首帧引导电平
  1183  0002EE   8096(2)  DW	L_Lvl+600/Tc-0,		H_Lvl+600/Tc-0+S_Flag		;	逻辑0电平
  1184  0002EF   4096(1)  
  1185  0002F0   8096(2)  DW	L_Lvl+600/Tc-0,		H_Lvl+1200/Tc-0+S_Flag		;	逻辑1电平
  1186  0002F1   412C(1)  
  1187  0002F2   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1188  0002F3   0120(1)  DW	0120H,4730H,2830H,2531H,T_Flag2+45000/128		;	控制数据
  1189  0002F4   4730(1)  
  1190  0002F5   2830(1)  
  1191  0002F6   2531(1+S)  
  1192  0002F7   A15F(2)  
  1193  0002F8             
  1194  0002F8             ;*******************************************************************************************************
  1195  0002F8             F_50560:
  1196  0002F8   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1197  0002F9   3432(1)  DW	S3+C_38K+200/Tc						;	解码及发码参数
  1198  0002FA   084D(1)  DW	H_Lvl+8500/Tc-0,	L_Lvl+4250/Tc-0+S_Flag		;	首帧引导电平
  1199  0002FB   C426(2)  
  1200  0002FC   0084(1)  DW	H_Lvl+530/Tc-0,		L_Lvl+530/Tc-0+S_Flag		;	逻辑0电平
  1201  0002FD   C084(2)  
  1202  0002FE   0084(1)  DW	H_Lvl+530/Tc-0,		L_Lvl+1590/Tc-0+S_Flag		;	逻辑1电平
  1203  0002FF   C18D(2)  
  1204  000300   0084(1)  DW	H_Lvl+530/Tc-0,		L_Lvl+4250/Tc-0+S_Flag		;	尾帧引导电平
  1205  000301   C426(2)  
  1206  000302   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1207  000303   0120(1)  DW	0120H,2840H,0180H,4840H,7140H,T_Flag2+65000/128		;	控制数据
  1208  000304   2840(1)  
  1209  000305   0180(1)  
  1210  000306   4840(1)  
  1211  000307   7140(1+S)  
  1212  000308   A1FB(2)  
  1213  000309             
  1214  000309             ;*******************************************************************************************************
  1215  000309             F_50560X:
  1216  000309   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1217  00030A   3432(1)  DW	S3+C_38K+200/Tc						;	解码及发码参数
  1218  00030B   07D0(1+S)  DW	H_Lvl+8000/Tc-0,	L_Lvl+4000/Tc-0+S_Flag		;	首帧引导电平
  1219  00030C   C3E8(2)  
  1220  00030D   0084(1)  DW	H_Lvl+530/Tc-0,		L_Lvl+530/Tc-0+S_Flag		;	逻辑0电平
  1221  00030E   C084(2)  
  1222  00030F   0084(1)  DW	H_Lvl+530/Tc-0,		L_Lvl+1590/Tc-0+S_Flag		;	逻辑1电平
  1223  000310   C18D(2)  
  1224  000311   0084(1)  DW	H_Lvl+530/Tc-0,		L_Lvl+4000/Tc-0+S_Flag		;	尾帧引导电平
  1225  000312   C3E8(2)  
  1226  000313   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1227  000314   0120(1)  DW	0120H,2840H,0180H,4840H,7140H,T_Flag2+65000/128		;	控制数据
  1228  000315   2840(1)  
  1229  000316   0180(1)  
  1230  000317   4840(1)  
  1231  000318   7140(1+S)  
  1232  000319   A1FB(2)  
  1233  00031A             
  1234  00031A             ;*******************************************************************************************************
  1235  00031A             F_MitC8D8:
  1236  00031A   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1237  00031B   3432(1)  DW	S3+C_38K+200/Tc						;	解码及发码参数
  1238  00031C   005F(1)  DW	H_Lvl+380/Tc-0,		L_Lvl+825/Tc-0+S_Flag		;	逻辑1电平
  1239  00031D   C0CE(2)  
  1240  00031E   005F(1)  DW	H_Lvl+380/Tc-0,		L_Lvl+2000/Tc-0+S_Flag		;	尾帧引导电平
  1241  00031F   C1F4(2)  
  1242  000320   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1243  000321   2820(1)  DW	2820H,4820H,7120H,T_Flag2+55000/128			;	控制数据
  1244  000322   4820(1)  
  1245  000323   7120(1+S)  
  1246  000324   A1AD(2)  
  1247  000325             
  1248  000325             ;*******************************************************************************************************
  1249  000325             F_Sharp:
  1250  000325   2210(1)  DW	PWM+F_F+R_F_S+L_W2+B_N2
  1251  000326   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1252  000327   0042(1)  DW	H_Lvl+264/Tc-0,		L_Lvl+786/Tc-0+S_Flag		;	逻辑1电平
  1253  000328   C0C4(2)  
  1254  000329   0042(1)  DW	H_Lvl+264/Tc-0,		L_Lvl+1846/Tc-0+S_Flag		;	尾帧引导电平
  1255  00032A   C1CD(2)  
  1256  00032B   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1257  00032C   2520(1+S)  DW	2520H,4820H,1120H,0120H,7120H,T_Flag1+67000/128		;	控制数据
  1258  00032D   4820(1)  
  1259  00032E   1120(1)  
  1260  00032F   0120(1)  
  1261  000330   7120(1+S)  
  1262  000331   920B(2)  
  1263  000332   2521(1+S)  DW	2521H,5820H,0120H,1120H,7120H,T_Flag2+67000/128
  1264  000333   5820(1+S)  
  1265  000334   0120(1)  
  1266  000335   1120(1)  
  1267  000336   7120(1+S)  
  1268  000337   A20B(2)  
  1269  000338             
  1270  000338             ;*******************************************************************************************************
  1271  000338             F_JVC:
  1272  000338   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
  1273  000339   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1274  00033A   0839(1)  DW	H_Lvl+8420/Tc-0,	L_Lvl+4210/Tc-0+S_Flag		;	首帧引导电平
  1275  00033B   C41C(2)  
  1276  00033C   0083(1)  DW	H_Lvl+526/Tc-0,		L_Lvl+526/Tc-0+S_Flag		;	逻辑0电平
  1277  00033D   C083(2)  
  1278  00033E   0083(1)  DW	H_Lvl+526/Tc-0,		L_Lvl+1578/Tc-0+S_Flag		;	逻辑1电平
  1279  00033F   C18A(2)  
  1280  000340   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1281  000341   0120(1)  DW	0120H,2840H,4840H,7140H,T_Flag1+60000/128		;	控制数据
  1282  000342   2840(1)  
  1283  000343   4840(1)  
  1284  000344   7140(1+S)  
  1285  000345   91D4(2)  
  1286  000346   2840(1)  DW	2840H,4840H,7140H,T_Flag2+60000/128
  1287  000347   4840(1)  
  1288  000348   7140(1+S)  
  1289  000349   A1D4(2)  
  1290  00034A             
  1291  00034A             ;*******************************************************************************************************
  1292  00034A             F_Y261:
  1293  00034A   4210(1)  DW	PWM+F_D+R_Self+L_W2+B_N2
  1294  00034B   2432(1)  DW	S2+C_38K+200/Tc						;	解码及发码参数
  1295  00034C   02EE(1)  DW	H_Lvl+3000/Tc-0,	L_Lvl+3000/Tc-0+S_Flag		;	首帧引导电平
  1296  00034D   C2EE(2)  
  1297  00034E   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+1500/Tc-0+S_Flag		;	逻辑0电平
  1298  00034F   C177(2)  
  1299  000350   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+2500/Tc-0+S_Flag		;	逻辑1电平
  1300  000351   C271(2)  
  1301  000352   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+4000/Tc-0+S_Flag		;	尾帧引导电平
  1302  000353   C3E8(2)  
  1303  000354   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1304  000355   0120(1)  DW	0120H,2840H,4840H,0180H,7140H,T_Flag2+20000/128		;	控制数据
  1305  000356   2840(1)  
  1306  000357   4840(1)  
  1307  000358   0180(1)  
  1308  000359   7140(1+S)  
  1309  00035A   A09C(2)  
  1310  00035B             
  1311  00035B             ;*******************************************************************************************************
  1312  00035B             F_7464:
  1313  00035B   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1314  00035C   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1315  00035D   034A(1)  DW	H_Lvl+3370/Tc-0,	L_Lvl+1680/Tc-0+S_Flag		;	首帧引导电平
  1316  00035E   C1A4(2)  
  1317  00035F   0069(1)  DW	H_Lvl+421/Tc-0,		L_Lvl+421/Tc-0+S_Flag		;	逻辑0电平
  1318  000360   C069(2)  
  1319  000361   0069(1)  DW	H_Lvl+421/Tc-0,		L_Lvl+1263/Tc-0+S_Flag		;	逻辑1电平
  1320  000362   C13B(2)  
  1321  000363   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1322  000364   0120(1)  DW	0120H
  1323  000365   0140(1)  DW	0140H,1140H,0140H,0140H,0140H,0140H,0140H,0140H
  1324  000366   1140(1)  
  1325  000367   0140(1)  
  1326  000368   0140(1)  
  1327  000369   0140(1)  
  1328  00036A   0140(1)  
  1329  00036B   0140(1)  
  1330  00036C   0140(1)  
  1331  00036D   0140(1)  DW	0140H,0140H,0140H,0140H,0140H,1140H,0140H,0140H
  1332  00036E   0140(1)  
  1333  00036F   0140(1)  
  1334  000370   0140(1)  
  1335  000371   0140(1)  
  1336  000372   1140(1)  
  1337  000373   0140(1)  
  1338  000374   0140(1)  
  1339  000375   2840(1)  DW	2840H,2841H,4840H,2842H,7140H,T_Flag2+126000/128	;	控制数据
  1340  000376   2841(1)  
  1341  000377   4840(1)  
  1342  000378   2842(1)  
  1343  000379   7140(1+S)  
  1344  00037A   A3D8(2)  
  1345  00037B             
  1346  00037B             ;*******************************************************************************************************
  1347  00037B             F_7051:
  1348  00037B   4210(1)  DW	PWM+F_D+R_Self+L_W2+B_N2
  1349  00037C   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1350  00037D   038E(1)  DW	H_Lvl+3640/Tc-0,	L_Lvl+1800/Tc-0+S_Flag		;	首帧引导电平
  1351  00037E   C1C2(2)  
  1352  00037F   005E(1)  DW	H_Lvl+380/Tc-1,		L_Lvl+380/Tc-6+S_Flag		;	逻辑0电平
  1353  000380   C059(2)  
  1354  000381   005E(1)  DW	H_Lvl+380/Tc-1,		L_Lvl+1340/Tc-0+S_Flag		;	逻辑1电平
  1355  000382   C14F(2)  
  1356  000383   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1357  000384   0120(1)  DW	0120H,2840H,2841H,2842H,2843H,4840H,4841H,7140H,T_Flag2+50000/128	;	控制数据
  1358  000385   2840(1)  
  1359  000386   2841(1)  
  1360  000387   2842(1)  
  1361  000388   2843(1)  
  1362  000389   4840(1)  
  1363  00038A   4841(1)  
  1364  00038B   7140(1+S)  
  1365  00038C   A186(2)  
  1366  00038D             
  1367  00038D             ;*******************************************************************************************************
  1368  00038D             F_DVB40bit:
  1369  00038D   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
  1370  00038E   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1371  00038F   0384(1)  DW	H_Lvl+3600/Tc-0,	L_Lvl+1800/Tc-0+S_Flag		;	首帧引导电平
  1372  000390   C1C2(2)  
  1373  000391   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
  1374  000392   C08C(2)  
  1375  000393   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1180/Tc-0+S_Flag		;	逻辑1电平
  1376  000394   C127(2)  
  1377  000395   0384(1)  DW	H_Lvl+3600/Tc-0,	L_Lvl+3600/Tc-0+S_Flag		;	尾帧引导电平
  1378  000396   C384(2)  
  1379  000397   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1380  000398   0120(1)  DW	0120H,2840H,2841H,2842H,0120H,4840H,4841H,7140H,T_Flag1+120000/128	;	控制数据
  1381  000399   2840(1)  
  1382  00039A   2841(1)  
  1383  00039B   2842(1)  
  1384  00039C   0120(1)  
  1385  00039D   4840(1)  
  1386  00039E   4841(1)  
  1387  00039F   7140(1+S)  
  1388  0003A0   93A9(2)  
  1389  0003A1   0180(1)  DW	0180H,7140H,T_Flag2+108000/128
  1390  0003A2   7140(1+S)  
  1391  0003A3   A34B(2)  
  1392  0003A4             
  1393  0003A4             ;*******************************************************************************************************
  1394  0003A4             F_DVB40bit18:
  1395  0003A4   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
  1396  0003A5   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1397  0003A6   0384(1)  DW	H_Lvl+3600/Tc-0,	L_Lvl+1800/Tc-0+S_Flag		;	首帧引导电平
  1398  0003A7   C1C2(2)  
  1399  0003A8   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
  1400  0003A9   C08C(2)  
  1401  0003AA   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1180/Tc-0+S_Flag		;	逻辑1电平
  1402  0003AB   C127(2)  
  1403  0003AC   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1404  0003AD   0120(1)  DW	0120H,2840H,2841H,2842H,0120H,4840H,4841H,7140H,T_Flag1+120000/128	;	控制数据
  1405  0003AE   2840(1)  
  1406  0003AF   2841(1)  
  1407  0003B0   2842(1)  
  1408  0003B1   0120(1)  
  1409  0003B2   4840(1)  
  1410  0003B3   4841(1)  
  1411  0003B4   7140(1+S)  
  1412  0003B5   93A9(2)  
  1413  0003B6   0120(1)  DW	0120H,7140H,T_Flag2+108000/128
  1414  0003B7   7140(1+S)  
  1415  0003B8   A34B(2)  
  1416  0003B9             
  1417  0003B9             ;*******************************************************************************************************
  1418  0003B9             F_RCA38:
  1419  0003B9   4210(1)  DW	PWM+F_D+R_Self+L_W2+B_N2
  1420  0003BA   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1421  0003BB   03E8(1)  DW	H_Lvl+4000/Tc-0,	L_Lvl+4000/Tc-0+S_Flag		;	首帧引导电平
  1422  0003BC   C3E8(2)  
  1423  0003BD   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+1000/Tc-0+S_Flag		;	逻辑0电平
  1424  0003BE   C0FA(2)  
  1425  0003BF   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+2000/Tc-0+S_Flag		;	逻辑1电平
  1426  0003C0   C1F4(2)  
  1427  0003C1   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1428  0003C2   0120(1)  DW	0120H,2440H,4840H,3440H,5840H,7140H,T_Flag2+8000/128	;	控制数据
  1429  0003C3   2440(1)  
  1430  0003C4   4840(1)  
  1431  0003C5   3440(1)  
  1432  0003C6   5840(1+S)  
  1433  0003C7   7140(1+S)  
  1434  0003C8   A03E(2)  
  1435  0003C9             
  1436  0003C9             ;*******************************************************************************************************
  1437  0003C9             F_RCA56:
  1438  0003C9   4210(1)  DW	PWM+F_D+R_Self+L_W2+B_N2
  1439  0003CA   1632(1+S)  DW	S1+C_56K+200/Tc						;	解码及发码参数
  1440  0003CB   03E8(1)  DW	H_Lvl+4000/Tc-0,	L_Lvl+4000/Tc-0+S_Flag		;	首帧引导电平
  1441  0003CC   C3E8(2)  
  1442  0003CD   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+1000/Tc-0+S_Flag		;	逻辑0电平
  1443  0003CE   C0FA(2)  
  1444  0003CF   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+2000/Tc-0+S_Flag		;	逻辑1电平
  1445  0003D0   C1F4(2)  
  1446  0003D1   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1447  0003D2   0120(1)  DW	0120H,2440H,4840H,3440H,5840H,7140H,T_Flag2+8000/128	;	控制数据
  1448  0003D3   2440(1)  
  1449  0003D4   4840(1)  
  1450  0003D5   3440(1)  
  1451  0003D6   5840(1+S)  
  1452  0003D7   7140(1+S)  
  1453  0003D8   A03E(2)  
  1454  0003D9             
  1455  0003D9             ;*******************************************************************************************************
  1456  0003D9             F_3004:
  1457  0003D9   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1458  0003DA   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1459  0003DB   0023(1)  DW	H_Lvl+140/Tc-0,		L_Lvl+4920/Tc-0+S_Flag		;	逻辑0电平
  1460  0003DC   C4CE(2)  
  1461  0003DD   0023(1)  DW	H_Lvl+140/Tc-0,		L_Lvl+7450/Tc-0+S_Flag		;	逻辑1电平
  1462  0003DE   C746(2)  
  1463  0003DF   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1464  0003E0   2120(1)  DW	2120H,6120H,2321H,4620H,7120H,T_Flag2+120000/128	;	控制数据
  1465  0003E1   6120(1)  
  1466  0003E2   2321(1)  
  1467  0003E3   4620(1)  
  1468  0003E4   7120(1+S)  
  1469  0003E5   A3A9(2)  
  1470  0003E6             
  1471  0003E6             ;*******************************************************************************************************
  1472  0003E6             F_RCT311:
  1473  0003E6   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1474  0003E7   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1475  0003E8   0078(1)  DW	H_Lvl+480/Tc-0,		L_Lvl+2050/Tc-0+S_Flag		;	逻辑0电平
  1476  0003E9   C200(2)  
  1477  0003EA   0078(1)  DW	H_Lvl+480/Tc-0,		L_Lvl+4580/Tc-0+S_Flag		;	逻辑1电平
  1478  0003EB   C479(2)  
  1479  0003EC   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1480  0003ED   2420(1)  DW	2420H,6120H,4720H,7120H,T_Flag2+80000/128		;	控制数据
  1481  0003EE   6120(1)  
  1482  0003EF   4720(1)  
  1483  0003F0   7120(1+S)  
  1484  0003F1   A271(2)  
  1485  0003F2             
  1486  0003F2             ;*******************************************************************************************************
  1487  0003F2             F_HuiZhou:
  1488  0003F2   4210(1)  DW	PWM+F_D+R_Self+L_W2+B_N2
  1489  0003F3   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1490  0003F4   04E2(1)  DW	H_Lvl+5000/Tc-0,	L_Lvl+5000/Tc-0+S_Flag		;	首帧引导电平
  1491  0003F5   C4E2(2)  
  1492  0003F6   003E(1)  DW	H_Lvl+250/Tc-0,		L_Lvl+510/Tc-0+S_Flag		;	逻辑0电平
  1493  0003F7   C07F(2)  
  1494  0003F8   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+1010/Tc-0+S_Flag		;	逻辑1电平
  1495  0003F9   C0FC(2)  
  1496  0003FA   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1497  0003FB   0120(1)  DW	0120H,4840H,2440H,7160H,T_Flag2+20000/128		;	控制数据
  1498  0003FC   4840(1)  
  1499  0003FD   2440(1)  
  1500  0003FE   7160(1+S)  
  1501  0003FF   A09C(2)  
  1502  000400             
  1503  000400             ;*******************************************************************************************************
  1504  000400             F_TopWay:
  1505  000400   4210(1)  DW	PWM+F_D+R_Self+L_W2+B_N2
  1506  000401   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1507  000402   05DC(1)  DW	H_Lvl+6000/Tc-0,	L_Lvl+2000/Tc-0+S_Flag		;	首帧引导电平
  1508  000403   C1F4(2)  
  1509  000404   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+560/Tc-0+S_Flag		;	逻辑0电平
  1510  000405   C08C(2)  
  1511  000406   008C(1)  DW	H_Lvl+560/Tc-0,		L_Lvl+1120/Tc-0+S_Flag		;	逻辑1电平
  1512  000407   C118(2)  
  1513  000408   038E(1)  DW	H_Lvl+3640/Tc-0,	L_Lvl+3640/Tc-0+S_Flag		;	尾帧引导电平
  1514  000409   C38E(2)  
  1515  00040A   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1516  00040B   0120(1)  DW	0120H,2840H,2841H,4840H,0180H,2842H,5840H,7140H,T_Flag2+100000/128	;	控制数据
  1517  00040C   2840(1)  
  1518  00040D   2841(1)  
  1519  00040E   4840(1)  
  1520  00040F   0180(1)  
  1521  000410   2842(1)  
  1522  000411   5840(1+S)  
  1523  000412   7140(1+S)  
  1524  000413   A30D(2)  
  1525  000414             
  1526  000414             ;*******************************************************************************************************
  1527  000414             F_Custom6Bit:
  1528  000414   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1529  000415   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1530  000416   0092(1)  DW	H_Lvl+587/Tc-0,		L_Lvl+1520/Tc-0+S_Flag		;	逻辑0电平
  1531  000417   C17C(2)  
  1532  000418   0092(1)  DW	H_Lvl+587/Tc-0,		L_Lvl+3660/Tc-0+S_Flag		;	逻辑1电平
  1533  000419   C393(2)  
  1534  00041A   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1535  00041B   4620(1)  DW	4620H,7120H,T_Flag2+50000/128				;	控制数据
  1536  00041C   7120(1+S)  
  1537  00041D   A186(2)  
  1538  00041E             
  1539  00041E             ;*******************************************************************************************************
  1540  00041E             F_AH5900134K:
  1541  00041E   1210(1)  DW	PWM+F_F+R_Tail+L_W2+B_N2
  1542  00041F   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1543  000420   0368(1)  DW	H_Lvl+3490/Tc-0,	L_Lvl+1740/Tc-0+S_Flag		;	首帧引导电平
  1544  000421   C1B3(2)  
  1545  000422   0069(1)  DW	H_Lvl+421/Tc-0,		L_Lvl+421/Tc-0+S_Flag		;	逻辑0电平
  1546  000423   C069(2)  
  1547  000424   0069(1)  DW	H_Lvl+421/Tc-0,		L_Lvl+1263/Tc-0+S_Flag		;	逻辑1电平
  1548  000425   C13B(2)  
  1549  000426   0368(1)  DW	H_Lvl+3490/Tc-0,	L_Lvl+3490/Tc-0+S_Flag		;	尾帧引导电平
  1550  000427   C368(2)  
  1551  000428   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1552  000429   0120(1)  DW	0120H,2840H,2841H,2842H,2843H,4840H,4841H,7140H,T_Flag1+100000/128	;	控制数据
  1553  00042A   2840(1)  
  1554  00042B   2841(1)  
  1555  00042C   2842(1)  
  1556  00042D   2843(1)  
  1557  00042E   4840(1)  
  1558  00042F   4841(1)  
  1559  000430   7140(1+S)  
  1560  000431   930D(2)  
  1561  000432   0180(1)  DW	0180H,7140H,T_Flag2+100000/128
  1562  000433   7140(1+S)  
  1563  000434   A30D(2)  
  1564  000435             
  1565  000435             ;*******************************************************************************************************
  1566  000435             F_50462:
  1567  000435   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1568  000436   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1569  000437   0055(1)  DW	H_Lvl+340/Tc-0,		L_Lvl+700/Tc-0+S_Flag		;	逻辑0电平
  1570  000438   C0AF(2)  
  1571  000439   0055(1)  DW	H_Lvl+340/Tc-0,		L_Lvl+1650/Tc-0+S_Flag		;	逻辑1电平
  1572  00043A   C19C(2)  
  1573  00043B   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1574  00043C   2820(1)  DW	2820H,4820H,7120H,T_Flag2+50000/128			;	控制数据
  1575  00043D   4820(1)  
  1576  00043E   7120(1+S)  
  1577  00043F   A186(2)  
  1578  000440             
  1579  000440             ;*******************************************************************************************************
  1580  000440             F_Pioneer:
  1581  000440   2210(1)  DW	PWM+F_F+R_F_S+L_W2+B_N2
  1582  000441   1532(1+S)  DW	S1+C_40K+200/Tc						;	解码及发码参数
  1583  000442   084D(1)  DW	H_Lvl+8500/Tc-0,	L_Lvl+4250/Tc-0+S_Flag		;	首帧引导电平
  1584  000443   C426(2)  
  1585  000444   0086(1)  DW	H_Lvl+536/Tc-0,		L_Lvl+536/Tc-0+S_Flag		;	逻辑0电平
  1586  000445   C086(2)  
  1587  000446   0086(1)  DW	H_Lvl+536/Tc-0,		L_Lvl+1590/Tc-0+S_Flag		;	逻辑1电平
  1588  000447   C18D(2)  
  1589  000448   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1590  000449   0120(1)  DW	0120H,2840H,2841H,4840H,4841H,7140H,T_Flag1+90000/128	;	控制数据
  1591  00044A   2840(1)  
  1592  00044B   2841(1)  
  1593  00044C   4840(1)  
  1594  00044D   4841(1)  
  1595  00044E   7140(1+S)  
  1596  00044F   92BF(2)  
  1597  000450   0120(1)  DW	0120H,2842H,2843H,4842H,4843H,7140H,T_Flag2+90000/128
  1598  000451   2842(1)  
  1599  000452   2843(1)  
  1600  000453   4842(1)  
  1601  000454   4843(1)  
  1602  000455   7140(1+S)  
  1603  000456   A2BF(2)  
  1604  000457             
  1605  000457             ;*******************************************************************************************************
  1606  000457             F_MiBox:
  1607  000457   0230(1)  DW	PWM+F_F+R_Self+L_W2+B_N4
  1608  000458   1425(1)  DW	S1+C_38K+150/Tc						;	解码及发码参数
  1609  000459   00FA(1)  DW	H_Lvl+1000/Tc-0,	L_Lvl+570/Tc-0+S_Flag		;	首帧引导电平
  1610  00045A   C08E(2)  
  1611  00045B   0096(1)  DW	H_Lvl+600/Tc-0,		L_Lvl+570/Tc-0+S_Flag		;	逻辑0电平
  1612  00045C   C08E(2)  
  1613  00045D   0096(1)  DW	H_Lvl+600/Tc-0,		L_Lvl+870/Tc-0+S_Flag		;	逻辑1电平
  1614  00045E   C0D9(2)  
  1615  00045F   0096(1)  DW	H_Lvl+600/Tc-0,		L_Lvl+1170/Tc-0+S_Flag		;	逻辑2电平
  1616  000460   C124(2)  
  1617  000461   0096(1)  DW	H_Lvl+600/Tc-0,		L_Lvl+1470/Tc-0+S_Flag		;	逻辑3电平
  1618  000462   C16F(2)  
  1619  000463   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1620  000464   0120(1)  DW	0120H,4840H,4841H,2440H,7140H,T_Flag2+30000/128		;	控制数据
  1621  000465   4840(1)  
  1622  000466   4841(1)  
  1623  000467   2440(1)  
  1624  000468   7140(1+S)  
  1625  000469   A0EA(2)  
  1626  00046A             
  1627  00046A             ;*******************************************************************************************************
  1628  00046A             F_50119P:
  1629  00046A   0210(1)  DW	PWM+F_F+R_Self+L_W2+B_N2
  1630  00046B   1432(1)  DW	S1+C_38K+200/Tc						;	解码及发码参数
  1631  00046C   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+500/Tc-0+S_Flag		;	逻辑0电平
  1632  00046D   C07D(2)  
  1633  00046E   007D(1)  DW	H_Lvl+500/Tc-0,		L_Lvl+1500/Tc-0+S_Flag		;	逻辑1电平
  1634  00046F   C177(2)  
  1635  000470   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1636  000471   2320(1)  DW	2320H,4720H,7120H,T_Flag2+28000/128			;	控制数据
  1637  000472   4720(1)  
  1638  000473   7120(1+S)  
  1639  000474   A0DA(2)  
  1640  000475             
  1641  000475             ;*******************************************************************************************************
  1642  000475             F_DreamDVB:
  1643  000475   12F0(1)  DW	PWM+F_F+R_Tail+L_W2+B_N16
  1644  000476   140C(1)  DW	S1+C_38K+50/Tc						;	解码及发码参数
  1645  000477   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+13800/Tc-0+S_Flag		;	分离间隔电平
  1646  000478   CD7A(2)  
  1647  000479   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+0*136)/Tc-0+S_Flag	;	逻辑0电平
  1648  00047A   C0C3(2)  
  1649  00047B   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+1*136)/Tc-0+S_Flag	;	逻辑1电平
  1650  00047C   C0E5(2)  
  1651  00047D   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+2*136)/Tc-0+S_Flag	;	逻辑2电平
  1652  00047E   C107(2)  
  1653  00047F   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+3*136)/Tc-0+S_Flag	;	逻辑3电平
  1654  000480   C129(2)  
  1655  000481   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+4*136)/Tc-0+S_Flag	;	逻辑4电平
  1656  000482   C14B(2)  
  1657  000483   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+5*136)/Tc-0+S_Flag	;	逻辑5电平
  1658  000484   C16D(2)  
  1659  000485   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+6*136)/Tc-0+S_Flag	;	逻辑6电平
  1660  000486   C18F(2)  
  1661  000487   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+7*136)/Tc-0+S_Flag	;	逻辑7电平
  1662  000488   C1B1(2)  
  1663  000489   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+8*136)/Tc-0+S_Flag	;	逻辑8电平
  1664  00048A   C1D3(2)  
  1665  00048B   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+9*136)/Tc-0+S_Flag	;	逻辑9电平
  1666  00048C   C1F5(2)  
  1667  00048D   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+10*136)/Tc-0+S_Flag	;	逻辑A电平
  1668  00048E   C217(2)  
  1669  00048F   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+11*136)/Tc-0+S_Flag	;	逻辑B电平
  1670  000490   C239(2)  
  1671  000491   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+12*136)/Tc-0+S_Flag	;	逻辑C电平
  1672  000492   C25B(2)  
  1673  000493   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+13*136)/Tc-0+S_Flag	;	逻辑D电平
  1674  000494   C27D(2)  
  1675  000495   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+14*136)/Tc-0+S_Flag	;	逻辑E电平
  1676  000496   C29F(2)  
  1677  000497   0032(1)  DW	H_Lvl+200/Tc-0,		L_Lvl+(780+15*136)/Tc-0+S_Flag	;	逻辑F电平
  1678  000498   C2C1(2)  
  1679  000499   FFFF(2)  DW	0XFFFF							;	控制数据识别标记
  1680  00049A   2840(1)  DW	2840H,2841H,2842H,2843H,8120H
  1681  00049B   2841(1)  
  1682  00049C   2842(1)  
  1683  00049D   2843(1)  
  1684  00049E   8120(2)  
  1685  00049F   4840(1)  DW	4840H,4841H,4842H,4843H,7140H,T_Flag1+120000/128	;	控制数据
  1686  0004A0   4841(1)  
  1687  0004A1   4842(1)  
  1688  0004A2   4843(1)  
  1689  0004A3   7140(1+S)  
  1690  0004A4   93A9(2)  
  1691  0004A5   2840(1)  DW	2840H,2841H,2842H,2843H,8120H
  1692  0004A6   2841(1)  
  1693  0004A7   2842(1)  
  1694  0004A8   2843(1)  
  1695  0004A9   8120(2)  
  1696  0004AA   4844(1)  DW	4844H,4845H,4846H,4847H,7140H,T_Flag2+120000/128	;	控制数据
  1697  0004AB   4845(1)  
  1698  0004AC   4846(1)  
  1699  0004AD   4847(1)  
  1700  0004AE   7140(1+S)  
  1701  0004AF   A3A9(2)  
  1702  0004B0             ;*******************************************************************************************************
  1703  0004B0             
  1704  0004B0             
  1705  0004B0             
  1706  0004B0             
  1707  0004B0             
  1708  0004B0             
  1709  0004B0             
  1710  0004B0             	INCLUDE		.\Source\Learn.asm
  1711  0004B0             
  1712  0004B0             ;****************************************************************************
  1713  0004B0             ;程序功能:	等待设置按键按下达到固定时间值
  1714  0004B0             ;输入参数:	无
  1715  0004B0             ;输出参数:	无
  1716  0004B0             ;堆栈层数:	3层
  1717  0004B0             ;内存占用:	无
  1718  0004B0             ;****************************************************************************
  1719  0004B0             //
  1720  0004B0             Wait_Set_Time:
  1721  0004B0   2DFA(1)  	MOV	A,#250
  1722  0004B1   2F45(1)  	B0MOV	Time,A
  1723  0004B2             SET_OUTPUT_ADDRS1:	
  1724  0004B2   0000(1)  	NOP
  1725  0004B3             SET_OUTPUT_ADDRS2:	
  1726  0004B3   0000(1)  	NOP
  1727  0004B4             W_S_T_Loop:
  1728  0004B4   CED1(2)  	CALL	Light_On
  1729  0004B5   CEC2(2)  	CALL	Delay_1ms
  1730  0004B6   CED4(2)  	CALL	Light_Off
  1731  0004B7   CEBC(2)  	CALL	Delay_10ms
  1732  0004B8             SET_INPUT_SADDR:	
  1733  0004B8   73D2(1+S)  	B0BTS0	P2Data.3
  1734  0004B9   84CB(2)  	JMP	W_S_T_Exit
  1735  0004BA   2645(1+S)  	DECMS	Time
  1736  0004BB   84B4(2)  	JMP	W_S_T_Loop		; 等待设置键按下达到3秒
  1737  0004BC             
  1738  0004BC             Wait_Set_Free:
  1739  0004BC   CED1(2)  	CALL	Light_On
  1740  0004BD   CEB0(2)  	CALL	Delay_100ms
  1741  0004BE   C088(2)  	CALL	Scan_Key
  1742  0004BF   2E01(1)  	B0MOV	A,KeyNum1
  1743  0004C0             SET_KEY_ADDR2:
  1744  0004C0   060B(1+S)  	CMPRS	A,#Learn_Set
  1745  0004C1   84C9(2)  	JMP	W_L_K_Free
  1746  0004C2             LEARN_KEY_PRESS_ADDR:
  1747  0004C2   CED1(2)  	CALL	Light_On
  1748  0004C3   CEB0(2)  	CALL	Delay_100ms
  1749  0004C4   C088(2)  	CALL	Scan_Key
  1750  0004C5   2E01(1)  	B0MOV	A,KeyNum1
  1751  0004C6             SET_KEY_ADDR3:
  1752  0004C6   060B(1+S)  	CMPRS	A,#Learn_Set
  1753  0004C7   84C9(2)  	JMP	W_L_K_Free
  1754  0004C8   84BC(2)  	JMP	Wait_Set_Free
  1755  0004C9             
  1756  0004C9             W_L_K_Free:
  1757  0004C9   6A86(1)  	B0BSET	FC
  1758  0004CA   0E00(2)  	RET
  1759  0004CB             
  1760  0004CB             W_S_T_Exit:
  1761  0004CB   6286(1)  	B0BCLR	FC
  1762  0004CC   0E00(2)  	RET
  1763  0004CD             ///
  1764  0004CD             
  1765  0004CD             ;****************************************************************************
  1766  0004CD             ;程序功能:	等待学习按键按下，超时退出
  1767  0004CD             ;输入参数:	无
  1768  0004CD             ;输出参数:	无
  1769  0004CD             ;堆栈层数:	3层
  1770  0004CD             ;内存占用:	无
  1771  0004CD             ;****************************************************************************
  1772  0004CD             //
  1773  0004CD             Wait_Learn_Key:
  1774  0004CD   2D64(1)  	MOV	A,#100
  1775  0004CE   2F45(1)  	B0MOV	Time,A
  1776  0004CF             W_L_K_Loop:
  1777  0004CF   CED1(2)  	CALL	Light_On
  1778  0004D0   CEB0(2)  	CALL	Delay_100ms
  1779  0004D1   C088(2)  	CALL	Scan_Key
  1780  0004D2   7700(1+S)  	B0BTS0	RFlag.7
  1781  0004D3   84DD(2)  	JMP	W_L_K_Press
  1782  0004D4             LEARN_KEY_FREE_ADDR:
  1783  0004D4   CED1(2)  	CALL	Light_On
  1784  0004D5   CEB0(2)  	CALL	Delay_100ms
  1785  0004D6   C088(2)  	CALL	Scan_Key
  1786  0004D7   7700(1+S)  	B0BTS0	RFlag.7
  1787  0004D8   84DD(2)  	JMP	W_L_K_Press
  1788  0004D9   2645(1+S)  	DECMS	Time
  1789  0004DA   84CF(2)  	JMP	W_L_K_Loop
  1790  0004DB             W_L_K_Exit:
  1791  0004DB   6286(1)  	B0BCLR	FC
  1792  0004DC   0E00(2)  	RET
  1793  0004DD             
  1794  0004DD             W_L_K_Press:
  1795  0004DD   2E01(1)  	B0MOV	A,KeyNum1
  1796  0004DE             SET_KEY_ADDR4:
  1797  0004DE   060B(1+S)  	CMPRS	A,#Learn_Set
  1798  0004DF   84E1(2)  	JMP	$+2
  1799  0004E0   84DB(2)  	JMP	W_L_K_Exit
  1800  0004E1   CF95(2)  	CALL	Check_Learn_Key
  1801  0004E2   7A86(1+S)  	B0BTS1	FC
  1802  0004E3   84CF(2)  	JMP	W_L_K_Loop
  1803  0004E4   6A86(1)  	B0BSET	FC
  1804  0004E5   0E00(2)  	RET
  1805  0004E6             ///
  1806  0004E6             
  1807  0004E6             ;****************************************************************************
  1808  0004E6             ;程序功能:	等待红外波形进入
  1809  0004E6             ;输入参数:	无
  1810  0004E6             ;输出参数:	无
  1811  0004E6             ;堆栈层数:	3层
  1812  0004E6             ;内存占用:	无
  1813  0004E6             ;****************************************************************************
  1814  0004E6             //
  1815  0004E6             Wait_IR_Wave:
  1816  0004E6   CE3D(2)  	CALL	Clr_Bank12
  1817  0004E7   CE50(2)  	CALL	Clr_LvlData
  1818  0004E8   2D30(1)  	MOV	A,#48
  1819  0004E9   2F45(1)  	B0MOV	Time,A
  1820  0004EA   65C2(1)  	B0BCLR	P2Mode.5			; 设置IR管脚为输入模式
  1821  0004EB   64C2(1)  	B0BCLR	P2Mode.4			; 设置P24管脚为输入模式
  1822  0004EC   6396(1)  	B0BCLR	OPTION.3			; 设置T1捕获源IRINTS
  1823  0004ED   2D9C(1)  	MOV	A,#OPEN+SYNDS+IRIDS+OV96us+OPA1
  1824  0004EE   2FA5(1)  	B0MOV	OPA,A				; 配置为开启放大 P12不输出IR波形 溢出时间96us 放大倍数 1
  1825  0004EF   2D48(1)  	MOV	A,#T0DS+Div016+FUMOD+PWMDS
  1826  0004F0   2FD8(1)  	B0MOV	T0M,A				; 关闭定时器0 并配置
  1827  0004F1   2D01(1)  	MOV	A,#T1DS+Div001+FHSRC+GNDS+ITLEN
  1828  0004F2   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置
  1829  0004F3   62C8(1)  	B0BCLR	INTRQ.2				; 清除T0定时器标志位
  1830  0004F4   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  1831  0004F5   CECF(2)  	CALL	Delay_30us			; 开启同步使能需滞后于OPAE一段时间
  1832  0004F6   2D00(1)  	MOV	A,#0
  1833  0004F7   2FDB(1)  	B0MOV	T1L,A
  1834  0004F8   2FDC(1)  	B0MOV	T1H,A
  1835  0004F9   2F90(1)  	B0MOV	TILTRL,A
  1836  0004FA   2F91(1)  	B0MOV	TILTRH,A
  1837  0004FB   2F92(1)  	B0MOV	TILTFL,A
  1838  0004FC   2F93(1)  	B0MOV	TILTFH,A
  1839  0004FD   6EA5(1)  	B0BSET	OPA.6				; 开启同步使能
  1840  0004FE             SET_OUTPUT_ADDR1:
  1841  0004FE   0000(1)  	NOP
  1842  0004FF             SET_OUTPUT_ADDR2:	
  1843  0004FF   0000(1)  	NOP
  1844  000500             SET_OUTPUT_ADDR3:	
  1845  000500   0000(1)  	NOP
  1846  000501             SET_OUTPUT_ADDR4:	
  1847  000501   0000(1)  	NOP
  1848  000502             W_I_W_Go:
  1849  000502   67D8(1)  	B0BCLR	T0M.7				; 关闭定时器0
  1850  000503   2D63(1)  	MOV	A,#063H
  1851  000504   2FD9(1)  	B0MOV	T0L,A
  1852  000505   2D1F(1)  	MOV	A,#01FH
  1853  000506   2F94(1)  	B0MOV	T0H,A				; 定时器赋值
  1854  000507   62C8(1)  	B0BCLR	INTRQ.2				; 清除定时器0标志位
  1855  000508   6FD8(1)  	B0BSET	T0M.7				; 开启定时器0
  1856  000509             W_I_W_Loop:
  1857  000509   7DD2(1+S)  	B0BTS1	P2Data.5
  1858  00050A   8521(2)  	JMP	IR_Wave_Come			; 检测红外波形进入
  1859  00050B             SET_INPUT_ADDR:
  1860  00050B   7BD2(1+S)  	B0BTS1	P2Data.3
  1861  00050C   851A(2)  	JMP	W_I_W_Exit			; 判断设置键按下退出学习模式
  1862  00050D   7AC8(1+S)  	B0BTS1	INTRQ.2
  1863  00050E   8509(2)  	JMP	W_I_W_Loop			; 检测T0定时器是否溢出
  1864  00050F   7045(1+S)  	B0BTS0	Time.0				; 翻转LED状态
  1865  000510   8512(2)  	JMP	$+2
  1866  000511   8514(2)  	JMP	$+3
  1867  000512   CED1(2)  	CALL	Light_On
  1868  000513   8515(2)  	JMP	$+2
  1869  000514             LEARN_WAIT_IR_ADDR:
  1870  000514   CED4(2)  	CALL	Light_Off
  1871  000515   CECF(2)  	CALL	Delay_30us			; 在改变IO状态后延时30us，防止其影响IR管脚
  1872  000516   2D5A(1)  	MOV	A,#05AH
  1873  000517   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
  1874  000518   2645(1+S)  	DECMS	Time
  1875  000519   8502(2)  	JMP	W_I_W_Go			; 判断是否超时
  1876  00051A             W_I_W_Exit:
  1877  00051A   CEBC(2)          CALL    Delay_10ms
  1878  00051B   C088(2)          CALL    Scan_Key
  1879  00051C   2E01(1)          B0MOV   A,KeyNum1
  1880  00051D             SET_KEY_ADDR5:
  1881  00051D   060B(1+S)          CMPRS   A,#Learn_Set
  1882  00051E   84E6(2)          JMP     Wait_IR_Wave                    ; 如果不是设置键按下则继续等待波形
  1883  00051F   6286(1)  	B0BCLR	FC
  1884  000520   0E00(2)  	RET
  1885  000521             
  1886  000521             IR_Wave_Come:
  1887  000521   6A86(1)  	B0BSET	FC
  1888  000522   0E00(2)  	RET
  1889  000523             ///
  1890  000523             
  1891  000523             ;****************************************************************************
  1892  000523             ;程序功能:	捕捉红外波形数据
  1893  000523             ;输入参数:	无
  1894  000523             ;输出参数:	无
  1895  000523             ;堆栈层数:	3层
  1896  000523             ;内存占用:	无
  1897  000523             ;算法实现:	通过配置T1定时器为高频振荡源、1:1分频（即采样周期为0.125us）
  1898  000523             ;		捕获两次载波的周期，取其均值则为载波周期，再设置T1定时器为CPU
  1899  000523             ;		振荡源 1:16分频（即采样周期为4us）每两个字节记录一个电平长度
  1900  000523             ;		最大值为262.144ms 超时退出
  1901  000523             ;****************************************************************************
  1902  E 00000014         CompressError	EQU	80/4 ;80us
  1903  000523             Compress_IR_Data:
  1904  000523   2D00(1)  	MOV	A,#0
  1905  000524   2F82(1)  	B0MOV	R,A
  1906  000525   3300(1)  	B0MOV	Z,#LvlAddr$L
  1907  000526   3401(1)  	B0MOV	Y,#LvlAddr$M
  1908  000527             C_I_D_Loop:
  1909  000527   2E82(1)  	B0MOV	A,R
  1910  000528   0760(1+S)  	CMPRS	A,BitNum
  1911  000529   8531(2)  	JMP	C_I_D_Next
  1912  00052A   2E39(1)  	B0MOV	A,Temp+0
  1913  00052B   2FE7(1)  	B0MOV	@YZ,A
  1914  00052C   1683(1+S)  	INCMS	Z
  1915  00052D   2E3A(1)  	B0MOV	A,Temp+1
  1916  00052E   2FE7(1)  	B0MOV	@YZ,A
  1917  00052F   1660(1+S)  	INCMS	BitNum
  1918  000530   8548(2)  	JMP	C_I_D_Save
  1919  000531             
  1920  000531             C_I_D_Next:
  1921  000531   2EE7(1)  	B0MOV	A,@YZ
  1922  000532   2239(1)  	SUB	A,Temp+0
  1923  000533   2F3B(1)  	B0MOV	Temp+2,A
  1924  000534   1683(1+S)  	INCMS	Z
  1925  000535   2EE7(1)  	B0MOV	A,@YZ
  1926  000536   203A(1)  	SBC	A,Temp+1
  1927  000537   2F3C(1)  	B0MOV	Temp+3,A
  1928  000538   1683(1+S)  	INCMS	Z
  1929  000539   7286(1+S)  	B0BTS0	FC
  1930  00053A   8541(2)  	JMP	C_I_D_Error
  1931  00053B   2D00(1)  	MOV	A,#0
  1932  00053C   223B(1)  	SUB	A,Temp+2
  1933  00053D   2F3B(1)  	B0MOV	Temp+2,A
  1934  00053E   2D00(1)  	MOV	A,#0
  1935  00053F   203C(1)  	SBC	A,Temp+3
  1936  000540   2F3C(1)  	B0MOV	Temp+3,A			; 对上一步产生的负值进行处理
  1937  000541             C_I_D_Error:
  1938  000541   2E3C(1)  	B0MOV	A,Temp+3
  1939  000542   7886(1+S)  	B0BTS1	FZ
  1940  000543   854E(2)  	JMP	C_I_D_Continue			; 直接判断差值高位非0比较失败
  1941  000544   2D14(1)  	MOV	A,#CompressError
  1942  000545   223B(1)  	SUB	A,Temp+2
  1943  000546   7A86(1+S)  	B0BTS1	FC
  1944  000547   854E(2)  	JMP	C_I_D_Continue
  1945  000548             C_I_D_Save:
  1946  000548   CE99(2)  	CALL	Set_CapAddr
  1947  000549   2E82(1)  	B0MOV	A,R
  1948  00054A   2FE7(1)  	B0MOV	@YZ,A
  1949  00054B   CE71(2)  	CALL	INC_CapAddr
  1950  00054C   6A86(1)  	B0BSET	FC
  1951  00054D   0E00(2)  	RET
  1952  00054E             
  1953  00054E             C_I_D_Continue:
  1954  00054E   1682(1+S)  	INCMS	R
  1955  00054F   2D12(1)  	MOV	A,#18
  1956  000550   2282(1)  	SUB	A,R
  1957  000551   7286(1+S)  	B0BTS0	FC
  1958  000552   8527(2)  	JMP	C_I_D_Loop
  1959  000553   6286(1)  	B0BCLR	FC
  1960  000554   0E00(2)  	RET
  1961  000555             
  1962  000555             //
  1963  000555             Capture_IR_Wave:
  1964  000555   CED4(2)  	CALL	Light_Off
  1965  000556   2D00(1)  	MOV	A,#0
  1966  000557   2FDB(1)  	B0MOV	T1L,A
  1967  000558   2FDC(1)  	B0MOV	T1H,A
  1968  000559   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  1969  00055A   73C8(1+S)  	B0BTS0	INTRQ.3
  1970  00055B   85CD(2)  	JMP	Capture_IR_Failed
  1971  00055C   7DD2(1+S)  	B0BTS1	P2Data.5
  1972  00055D   855A(2)  	JMP	$-3
  1973  00055E   73C8(1+S)  	B0BTS0	INTRQ.3
  1974  00055F   85CD(2)  	JMP	Capture_IR_Failed
  1975  000560   75D2(1+S)  	B0BTS0	P2Data.5
  1976  000561   855E(2)  	JMP	$-3				; 一般而言，第一次载波抓取误差较大，故弃之
  1977  000562   1E93(1)  	MOV	A,TILTFH
  1978  000563   2F3A(1)  	B0MOV	Temp+1,A
  1979  000564   1E92(1)  	MOV	A,TILTFL
  1980  000565   2F39(1)  	B0MOV	Temp+0,A
  1981  000566             
  1982  000566   73C8(1+S)  	B0BTS0	INTRQ.3
  1983  000567   85CD(2)  	JMP	Capture_IR_Failed
  1984  000568   7DD2(1+S)  	B0BTS1	P2Data.5
  1985  000569   8566(2)  	JMP	$-3
  1986  00056A   73C8(1+S)  	B0BTS0	INTRQ.3
  1987  00056B   85CD(2)  	JMP	Capture_IR_Failed
  1988  00056C   75D2(1+S)  	B0BTS0	P2Data.5
  1989  00056D   856A(2)  	JMP	$-3				; 跳过第二次载波
  1990  00056E   73C8(1+S)  	B0BTS0	INTRQ.3
  1991  00056F   85CD(2)  	JMP	Capture_IR_Failed
  1992  000570   7DD2(1+S)  	B0BTS1	P2Data.5
  1993  000571   856E(2)  	JMP	$-3
  1994  000572   73C8(1+S)  	B0BTS0	INTRQ.3
  1995  000573   85CD(2)  	JMP	Capture_IR_Failed
  1996  000574   75D2(1+S)  	B0BTS0	P2Data.5
  1997  000575   8572(2)  	JMP	$-3				; 跳过第三次载波
  1998  000576   1E93(1)  	MOV	A,TILTFH
  1999  000577   2F3C(1)  	B0MOV	Temp+3,A
  2000  000578   1E92(1)  	MOV	A,TILTFL
  2001  000579   2F3B(1)  	B0MOV	Temp+2,A
  2002  00057A             
  2003  00057A   2E3B(1)  	B0MOV	A,Temp+2
  2004  00057B   2239(1)  	SUB	A,Temp+0
  2005  00057C   2F63(1)  	B0MOV	CrrBuff+0,A
  2006  00057D   2E3C(1)  	B0MOV	A,Temp+3
  2007  00057E   203A(1)  	SBC	A,Temp+1
  2008  00057F   2F64(1)  	B0MOV	CrrBuff+1,A			; 获取第二次载波和第三次载波周期的总时间，将其平均即可得出载波数值
  2009  000580             
  2010  000580   3401(1)  	B0MOV	Y,#LrnAddr$M
  2011  000581   3326(1)  	B0MOV	Z,#LrnAddr$L			; 初始化RAM指针
  2012  000582   CE80(2)  	CALL	BackUp_CapAddr
  2013  000583   2D6D(1)  	MOV	A,#(256-2*MaxLvlNum)/2
  2014  000584   2F68(1)  	B0MOV	LevelNum,A			; 由于bank0页与bank1 2页物理地址不连续，故只选择bank1 2保存学习信息 最大长度为384/2
  2015  000585   2D49(1)  	MOV	A,#T1DS+Div016+FUSRC+GNDS+ITLEN
  2016  000586   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置之
  2017  000587   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  2018  000588             
  2019  000588   2D02(1)  	MOV	A,#2
  2020  000589   2F7E(1)  	B0MOV	Number,A			; 抓取IR帧数，以低电平时间超过FFFH*4us作为帧结束判断依据
  2021  00058A   2D11(1)  	MOV	A,#17
  2022  00058B   2FDB(1)  	B0MOV	T1L,A
  2023  00058C   2D00(1)  	MOV	A,#0
  2024  00058D   2FDC(1)  	B0MOV	T1H,A				; 给第一个包络电平计数赋初值, 可通过设置此值来进行误差预消除
  2025  00058E   2F60(1)  	B0MOV	BitNum,A
  2026  00058F   2D5A(1)  	MOV	A,#05AH
  2027  000590   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
  2028  000591   6FDA(1)  	B0BSET	T1M.7				; 开启定时器1
  2029  000592             Capture_IR_Loop:
  2030  000592   73C8(1+S)  	B0BTS0	INTRQ.3
  2031  000593   85C3(2)  	JMP	Capture_IR_Finished
  2032  000594   7CD2(1+S)  	B0BTS1	P2Data.4
  2033  000595   8592(2)  	JMP	$-3
  2034  000596   67DA(1)  	B0BCLR	T1M.7				; 关闭定时器1
  2035  000597   1E91(1)  	MOV	A,TILTRH
  2036  000598   2F3A(1)  	B0MOV	Temp+1,A
  2037  000599   1E90(1)  	MOV	A,TILTRL
  2038  00059A   2F39(1)  	B0MOV	Temp+0,A			; 捕捉第一个包络电平
  2039  00059B   2D00(1)  	MOV	A,#0
  2040  00059C   2FDB(1)  	B0MOV	T1L,A
  2041  00059D   2FDC(1)  	B0MOV	T1H,A				; 给空闲信号电平计数赋初值
  2042  00059E   6FDA(1)  	B0BSET	T1M.7				; 开启定时器1
  2043  00059F   C523(2)  	CALL	Compress_IR_Data		; 监听低电平期间压缩高电平数据
  2044  0005A0   7A86(1+S)  	B0BTS1	FC
  2045  0005A1   85CD(2)  	JMP	Capture_IR_Failed
  2046  0005A2   73C8(1+S)  	B0BTS0	INTRQ.3
  2047  0005A3   85C0(2)  	JMP	Capture_IR_Finished1		; 定时器1溢出，结束捕捉
  2048  0005A4   74D2(1+S)  	B0BTS0	P2Data.4
  2049  0005A5   85A2(2)  	JMP	$-3
  2050  0005A6   67DA(1)  	B0BCLR	T1M.7				; 关闭定时器1
  2051  0005A7   1E93(1)  	MOV	A,TILTFH
  2052  0005A8   2F3D(1)  	B0MOV	Temp+4,A
  2053  0005A9   1A80(1)  	OR	A,#80H
  2054  0005AA   2F3A(1)  	B0MOV	Temp+1,A			; 设置低电平标志
  2055  0005AB   1E92(1)  	MOV	A,TILTFL
  2056  0005AC   2F39(1)  	B0MOV	Temp+0,A
  2057  0005AD   2E3D(1)  	B0MOV	A,Temp+4
  2058  0005AE   2AF0(1)  	AND	A,#0xF0
  2059  0005AF   7086(1+S)  	B0BTS0	FZ
  2060  0005B0   85B7(2)  	JMP	Is_Normal_Level			; 判断低电平时间是否超过FFFH*4us=16.38ms
  2061  0005B1   267E(1+S)  	DECMS	Number
  2062  0005B2   85B7(2)  	JMP	Capture_IR_Next
  2063  0005B3   C523(2)  	CALL	Compress_IR_Data
  2064  0005B4   7A86(1+S)  	B0BTS1	FC
  2065  0005B5   85CD(2)  	JMP	Capture_IR_Failed
  2066  0005B6   85C3(2)  	JMP	Capture_IR_Finished		; 捕捉到两帧IR数据结束捕捉
  2067  0005B7             Capture_IR_Next:
  2068  0005B7             Is_Normal_Level:
  2069  0005B7   2D00(1)  	MOV	A,#0
  2070  0005B8   2FDB(1)  	B0MOV	T1L,A
  2071  0005B9   2FDC(1)  	B0MOV	T1H,A				; 给包络信号电平计数赋初值
  2072  0005BA   6FDA(1)  	B0BSET	T1M.7				; 开启定时器1
  2073  0005BB   C523(2)  	CALL	Compress_IR_Data
  2074  0005BC   7A86(1+S)  	B0BTS1	FC
  2075  0005BD   85CD(2)  	JMP	Capture_IR_Failed
  2076  0005BE   2668(1+S)  	DECMS	LevelNum
  2077  0005BF   8592(2)  	JMP	Capture_IR_Loop
  2078  0005C0             Capture_IR_Finished1:
  2079  0005C0   CE99(2)  	CALL	Set_CapAddr
  2080  0005C1   2D12(1)  	MOV	A,#18
  2081  0005C2   2FE7(1)  	B0MOV	@YZ,A
  2082  0005C3             Capture_IR_Finished:
  2083  0005C3   6286(1)  	B0BCLR	FC
  2084  0005C4   0964(1)  	RRCM	CrrBuff+1
  2085  0005C5   0963(1)  	RRCM	CrrBuff+0			; 计算均值
  2086  0005C6   2D02(1)  	MOV	A,#2
  2087  0005C7   1363(1)  	ADD	CrrBuff+0,A
  2088  0005C8   2D00(1)  	MOV	A,#0
  2089  0005C9   1164(1)  	ADC	CrrBuff+1,A			; 载波值修正（基于经验）
  2090  0005CA   66A5(1)  	B0BCLR	OPA.6				; 关闭同步使能
  2091  0005CB             
  2092  0005CB             ;	CALL	Send_LrnRam;DDDBUG
  2093  0005CB   6A86(1)  	B0BSET	FC
  2094  0005CC   0E00(2)  	RET
  2095  0005CD             
  2096  0005CD             Capture_IR_Failed:
  2097  0005CD   66A5(1)  	B0BCLR	OPA.6				; 关闭同步使能
  2098  0005CE   6286(1)  	B0BCLR	FC
  2099  0005CF   0E00(2)  	RET
  2100  0005D0             ///
  2101  0005D0             
  2102  0005D0             ;****************************************************************************
  2103  0005D0             ;程序功能:	消除波形误差
  2104  0005D0             ;输入参数:	无
  2105  0005D0             ;输出参数:	无
  2106  0005D0             ;堆栈层数:	3层
  2107  0005D0             ;内存占用:	无
  2108  0005D0             ;算法实现:	分析抓取出来的数据可知，误差由固定误差和cpu主频偏差组成，故而
  2109  0005D0             ;		先将固定误差减去再将由cpu主频偏差造成的误差等比消除
  2110  0005D0             ;****************************************************************************
  2111  E 00000003         H_Err	EQU	12/4
  2112  E 0000000A         L_Err	EQU	40/4
  2113  0005D0             //
  2114  0005D0             Clear_Error:
  2115  0005D0   3401(1)  	B0MOV	Y,#LvlAddr$M
  2116  0005D1   3300(1)  	B0MOV	Z,#LvlAddr$L			; 初始化RAM指针 指向
  2117  0005D2   2D13(1)  	MOV	A,#19
  2118  0005D3   2F68(1)  	B0MOV	LevelNum,A
  2119  0005D4   2D00(1)  	MOV	A,#0
  2120  0005D5   2F06(1)  	B0MOV	Zero,A
  2121  0005D6             C_E_Loop:
  2122  0005D6   CE85(2)  	CALL	BackUp_BakAddr			; 保存RAM指针
  2123  0005D7   1EE7(1)  	MOV	A,@YZ
  2124  0005D8   2F39(1)  	B0MOV	Temp+0,A
  2125  0005D9   CE5B(2)  	CALL	INC_YZ
  2126  0005DA   1EE7(1)  	MOV	A,@YZ
  2127  0005DB   2F3A(1)  	B0MOV	Temp+1,A			; 取出原始数值
  2128  0005DC   1839(1)  	OR	A,Temp+0
  2129  0005DD   7086(1+S)  	B0BTS0	FZ
  2130  0005DE   85F7(2)  	JMP	C_E_Finish			; 原数据为空结束误差处理
  2131  0005DF   773A(1+S)  	B0BTS0	Temp+1.7
  2132  0005E0   85E8(2)  	JMP	L_Err_Process
  2133  0005E1             H_Err_Process:
  2134  0005E1   2E39(1)  	B0MOV	A,Temp+0
  2135  0005E2   1403(1)  	ADD	A,#H_Err
  2136  0005E3   2F39(1)  	B0MOV	Temp+0,A
  2137  0005E4   2D00(1)  	MOV	A,#0
  2138  0005E5   103A(1)  	ADC	A,Temp+1
  2139  0005E6   2F3A(1)  	B0MOV	Temp+1,A
  2140  0005E7   85EE(2)  	JMP	C_E_Com				;
  2141  0005E8             
  2142  0005E8             L_Err_Process:
  2143  0005E8   2E39(1)  	B0MOV	A,Temp+0
  2144  0005E9   140A(1)  	ADD	A,#L_Err
  2145  0005EA   2F39(1)  	B0MOV	Temp+0,A
  2146  0005EB   2D00(1)  	MOV	A,#0
  2147  0005EC   103A(1)  	ADC	A,Temp+1
  2148  0005ED   2F3A(1)  	B0MOV	Temp+1,A	 		; 对于低电平由于误差总是负的，故而使用加法
  2149  0005EE             C_E_Com:
  2150  0005EE   CE9E(2)  	CALL	Set_BakAddr			; 恢复RAM指针
  2151  0005EF   2E39(1)  	B0MOV	A,Temp+0
  2152  0005F0   2FE7(1)  	B0MOV	@YZ,A
  2153  0005F1   CE5B(2)  	CALL	INC_YZ
  2154  0005F2   2E3A(1)  	B0MOV	A,Temp+1
  2155  0005F3   2FE7(1)  	B0MOV	@YZ,A				; 将处理后的数据回填到原来的位置
  2156  0005F4   CE5B(2)  	CALL	INC_YZ
  2157  0005F5   2668(1+S)  	DECMS	LevelNum			; 达到学习数据的长度结束误差处理
  2158  0005F6   85D6(2)  	JMP	C_E_Loop
  2159  0005F7             C_E_Finish:
  2160  0005F7   0E00(2)  	RET
  2161  0005F8             ///
  2162  0005F8             
  2163  0005F8             
  2164  0005F8             ;****************************************************************************
  2165  0005F8             ;程序功能:	红外数据解码
  2166  0005F8             ;输入参数:	无
  2167  0005F8             ;输出参数:	无
  2168  0005F8             ;堆栈层数:	3层
  2169  0005F8             ;内存占用:	无
  2170  0005F8             ;****************************************************************************
  2171  0005F8             //
  2172  0005F8             Decode_IR_Data:
  2173  0005F8   C5D0(2)  	CALL	Clear_Error			; 消除捕捉时产生的误差
  2174  0005F9   2D00(1)  	MOV	A,#0
  2175  0005FA   2F09(1)  	B0MOV	Format,A
  2176  0005FB   6400(1)  	B0BCLR	RFlag.4
  2177  0005FC             Find_Lib_Loop:
  2178  0005FC   CE45(2)  	CALL	Clr_RltData
  2179  0005FD   2DD9(1)  	MOV	A,#Format_List$L
  2180  0005FE   1209(1)  	ADD	A,Format
  2181  0005FF   2F83(1)  	B0MOV	Z,A
  2182  000600   2D00(1)  	MOV	A,#Format_List$M
  2183  000601   1006(1)  	ADC	A,Zero
  2184  000602   2F84(1)  	B0MOV	Y,A				; YZ寄存器作为ROM指针指向格式列表中对应格式的地址
  2185  000603   0D00(2)  	MOVC
  2186  000604   2F4C(1)  	B0MOV	FmtAddr+0,A
  2187  000605   2E82(1)  	B0MOV	A,R
  2188  000606   2F4D(1)  	B0MOV	FmtAddr+1,A			; 保存每个格式库的首地址
  2189  000607             
  2190  000607             ;	CALL	Send_FmtAddr;DDDBUG
  2191  000607             
  2192  000607   2E4C(1)  	B0MOV	A,FmtAddr+0
  2193  000608   2F83(1)  	B0MOV	Z,A
  2194  000609   2E4D(1)  	B0MOV	A,FmtAddr+1
  2195  00060A   2F84(1)  	B0MOV	Y,A				; YZ寄存器指向对应格式的格式库
  2196  00060B   0D00(2)  	MOVC
  2197  00060C   2F48(1)  	B0MOV	DecPara+0,A
  2198  00060D   2AF0(1)  	AND	A,#0XF0
  2199  00060E   2F6B(1)  	B0MOV	MaskCode,A
  2200  00060F   276B(1)  	SWAPM	MaskCode			; 获取取值掩码
  2201  000610   2E6B(1)  	B0MOV	A,MaskCode
  2202  000611   1401(1)  	ADD	A,#1
  2203  000612   2F62(1)  	B0MOV	BitNum+2,A			; 根据掩码计算出逻辑位数
  2204  000613   6286(1)  	B0BCLR	FC
  2205  000614   0862(1)  	RRC	BitNum+2
  2206  000615   2F7A(1)  	B0MOV	BitWidth,A
  2207  000616   0608(1+S)  	CMPRS	A,#8
  2208  000617   861A(2)  	JMP	$+3
  2209  000618   2D04(1)  	MOV	A,#4
  2210  000619   2F7A(1)  	B0MOV	BitWidth,A			; 根据逻辑位数计算出存储位宽
  2211  00061A   2E82(1)  	B0MOV	A,R
  2212  00061B   2F49(1)  	B0MOV	DecPara+1,A
  2213  00061C   2A0F(1)  	AND	A,#0X0F
  2214  00061D   2F6D(1)  	B0MOV	LogicNum,A			; 获取逻辑位所定义的电平数
  2215  00061E   CE5B(2)  	CALL	INC_YZ
  2216  00061F   0D00(2)  	MOVC
  2217  000620   2F4A(1)  	B0MOV	DecPara+2,A
  2218  000621   2E82(1)  	B0MOV	A,R
  2219  000622   2A0F(1)  	AND	A,#0FH
  2220  000623   2F69(1)  	B0MOV	CrrPoint,A			; 加载解码参数
  2221  000624   C73B(2)  	CALL	Find_Ctrl_Addr			; 获取控制数据地址
  2222  000625   C746(2)  	CALL	Check_Carrier
  2223  000626   7A86(1+S)  	B0BTS1	FC
  2224  000627   86B5(2)  	JMP	Find_Lib_Next			; 检验载波是否在范围内
  2225  000628   2D26(1)  	MOV	A,#LrnAddr$L
  2226  000629   2F4E(1)  	B0MOV	CapAddr+0,A
  2227  00062A   2D01(1)  	MOV	A,#LrnAddr$M
  2228  00062B   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化RAM数据地址
  2229  00062C   7F49(1+S)  	B0BTS1	DecPara+1.7
  2230  00062D   8640(2)  	JMP	PWM_Data_Decode
  2231  00062E             PPM_Data_Decode:
  2232  00062E   2E4A(1)  	B0MOV	A,DecPara+2
  2233  00062F   2F67(1)  	B0MOV	Tolerance,A
  2234  000630   C75F(2)  	CALL	Check_PPM
  2235  000631   7A86(1+S)  	B0BTS1	FC
  2236  000632   86B5(2)  	JMP	Find_Lib_Next			; 检测是否为此种PPM格式，否则跳入下一个格式
  2237  000633   2D26(1)  	MOV	A,#LrnAddr$L
  2238  000634   2F4E(1)  	B0MOV	CapAddr+0,A
  2239  000635   2D01(1)  	MOV	A,#LrnAddr$M
  2240  000636   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化RAM数据地址
  2241  000637   7400(1+S)  	B0BTS0	RFlag.4
  2242  000638   8640(2)  	JMP	PWM_Data_Decode			; 判断数据是否已经拆分过
  2243  000639   C7E0(2)  	CALL	Split_PPM
  2244  00063A   7A86(1+S)  	B0BTS1	FC
  2245  00063B   86B5(2)  	JMP	Find_Lib_Next			; 数据拆分失败，跳入下一个格式解码
  2246  00063C   2D26(1)  	MOV	A,#LrnAddr$L
  2247  00063D   2F4E(1)  	B0MOV	CapAddr+0,A
  2248  00063E   2D01(1)  	MOV	A,#LrnAddr$M
  2249  00063F   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化RAM数据地址
  2250  000640             PWM_Data_Decode:
  2251  000640   2E4A(1)  	B0MOV	A,DecPara+2
  2252  000641   2F67(1)  	B0MOV	Tolerance,A			; 重新加载容差
  2253  000642   CE8F(2)  	CALL	Set_CtrlAddr
  2254  000643   0D00(2)  	MOVC
  2255  000644   2F6F(1)  	B0MOV	CtrlData,A
  2256  000645   2A0F(1)  	AND	A,#0FH
  2257  000646   2F70(1)  	B0MOV	DatPoint,A
  2258  000647   276F(1)  	SWAPM	CtrlData			; 获取电平指针初值
  2259  000648             
  2260  000648             ;	CALL	Send_CtrlAddr;DDDBUG
  2261  000648             ;	CALL	Send_CtrlData;DDDBUG
  2262  000648             
  2263  000648   2E82(1)  	B0MOV	A,R
  2264  000649   2A0F(1)  	AND	A,#00FH
  2265  00064A   2F60(1)  	B0MOV	BitNum+0,A
  2266  00064B   2F61(1)  	B0MOV	BitNum+1,A			; 获取解码位数
  2267  00064C   2F3A(1)  	B0MOV	Temp+1,A
  2268  00064D   2D00(1)  	MOV	A,#0
  2269  00064E   2F6C(1)  	B0MOV	MaskCode+1,A
  2270  00064F   6A86(1)  	B0BSET	FC
  2271  000650   0B6C(1)  	RLCM	MaskCode+1
  2272  000651   263A(1+S)  	DECMS	Temp+1
  2273  000652   864F(2)  	JMP	$-3				; 计算结果掩码
  2274  000653   1782(1)  	SWAP	R
  2275  000654   2A0F(1)  	AND	A,#0FH
  2276  000655             	@JMP_A	16
  2277  000655   03CE(1)  	b0add PCl ,a
  2278  000656   8668(2)  	JMP	Decode_Zero_Data		;0
  2279  000657   8675(2)  	JMP	Decode_One_Data	        	;1
  2280  000658   8679(2)  	JMP	Decode_User_Data        	;2
  2281  000659   8680(2)  	JMP	Decode_NUser_Data		;3
  2282  00065A   868A(2)  	JMP	Decode_Key_Data         	;4
  2283  00065B   8691(2)  	JMP	Decode_NKey_Data        	;5
  2284  00065C   869B(2)  	JMP	Decode_Toggle_Data      	;6
  2285  00065D   869E(2)  	JMP	Decode_Tail_Data        	;7
  2286  00065E   8666(2)  	JMP	Decode_Sepr_Time        	;8
  2287  00065F   86B1(2)  	JMP	Decode_Stop_Time1        	;9
  2288  000660   86B2(2)  	JMP	Decode_Stop_Time2        	;10
  2289  000661   86BA(2)  	JMP	Decode_Run_Error        	;11
  2290  000662   86BA(2)  	JMP	Decode_Run_Error        	;12
  2291  000663   86BA(2)  	JMP	Decode_Run_Error        	;13
  2292  000664   86BA(2)  	JMP	Decode_Run_Error        	;14
  2293  000665   86BA(2)  	JMP	Decode_Run_Error        	;15
  2294  000666             
  2295  000666             Decode_Sepr_Time:
  2296  000666   2DC8(1)  	MOV	A,#800/4
  2297  000667   2F67(1)  	B0MOV	Tolerance,A			; 对于分隔时间容差放大
  2298  000668             Decode_Zero_Data:
  2299  000668   C71D(2)  	CALL	Get_LibAddr			; 获取库地址
  2300  000669             D_Z_D_Loop:
  2301  000669   CE94(2)  	CALL	Set_LibAddr			; 设置库地址
  2302  00066A   C725(2)  	CALL	Get_LibData			; 获取库数据
  2303  00066B   CE6C(2)  	CALL	INC_LibAddr			; 指向下一个数据的库地址
  2304  00066C   CE99(2)  	CALL	Set_CapAddr			; 设置捕获数据的地址
  2305  00066D   C72C(2)  	CALL	Get_CapData			; 获取捕获数据
  2306  00066E   CE71(2)  	CALL	INC_CapAddr			; 指向下一捕获数据的地址
  2307  00066F   C704(2)  	CALL	Compare_Level_Data		; 库数据与捕获数据比较
  2308  000670   7A86(1+S)  	B0BTS1	FC
  2309  000671   86B5(2)  	JMP	Decode_Interrupt		; 误差超出范围此次解码中断
  2310  000672   7E6E(1+S)  	B0BTS1	LevelFlag.6
  2311  000673   8669(2)  	JMP	D_Z_D_Loop
  2312  000674   86B3(2)  	JMP	Decode_Data_Common		; 根据库中给出的逻辑电平停止标志位决定是否结束该段数据解码
  2313  000675             
  2314  000675             Decode_One_Data:
  2315  000675   C71D(2)  	CALL	Get_LibAddr			; 获取库地址
  2316  000676   CE6C(2)  	CALL	INC_LibAddr
  2317  000677   CE6C(2)  	CALL	INC_LibAddr			; 连续偏移两次，将指针指向库中位1数据
  2318  000678   8669(2)  	JMP	D_Z_D_Loop
  2319  000679             
  2320  000679             Decode_User_Data:
  2321  000679   C6BE(2)  	CALL	Decode_Data
  2322  00067A   7A86(1+S)  	B0BTS1	FC
  2323  00067B   86B5(2)  	JMP	Find_Lib_Next
  2324  00067C   C912(2)  	CALL	Get_UsrAddr
  2325  00067D   2E6A(1)  	B0MOV	A,Result
  2326  00067E   2FE7(1)  	B0MOV	@YZ,A
  2327  00067F   86B3(2)  	JMP	Decode_Data_Common
  2328  000680             
  2329  000680             Decode_NUser_Data:
  2330  000680   C6BE(2)  	CALL	Decode_Data
  2331  000681   7A86(1+S)  	B0BTS1	FC
  2332  000682   86B5(2)  	JMP	Find_Lib_Next
  2333  000683   C912(2)  	CALL	Get_UsrAddr
  2334  000684   2EE7(1)  	B0MOV	A,@YZ
  2335  000685   1DFF(1)  	XOR	A,#0FFH
  2336  000686   286C(1)  	AND	A,MaskCode+1
  2337  000687   076A(1+S)  	CMPRS	A,Result
  2338  000688   86B5(2)  	JMP	Find_Lib_Next
  2339  000689   86B3(2)  	JMP	Decode_Data_Common
  2340  00068A             
  2341  00068A             Decode_Key_Data:
  2342  00068A   C6BE(2)  	CALL	Decode_Data
  2343  00068B   7A86(1+S)  	B0BTS1	FC
  2344  00068C   86B5(2)  	JMP	Find_Lib_Next
  2345  00068D   C91A(2)  	CALL	Get_DatAddr
  2346  00068E   2E6A(1)  	B0MOV	A,Result
  2347  00068F   2FE7(1)  	B0MOV	@YZ,A
  2348  000690   86B3(2)  	JMP	Decode_Data_Common
  2349  000691             
  2350  000691             Decode_NKey_Data:
  2351  000691   C6BE(2)  	CALL	Decode_Data
  2352  000692   7A86(1+S)  	B0BTS1	FC
  2353  000693   86B5(2)  	JMP	Find_Lib_Next
  2354  000694   C91A(2)  	CALL	Get_DatAddr
  2355  000695   2EE7(1)  	B0MOV	A,@YZ
  2356  000696   286C(1)  	AND	A,MaskCode+1
  2357  000697   1B6C(1)  	XOR	A,MaskCode+1
  2358  000698   076A(1+S)  	CMPRS	A,Result
  2359  000699   86B5(2)  	JMP	Find_Lib_Next
  2360  00069A   86B3(2)  	JMP	Decode_Data_Common
  2361  00069B             
  2362  00069B             Decode_Toggle_Data:
  2363  00069B   CE71(2)  	CALL	INC_CapAddr
  2364  00069C   CE71(2)  	CALL	INC_CapAddr			; Toggle位无需解码，跳过之
  2365  00069D   86B3(2)  	JMP	Decode_Data_Common
  2366  00069E             
  2367  00069E             Decode_Tail_Data:
  2368  00069E   C71D(2)  	CALL	Get_LibAddr			; 获取库地址
  2369  00069F   CE94(2)  	CALL	Set_LibAddr			; 设置库地址
  2370  0006A0   C725(2)  	CALL	Get_LibData			; 获取库数据
  2371  0006A1   CE6C(2)  	CALL	INC_LibAddr			; 指向下一个数据的库地址
  2372  0006A2   CE99(2)  	CALL	Set_CapAddr			; 设置捕获数据的地址
  2373  0006A3   C72C(2)  	CALL	Get_CapData			; 获取捕获数据
  2374  0006A4   CE71(2)  	CALL	INC_CapAddr			; 指向下一捕获数据的地址
  2375  0006A5   C704(2)  	CALL	Compare_Level_Data		; 库数据与捕获数据比较
  2376  0006A6   7A86(1+S)  	B0BTS1	FC
  2377  0006A7   86B5(2)  	JMP	Decode_Interrupt		; 误差超出范围此次解码中断
  2378  0006A8   CE99(2)  	CALL	Set_CapAddr			; 设置捕获数据的地址
  2379  0006A9   C72C(2)  	CALL	Get_CapData			; 获取捕获数据
  2380  0006AA   CE71(2)  	CALL	INC_CapAddr			; 指向下一捕获数据的地址
  2381  0006AB   2E5B(1)  	B0MOV	A,CapData+1
  2382  0006AC   2A7F(1)  	AND	A,#7FH				; 去除低电平标志位
  2383  0006AD   185A(1)  	OR	A,CapData+0
  2384  0006AE   0600(1+S)  	CMPRS	A,#00H
  2385  0006AF   86B3(2)  	JMP	Decode_Data_Common		; 停止位捕获数据非空则继续解码
  2386  0006B0   86BC(2)  	JMP	Decode_Data_Success		; 停止位捕获数据为空则结束解码（说明捕获数据已经结束）
  2387  0006B1             
  2388  0006B1             Decode_Stop_Time1:
  2389  0006B1   86B3(2)  	JMP	Decode_Data_Common		; 此处只是将控制数据地址向后偏移一
  2390  0006B2             
  2391  0006B2             Decode_Stop_Time2:
  2392  0006B2   86BC(2)  	JMP	Decode_Data_Success
  2393  0006B3             
  2394  0006B3             
  2395  0006B3             Decode_Data_Common:
  2396  0006B3   CE67(2)  	CALL	INC_CtrlAddr			; 将控制数据地址加1，进行下一段数据的解码
  2397  0006B4   8640(2)  	JMP	PWM_Data_Decode
  2398  0006B5             
  2399  0006B5             
  2400  0006B5             Decode_Interrupt:
  2401  0006B5             Find_Lib_Next:
  2402  0006B5   1609(1+S)  	INCMS	Format
  2403  0006B6   0000(1)  	NOP
  2404  0006B7   2D2B(1)  	MOV	A,#Format_Num
  2405  0006B8   0709(1+S)  	CMPRS	A,Format
  2406  0006B9   85FC(2)  	JMP	Find_Lib_Loop
  2407  0006BA             Decode_Run_Error:
  2408  0006BA   6286(1)  	B0BCLR	FC
  2409  0006BB   0E00(2)  	RET
  2410  0006BC             
  2411  0006BC             Decode_Data_Success:
  2412  0006BC             ;	CALL	Send_LrnData;DDDBUG
  2413  0006BC   6A86(1)  	B0BSET	FC
  2414  0006BD   0E00(2)  	RET
  2415  0006BE             
  2416  0006BE             ///
  2417  0006BE             
  2418  0006BE             ;****************************************************************************
  2419  0006BE             ;程序功能:	解码数据 PWM
  2420  0006BE             ;输入参数:	波形缓冲、格式库
  2421  0006BE             ;输出参数:	C、Result
  2422  0006BE             ;堆栈层数:	1层
  2423  0006BE             ;内存占用:	无
  2424  0006BE             ;****************************************************************************
  2425  0006BE             //
  2426  0006BE             Decode_Data:
  2427  0006BE   2D00(1)  	MOV	A,#0
  2428  0006BF   2F6A(1)  	B0MOV	Result,A			; 清除结果寄存器
  2429  0006C0             Decode_Byte_Loop:
  2430  0006C0   CE99(2)  	CALL	Set_CapAddr			; 设置捕获数据的地址
  2431  0006C1   CE85(2)  	CALL	BackUp_BakAddr			; 将此位捕获数据首地址保存，以备位0比较失败时，重新比较位1
  2432  0006C2   2D00(1)  	MOV	A,#0
  2433  0006C3   2F65(1)  	B0MOV	BitPoint+0,A			; 初始化解码位指针
  2434  0006C4             Decode_Bit_Loop:
  2435  0006C4   2E65(1)  	B0MOV	A,BitPoint+0
  2436  0006C5   2F66(1)  	B0MOV	BitPoint+1,A			; 重载解码位指针缓冲
  2437  0006C6   716D(1+S)  	B0BTS0	LogicNum.1
  2438  0006C7   86CA(2)  	JMP	Two_Level
  2439  0006C8   6286(1)  	B0BCLR	FC				; 清除C位
  2440  0006C9   0B66(1)  	RLCM	BitPoint+1			; 左移(乘以2)
  2441  0006CA             Two_Level:
  2442  0006CA   6286(1)  	B0BCLR	FC				; 清除C位
  2443  0006CB   0B66(1)  	RLCM	BitPoint+1			; 左移(乘以2)
  2444  0006CC   C71D(2)  	CALL	Get_LibAddr			; 获取库地址(此时YZ地址指向逻辑电平首地址)
  2445  0006CD   CE94(2)  	CALL	Set_LibAddr
  2446  0006CE   2E83(1)  	B0MOV	A,Z
  2447  0006CF   1266(1)  	ADD	A,BitPoint+1
  2448  0006D0   2F83(1)  	B0MOV	Z,A
  2449  0006D1   2D00(1)  	MOV	A,#0
  2450  0006D2   1084(1)  	ADC	A,Y
  2451  0006D3   2F84(1)  	B0MOV	Y,A				; 此时YZ地址指向对应的逻辑位电平数据首地址
  2452  0006D4   CE8A(2)  	CALL	BackUp_LibAddr			; 存储库地址
  2453  0006D5             Compare_Logic_Bit:
  2454  0006D5   CE94(2)  	CALL	Set_LibAddr
  2455  0006D6   C725(2)  	CALL	Get_LibData			; 获取库数据
  2456  0006D7   CE99(2)  	CALL	Set_CapAddr			; 设置捕获数据的地址
  2457  0006D8   2EE7(1)  	B0MOV	A,@YZ
  2458  0006D9   0612(1+S)  	CMPRS	A,#18
  2459  0006DA   86DC(2)  	JMP	$+2
  2460  0006DB   86F7(2)  	JMP	Decode_Data_Fail		; 若为停止位标识直接解码失败
  2461  0006DC   C72C(2)  	CALL	Get_CapData			; 获取捕获数据
  2462  0006DD             
  2463  0006DD             ;	CALL	Send_LibAddr;DDDBUG
  2464  0006DD             ;	CALL	Send_CapAddr;DDDBUG
  2465  0006DD             ;	CALL	Send_LibData;DDDBUG
  2466  0006DD             ;	CALL	Send_CapData;DDDBUG
  2467  0006DD             	
  2468  0006DD   CE6C(2)  	CALL	INC_LibAddr			; 指向下一个数据的库地址
  2469  0006DE   CE71(2)  	CALL	INC_CapAddr			; 指向下一捕获数据的地址
  2470  0006DF             
  2471  0006DF   C704(2)  	CALL	Compare_Level_Data		; 库数据与捕获数据比较
  2472  0006E0   7A86(1+S)  	B0BTS1	FC
  2473  0006E1   86EE(2)  	JMP	Decode_Data_Go			; 比较失败，继续比较下一逻辑数据
  2474  0006E2   7E6E(1+S)  	B0BTS1	LevelFlag.6
  2475  0006E3   86D5(2)  	JMP	Compare_Logic_Bit		; 判断一位数据是否解码结束
  2476  0006E4   2E7A(1)  	B0MOV	A,BitWidth
  2477  0006E5   2F39(1)  	B0MOV	Temp+0,A
  2478  0006E6   0965(1)  	RRCM	BitPoint+0
  2479  0006E7   096A(1)  	RRCM	Result
  2480  0006E8   2660(1+S)  	DECMS	BitNum+0
  2481  0006E9   86EB(2)  	JMP	$+2
  2482  0006EA   86F9(2)  	JMP	Decode_Data_Finish
  2483  0006EB   2639(1+S)  	DECMS	Temp+0
  2484  0006EC   86E6(2)  	JMP	$-6				; 根据存储位宽去决定要存储几位
  2485  0006ED   86C0(2)  	JMP	Decode_Byte_Loop
  2486  0006EE             
  2487  0006EE             Decode_Data_Go:
  2488  0006EE   1665(1+S)  	INCMS	BitPoint+0
  2489  0006EF   0000(1)  	NOP
  2490  0006F0   2E65(1)  	B0MOV	A,BitPoint+0
  2491  0006F1   0762(1+S)  	CMPRS	A,BitNum+2
  2492  0006F2   86F4(2)  	JMP	$+2
  2493  0006F3   86F7(2)  	JMP	Decode_Data_Fail		; 判断逻辑位指针是否超出范围，超出则此次解码失败
  2494  0006F4   CE9E(2)  	CALL	Set_BakAddr
  2495  0006F5   CE80(2)  	CALL	BackUp_CapAddr			; 恢复捕获数据地址
  2496  0006F6   86C4(2)  	JMP	Decode_Bit_Loop			; 继续尝试下一位解码
  2497  0006F7             
  2498  0006F7             Decode_Data_Fail:
  2499  0006F7   6286(1)  	B0BCLR	FC
  2500  0006F8   0E00(2)  	RET
  2501  0006F9             
  2502  0006F9             Decode_Data_Finish:
  2503  0006F9   2D09(1)  	MOV	A,#9
  2504  0006FA   2261(1)  	SUB	A,BitNum+1
  2505  0006FB   2F61(1)  	B0MOV	BitNum+1,A
  2506  0006FC   2661(1+S)  	DECMS	BitNum+1
  2507  0006FD   86FF(2)  	JMP	$+2
  2508  0006FE   8702(2)  	JMP	$+4
  2509  0006FF   6286(1)  	B0BCLR	FC
  2510  000700   096A(1)  	RRCM	Result
  2511  000701   86FC(2)  	JMP	$-5				; 将结果第一位与bit0位对齐
  2512  000702   6A86(1)  	B0BSET	FC
  2513  000703   0E00(2)  	RET
  2514  000704             ///
  2515  000704             
  2516  000704             ;****************************************************************************
  2517  000704             ;程序功能:	比较捕获电平数据和库数据
  2518  000704             ;输入参数:	LibData CapData
  2519  000704             ;输出参数:	RFlag
  2520  000704             ;堆栈层数:	0层
  2521  000704             ;内存占用:	无
  2522  000704             ;算法实现:	将参与比较的数据相减，再将结果的绝对值
  2523  000704             ;		与误差容值比较，在范围内则成功
  2524  000704             ;****************************************************************************
  2525  000704             //
  2526  000704             Compare_Level_Data:
  2527  000704   2E5C(1)  	B0MOV	A,LibData+0
  2528  000705   225A(1)  	SUB	A,CapData+0
  2529  000706   2F5E(1)  	B0MOV	DifData+0,A
  2530  000707   2E5D(1)  	B0MOV	A,LibData+1
  2531  000708   205B(1)  	SBC	A,CapData+1
  2532  000709   2F5F(1)  	B0MOV	DifData+1,A			; 将库中的数据与捕获值相减
  2533  00070A   7286(1+S)  	B0BTS0	FC
  2534  00070B   8712(2)  	JMP	Compare_Tolerance
  2535  00070C   2D00(1)  	MOV	A,#0
  2536  00070D   225E(1)  	SUB	A,DifData+0
  2537  00070E   2F5E(1)  	B0MOV	DifData+0,A
  2538  00070F   2D00(1)  	MOV	A,#0
  2539  000710   205F(1)  	SBC	A,DifData+1
  2540  000711   2F5F(1)  	B0MOV	DifData+1,A			; 对上一步产生的负值进行处理
  2541  000712             Compare_Tolerance:
  2542  000712   2E5F(1)  	B0MOV	A,DifData+1
  2543  000713   7886(1+S)  	B0BTS1	FZ
  2544  000714   871B(2)  	JMP	Compare_Failed			; 直接判断差值高位非0比较失败
  2545  000715   2E67(1)  	B0MOV	A,Tolerance
  2546  000716   225E(1)  	SUB	A,DifData+0
  2547  000717   7A86(1+S)  	B0BTS1	FC
  2548  000718   871B(2)  	JMP	Compare_Failed			; 上一步的差值超出设定误差范围内比较失败
  2549  000719             Compare_Success:
  2550  000719   6A86(1)  	B0BSET	FC
  2551  00071A   0E00(2)  	RET
  2552  00071B             
  2553  00071B             Compare_Failed:
  2554  00071B   6286(1)  	B0BCLR	FC
  2555  00071C   0E00(2)  	RET
  2556  00071D             
  2557  00071D             ///
  2558  00071D             
  2559  00071D             ;****************************************************************************
  2560  00071D             ;程序功能:	数据读取
  2561  00071D             ;输入参数:
  2562  00071D             ;输出参数:
  2563  00071D             ;堆栈层数:	0层
  2564  00071D             ;内存占用:	无
  2565  00071D             ;****************************************************************************
  2566  00071D             //
  2567  00071D             Get_LibAddr:
  2568  00071D   2E6F(1)  	B0MOV	A,CtrlData
  2569  00071E   2A0F(1)  	AND	A,#0FH
  2570  00071F   124C(1)  	ADD	A,FmtAddr+0
  2571  000720   2F52(1)  	B0MOV	LibAddr+0,A
  2572  000721   2D00(1)  	MOV	A,#0
  2573  000722   104D(1)  	ADC	A,FmtAddr+1
  2574  000723   2F53(1)  	B0MOV	LibAddr+1,A			; ROM指针指向格式库中的电平数据
  2575  000724   0E00(2)  	RET
  2576  000725             
  2577  000725             Get_LibData:
  2578  000725   0D00(2)  	MOVC
  2579  000726   2F5C(1)  	B0MOV	LibData+0,A
  2580  000727   2E82(1)  	B0MOV	A,R
  2581  000728   2F6E(1)  	B0MOV	LevelFlag,A
  2582  000729   2ABF(1)  	AND	A,#0BFH
  2583  00072A   2F5D(1)  	B0MOV	LibData+1,A			; 获取库中的电平数据（包含电平标志）
  2584  00072B   0E00(2)  	RET
  2585  00072C             
  2586  00072C             Get_CapData:
  2587  00072C   2EE7(1)  	B0MOV	A,@YZ
  2588  00072D   2F82(1)  	B0MOV	R,A
  2589  00072E   6286(1)  	B0BCLR	FC
  2590  00072F   0A82(1)  	RLC	R
  2591  000730   1400(1)  	ADD	A,#LvlAddr$L
  2592  000731   2F83(1)  	B0MOV	Z,A
  2593  000732   2D01(1)  	MOV	A,#LvlAddr$M
  2594  000733   1006(1)  	ADC	A,Zero
  2595  000734   2F84(1)  	B0MOV	Y,A
  2596  000735   2EE7(1)  	B0MOV	A,@YZ
  2597  000736   2F5A(1)  	B0MOV	CapData+0,A
  2598  000737   CE5B(2)  	CALL	INC_YZ
  2599  000738   2EE7(1)  	B0MOV	A,@YZ
  2600  000739   2F5B(1)  	B0MOV	CapData+1,A			; 获取捕获到的电平数据
  2601  00073A   0E00(2)  	RET
  2602  00073B             ///
  2603  00073B             
  2604  00073B             ;****************************************************************************
  2605  00073B             ;程序功能:	寻找控制数据地址
  2606  00073B             ;输入参数:	无
  2607  00073B             ;输出参数:	无
  2608  00073B             ;堆栈层数:	1层
  2609  00073B             ;内存占用:	无
  2610  00073B             ;****************************************************************************
  2611  00073B             //
  2612  00073B             Find_Ctrl_Addr:
  2613  00073B   CE5B(2)  	CALL	INC_YZ
  2614  00073C   0D00(2)  	MOVC
  2615  00073D   2882(1)  	AND	A,R
  2616  00073E   06FF(1+S)  	CMPRS	A,#0FFH
  2617  00073F   873B(2)  	JMP	Find_Ctrl_Addr
  2618  000740   CE5B(2)  	CALL	INC_YZ
  2619  000741   2E83(1)  	B0MOV	A,Z
  2620  000742   2F50(1)  	B0MOV	CtrlAddr+0,A
  2621  000743   2E84(1)  	B0MOV	A,Y
  2622  000744   2F51(1)  	B0MOV	CtrlAddr+1,A
  2623  000745             ;	CALL	Send_CtrlAddr;DDDBUG
  2624  000745   0E00(2)  	RET
  2625  000746             ///
  2626  000746             
  2627  000746             ;****************************************************************************
  2628  000746             ;程序功能:	载波校验
  2629  000746             ;输入参数:	无
  2630  000746             ;输出参数:	无
  2631  000746             ;堆栈层数:	1层
  2632  000746             ;内存占用:	无
  2633  000746             ;****************************************************************************
  2634  000746             //
  2635  000746             Check_Carrier:
  2636  000746   6286(1)  	B0BCLR	FC
  2637  000747   0B69(1)  	RLCM	CrrPoint
  2638  000748   2DCB(1)  	MOV	A,#Carrier_Range$L
  2639  000749   1269(1)  	ADD	A,CrrPoint
  2640  00074A   2F83(1)  	B0MOV	Z,A
  2641  00074B   2D00(1)  	MOV	A,#Carrier_Range$M
  2642  00074C   1006(1)  	ADC	A,Zero
  2643  00074D   2F84(1)  	B0MOV	Y,A
  2644  00074E   0D00(2)  	MOVC
  2645  00074F             
  2646  00074F   2263(1)  	SUB	A,CrrBuff+0
  2647  000750   2E82(1)  	B0MOV	A,R
  2648  000751   2064(1)  	SBC	A,CrrBuff+1
  2649  000752   7A86(1+S)  	B0BTS1	FC
  2650  000753   875D(2)  	JMP	Check_C_Fail			; 与上限值比较产生借位则失败
  2651  000754   CE5B(2)  	CALL	INC_YZ
  2652  000755   0D00(2)  	MOVC
  2653  000756   2263(1)  	SUB	A,CrrBuff+0
  2654  000757   2E82(1)  	B0MOV	A,R
  2655  000758   2064(1)  	SBC	A,CrrBuff+1
  2656  000759   7286(1+S)  	B0BTS0	FC
  2657  00075A   875D(2)  	JMP	Check_C_Fail			; 与下限值比较无借位则失败
  2658  00075B   6A86(1)  	B0BSET	FC
  2659  00075C   0E00(2)  	RET
  2660  00075D             
  2661  00075D             Check_C_Fail:
  2662  00075D   6286(1)  	B0BCLR	FC
  2663  00075E   0E00(2)  	RET
  2664  00075F             ///
  2665  00075F             
  2666  00075F             ;****************************************************************************
  2667  00075F             ;程序功能:	查验是否符合PPM调制特征
  2668  00075F             ;输入参数:	格式库数据，捕获数据
  2669  00075F             ;输出参数:	FC
  2670  00075F             ;堆栈层数:	0层
  2671  00075F             ;内存占用:	无
  2672  00075F             ;算法实现：	从格式库中获取波形数据，然后与捕获的IR波形数据比较，看是否为
  2673  00075F             ;		格式库中的波形数据集合的子集
  2674  00075F             ;		对于格式库中的波形数据集合以Philips格式为例：
  2675  00075F             ;		集合Z={2670, 444, 888, 888*2, 444+888}
  2676  00075F             ;****************************************************************************
  2677  00075F             //
  2678  00075F             Check_PPM:
  2679  00075F   2D00(1)  	MOV	A,#LvlAddr$L
  2680  000760   2F4E(1)  	B0MOV	CapAddr+0,A
  2681  000761   2D01(1)  	MOV	A,#LvlAddr$M
  2682  000762   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化捕获数据地址
  2683  000763   2D13(1)  	MOV	A,#19
  2684  000764   2F7E(1)  	B0MOV	Number,A
  2685  000765   CE8F(2)  	CALL	Set_CtrlAddr
  2686  000766   0D00(2)  	MOVC
  2687  000767   2F39(1)  	B0MOV	Temp+0,A
  2688  000768   1739(1)  	SWAP	Temp+0
  2689  000769   2A0F(1)  	AND	A,#0FH
  2690  00076A   2F39(1)  	B0MOV	Temp+0,A			; 获得波形识别库长度+2
  2691  00076B             C_P_Loop:
  2692  00076B   CE99(2)  	CALL	Set_CapAddr
  2693  00076C   2EE7(1)  	B0MOV	A,@YZ
  2694  00076D   2F5A(1)  	B0MOV	CapData+0,A
  2695  00076E   CE71(2)  	CALL	INC_CapAddr
  2696  00076F   CE99(2)  	CALL	Set_CapAddr
  2697  000770   2EE7(1)  	B0MOV	A,@YZ
  2698  000771   2A7F(1)  	AND	A,#7FH
  2699  000772   2F5B(1)  	B0MOV	CapData+1,A
  2700  000773   CE71(2)  	CALL	INC_CapAddr			; 读取捕获数据并清除标志位
  2701  000774   2E5A(1)  	B0MOV	A,CapData+0
  2702  000775   185B(1)  	OR	A,CapData+1
  2703  000776   0600(1+S)  	CMPRS	A,#0
  2704  000777   8779(2)  	JMP	$+2
  2705  000778   8796(2)  	JMP	C_P_Finish			; 捕获数据为0则完成查验
  2706  000779   2E5B(1)  	B0MOV	A,CapData+1
  2707  00077A   2AF0(1)  	AND	A,#0F0H
  2708  00077B   0600(1+S)  	CMPRS	A,#0
  2709  00077C   876B(2)  	JMP	C_P_Loop			; 判断数据为停止位数据则跳过之
  2710  00077D   267E(1+S)  	DECMS	Number
  2711  00077E   8780(2)  	JMP	$+2
  2712  00077F   8794(2)  	JMP	C_P_Failed
  2713  000780   2D02(1)  	MOV	A,#2
  2714  000781   2F3A(1)  	B0MOV	Temp+1,A
  2715  000782             C_P_Loop0:
  2716  000782   2E3A(1)  	B0MOV	A,Temp+1
  2717  000783   124C(1)  	ADD	A,FmtAddr+0
  2718  000784   2F83(1)  	B0MOV	Z,A
  2719  000785   2D00(1)  	MOV	A,#0
  2720  000786   104D(1)  	ADC	A,FmtAddr+1
  2721  000787   2F84(1)  	B0MOV	Y,A
  2722  000788   0D00(2)  	MOVC
  2723  000789   2F5C(1)  	B0MOV	LibData+0,A
  2724  00078A   2E82(1)  	B0MOV	A,R
  2725  00078B   2F5D(1)  	B0MOV	LibData+1,A			; 获取波形识别数据（此数据无任何标志位）
  2726  00078C   C704(2)  	CALL	Compare_Level_Data
  2727  00078D   7286(1+S)  	B0BTS0	FC
  2728  00078E   876B(2)  	JMP	C_P_Loop
  2729  00078F             ;        CALL    Send_LibData
  2730  00078F             ;        CALL    Send_CapData
  2731  00078F   163A(1+S)  	INCMS	Temp+1
  2732  000790   0000(1)  	NOP
  2733  000791   2E3A(1)  	B0MOV	A,Temp+1
  2734  000792   0739(1+S)  	CMPRS	A,Temp+0
  2735  000793   8782(2)  	JMP	C_P_Loop0			; 超出波形识别数据库则查验失败
  2736  000794             C_P_Failed:
  2737  000794             ;	CALL	Send_A0;DDDBUG
  2738  000794   6286(1)  	B0BCLR	FC
  2739  000795   0E00(2)  	RET
  2740  000796             
  2741  000796             C_P_Finish:
  2742  000796             ;	CALL	Send_B0;DDDBUG
  2743  000796   6A86(1)  	B0BSET	FC
  2744  000797   0E00(2)  	RET
  2745  000798             ///
  2746  000798             
  2747  000798             ;****************************************************************************
  2748  000798             ;程序功能:	拆分PPM电平数据
  2749  000798             ;输入参数:
  2750  000798             ;输出参数:
  2751  000798             ;堆栈层数:	0层
  2752  000798             ;内存占用:	无
  2753  000798             ;****************************************************************************
  2754  000798             Get_YZ_From_R:
  2755  000798   6286(1)  	B0BCLR	FC
  2756  000799   0A82(1)  	RLC	R
  2757  00079A   1400(1)  	ADD	A,#LvlAddr$L
  2758  00079B   2F83(1)  	B0MOV	Z,A
  2759  00079C   2D01(1)  	MOV	A,#LvlAddr$M
  2760  00079D   1006(1)  	ADC	A,Zero
  2761  00079E   2F84(1)  	B0MOV	Y,A
  2762  00079F   0E00(2)  	RET
  2763  0007A0             
  2764  0007A0             Find_Level_Pointer:
  2765  0007A0   2D00(1)  	MOV	A,#0
  2766  0007A1   2F82(1)  	B0MOV	R,A
  2767  0007A2             F_L_P_Loop:
  2768  0007A2   C798(2)  	CALL	Get_YZ_From_R
  2769  0007A3   2EE7(1)  	B0MOV	A,@YZ
  2770  0007A4   7886(1+S)  	B0BTS1	FZ
  2771  0007A5   87B2(2)  	JMP	F_L_P_Next
  2772  0007A6   CE5B(2)  	CALL	INC_YZ
  2773  0007A7   2EE7(1)  	B0MOV	A,@YZ
  2774  0007A8   7886(1+S)  	B0BTS1	FZ
  2775  0007A9   87B2(2)  	JMP	F_L_P_Next
  2776  0007AA   C798(2)  	CALL	Get_YZ_From_R
  2777  0007AB   2E39(1)  	B0MOV	A,Temp+0
  2778  0007AC   2FE7(1)  	B0MOV	@YZ,A
  2779  0007AD   CE5B(2)  	CALL	INC_YZ
  2780  0007AE   2E3A(1)  	B0MOV	A,Temp+1
  2781  0007AF   2FE7(1)  	B0MOV	@YZ,A
  2782  0007B0   6A86(1)  	B0BSET	FC
  2783  0007B1   0E00(2)  	RET
  2784  0007B2             
  2785  0007B2             F_L_P_Next:
  2786  0007B2   C798(2)  	CALL	Get_YZ_From_R
  2787  0007B3   2EE7(1)  	B0MOV	A,@YZ
  2788  0007B4   2239(1)  	SUB	A,Temp+0
  2789  0007B5   2F5E(1)  	B0MOV	DifData+0,A
  2790  0007B6   CE5B(2)  	CALL	INC_YZ
  2791  0007B7   2EE7(1)  	B0MOV	A,@YZ
  2792  0007B8   203A(1)  	SBC	A,Temp+1
  2793  0007B9   2F5F(1)  	B0MOV	DifData+1,A
  2794  0007BA   7286(1+S)  	B0BTS0	FC
  2795  0007BB   87C2(2)  	JMP	F_L_P_Error
  2796  0007BC   2D00(1)  	MOV	A,#0
  2797  0007BD   225E(1)  	SUB	A,DifData+0
  2798  0007BE   2F5E(1)  	B0MOV	DifData+0,A
  2799  0007BF   2D00(1)  	MOV	A,#0
  2800  0007C0   205F(1)  	SBC	A,DifData+1
  2801  0007C1   2F5F(1)  	B0MOV	DifData+1,A			; 对上一步产生的负值进行处理
  2802  0007C2             F_L_P_Error:
  2803  0007C2   2E5F(1)  	B0MOV	A,DifData+1
  2804  0007C3   7886(1+S)  	B0BTS1	FZ
  2805  0007C4   87CB(2)  	JMP	F_L_P_Continue			; 直接判断差值高位非0比较失败
  2806  0007C5   2D32(1)  	MOV	A,#50
  2807  0007C6   225E(1)  	SUB	A,DifData+0
  2808  0007C7   7A86(1+S)  	B0BTS1	FC
  2809  0007C8   87CB(2)  	JMP	F_L_P_Continue
  2810  0007C9   6A86(1)  	B0BSET	FC
  2811  0007CA   0E00(2)  	RET
  2812  0007CB             
  2813  0007CB             F_L_P_Continue:
  2814  0007CB   1682(1+S)  	INCMS	R
  2815  0007CC   2D13(1)  	MOV	A,#19
  2816  0007CD   2282(1)  	SUB	A,R
  2817  0007CE   7286(1+S)  	B0BTS0	FC
  2818  0007CF   87A2(2)  	JMP	F_L_P_Loop
  2819  0007D0   6286(1)  	B0BCLR	FC
  2820  0007D1   0E00(2)  	RET
  2821  0007D2             
  2822  0007D2             Get_LvlData:
  2823  0007D2   2F82(1)  	B0MOV	R,A
  2824  0007D3   6286(1)  	B0BCLR	FC
  2825  0007D4   0A82(1)  	RLC	R
  2826  0007D5   1400(1)  	ADD	A,#LvlAddr$L
  2827  0007D6   2F83(1)  	B0MOV	Z,A
  2828  0007D7   2D01(1)  	MOV	A,#LvlAddr$M
  2829  0007D8   1006(1)  	ADC	A,Zero
  2830  0007D9   2F84(1)  	B0MOV	Y,A
  2831  0007DA   2EE7(1)  	B0MOV	A,@YZ
  2832  0007DB   2F5C(1)  	B0MOV	LibData+0,A
  2833  0007DC   CE5B(2)  	CALL	INC_YZ
  2834  0007DD   2EE7(1)  	B0MOV	A,@YZ
  2835  0007DE   2F5D(1)  	B0MOV	LibData+1,A
  2836  0007DF   0E00(2)  	RET
  2837  0007E0             
  2838  0007E0             ;=======  拆分ppm数据主程序
  2839  0007E0             Split_PPM:
  2840  0007E0   2D5A(1)  	MOV	A,#05AH
  2841  0007E1   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
  2842  0007E2   2D26(1)  	MOV	A,#LrnAddr$L
  2843  0007E3   2F4E(1)  	B0MOV	CapAddr+0,A
  2844  0007E4   2D01(1)  	MOV	A,#LrnAddr$M
  2845  0007E5   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化捕获数据地址
  2846  0007E6   2DFF(1)  	MOV	A,#EndAddr$L
  2847  0007E7   2F52(1)  	B0MOV	LibAddr+0,A
  2848  0007E8   2D01(1)  	MOV	A,#EndAddr$M
  2849  0007E9   2F53(1)  	B0MOV	LibAddr+1,A			; 初始化拆分数据缓冲尾地址（降序）
  2850  0007EA             
  2851  0007EA   2D02(1)  	MOV	A,#2
  2852  0007EB   124C(1)  	ADD	A,FmtAddr+0
  2853  0007EC   2F83(1)  	B0MOV	Z,A
  2854  0007ED   2D00(1)  	MOV	A,#0
  2855  0007EE   104D(1)  	ADC	A,FmtAddr+1
  2856  0007EF   2F84(1)  	B0MOV	Y,A
  2857  0007F0   CE85(2)  	CALL	BackUp_BakAddr
  2858  0007F1   0D00(2)  	MOVC
  2859  0007F2   2F39(1)  	B0MOV	Temp+0,A
  2860  0007F3   2F3F(1)  	B0MOV	Temp+6,A
  2861  0007F4   2E82(1)  	B0MOV	A,R
  2862  0007F5   2F3A(1)  	B0MOV	Temp+1,A			; 读取拆分数据基值1
  2863  0007F6   2F40(1)  	B0MOV	Temp+7,A
  2864  0007F7   C7A0(2)  	CALL	Find_Level_Pointer
  2865  0007F8   7A86(1+S)  	B0BTS1	FC
  2866  0007F9   88A9(2)  	JMP	Split_Fail
  2867  0007FA   2E82(1)  	B0MOV	A,R
  2868  0007FB   2F43(1)  	B0MOV	Temp+10,A			; 找出基值1高电平的指针并存储
  2869  0007FC             	;--------------------------------------------------------------------------
  2870  0007FC   6F3A(1)  	B0BSET	(Temp+1).7			; 设置基值1电平为低电平
  2871  0007FD   C7A0(2)  	CALL	Find_Level_Pointer
  2872  0007FE   7A86(1+S)  	B0BTS1	FC
  2873  0007FF   88A9(2)  	JMP	Split_Fail
  2874  000800   2E82(1)  	B0MOV	A,R
  2875  000801   2F44(1)  	B0MOV	Temp+11,A			; 找出基值1低电平的指针并存储
  2876  000802             	;--------------------------------------------------------------------------
  2877  000802   CE7B(2)  	CALL	INC_BakAddr
  2878  000803   CE9E(2)  	CALL	Set_BakAddr
  2879  000804   0D00(2)  	MOVC
  2880  000805   2F39(1)  	B0MOV	Temp+0,A
  2881  000806   2E82(1)  	B0MOV	A,R
  2882  000807   2F3A(1)  	B0MOV	Temp+1,A			; 读取拆分数据基值2
  2883  000808   C7A0(2)  	CALL	Find_Level_Pointer
  2884  000809   7A86(1+S)  	B0BTS1	FC
  2885  00080A   88A9(2)  	JMP	Split_Fail
  2886  00080B   2E82(1)  	B0MOV	A,R
  2887  00080C   2F41(1)  	B0MOV	Temp+8,A			; 找出基值2高电平的指针并存储
  2888  00080D             	;--------------------------------------------------------------------------
  2889  00080D   6F3A(1)  	B0BSET	(Temp+1).7			; 设置基值2电平为低电平
  2890  00080E   C7A0(2)  	CALL	Find_Level_Pointer
  2891  00080F   7A86(1+S)  	B0BTS1	FC
  2892  000810   88A9(2)  	JMP	Split_Fail
  2893  000811   2E82(1)  	B0MOV	A,R
  2894  000812   2F42(1)  	B0MOV	Temp+9,A			; 找出基值1低电平的指针并存储
  2895  000813             	;--------------------------------------------------------------------------
  2896  000813   CE9E(2)  	CALL	Set_BakAddr			; 再次读取基值2
  2897  000814   0D00(2)  	MOVC
  2898  000815   123F(1)  	ADD	A,Temp+6
  2899  000816   2F3F(1)  	B0MOV	Temp+6,A
  2900  000817   2E82(1)  	B0MOV	A,R
  2901  000818   1040(1)  	ADC	A,Temp+7
  2902  000819   2F40(1)  	B0MOV	Temp+7,A			; 计算出两基值和
  2903  00081A   2D00(1)  	MOV	A,#0
  2904  00081B   2F7E(1)  	B0MOV	Number,A			; 用来记录存储深度
  2905  00081C             Split_Start:
  2906  00081C   CE8F(2)  	CALL	Set_CtrlAddr
  2907  00081D   0D00(2)  	MOVC
  2908  00081E   2E82(1)  	B0MOV	A,R
  2909  00081F   2F39(1)  	B0MOV	Temp+0,A			; 读入第一个控制数据（判断有无引导电平）
  2910  000820   2AF0(1)  	AND	A,#0F0H
  2911  000821   0600(1+S)  	CMPRS	A,#0
  2912  000822   8834(2)  	JMP	No_Lead_Level
  2913  000823   2D02(1)  	MOV	A,#2
  2914  000824   2F3A(1)  	B0MOV	Temp+1,A
  2915  000825             S_P_Loop:
  2916  000825   CE99(2)  	CALL	Set_CapAddr
  2917  000826   2EE7(1)  	B0MOV	A,@YZ
  2918  000827   2F5B(1)  	B0MOV	CapData+1,A
  2919  000828   CE71(2)  	CALL	INC_CapAddr
  2920  000829   CE94(2)  	CALL	Set_LibAddr
  2921  00082A   2E5B(1)  	B0MOV	A,CapData+1
  2922  00082B   2FE7(1)  	B0MOV	@YZ,A
  2923  00082C   CEA3(2)  	CALL	DEC_LibAddr
  2924  00082D   263A(1+S)  	DECMS	Temp+1
  2925  00082E   8825(2)  	JMP	S_P_Loop			; 通过两次循环将引导电平指针直接保存
  2926  00082F   2D02(1)  	MOV	A,#2
  2927  000830   2F7E(1)  	B0MOV	Number,A
  2928  000831   2D00(1)  	MOV	A,#0
  2929  000832   2F3C(1)  	B0MOV	Temp+3,A			; 设置比特数据拆分完成标志
  2930  000833   8839(2)  	JMP	S_P_Next			; 引导电平部分不进行拆分，直接存储
  2931  000834             No_Lead_Level:
  2932  000834   2D80(1)  	MOV	A,#80H
  2933  000835   2F3B(1)  	B0MOV	Temp+2,A
  2934  000836   C8AC(2)  	CALL	Store_Data1			; 无引导电平则补一个低电平
  2935  000837   2D01(1)  	MOV	A,#1
  2936  000838   2F3C(1)  	B0MOV	Temp+3,A
  2937  000839             S_P_Next:
  2938  000839             Split_Loop:
  2939  000839   CE99(2)  	CALL	Set_CapAddr
  2940  00083A   2EE7(1)  	B0MOV	A,@YZ
  2941  00083B   0612(1+S)  	CMPRS	A,#18
  2942  00083C   883E(2)  	JMP	$+2
  2943  00083D   889B(2)  	JMP	Split_Finish			; 若为停止位标记，则结束拆分
  2944  00083E   C72C(2)  	CALL	Get_CapData
  2945  00083F   2E5B(1)  	B0MOV	A,CapData+1
  2946  000840   2A80(1)  	AND	A,#80H
  2947  000841   2F3B(1)  	B0MOV	Temp+2,A			; 保存电平标志
  2948  000842   2E5B(1)  	B0MOV	A,CapData+1
  2949  000843   2A7F(1)  	AND	A,#7FH
  2950  000844   2F5B(1)  	B0MOV	CapData+1,A			; 去除电平标志
  2951  000845   CE71(2)  	CALL	INC_CapAddr
  2952  000846             ;*** 第一次比较基值1，若相等则保存基值1数据 ************************************************
  2953  000846   2E43(1)  	B0MOV	A,Temp+10								  ;*	
  2954  000847   C7D2(2)  	CALL	Get_LvlData								  ;*							
  2955  000848   C704(2)  	CALL	Compare_Level_Data	        					  ;*
  2956  000849   7A86(1+S)  	B0BTS1	FC									  ;*
  2957  00084A   884D(2)  	JMP	Split_Data1			; 数据等于基值1则直接填回数据（带电平标志）*
  2958  00084B             ;	CALL	Send_A0;DDDBUG								  ;*
  2959  00084B   C8AC(2)  	CALL	Store_Data1								  ;*
  2960  00084C   8839(2)  	JMP	Split_Loop                                                                ;*
  2961  00084D             ;*******************************************************************************************	
  2962  00084D             
  2963  00084D             ;*** 判断bit数据完整标记，若数据完整则跳过基值倍数比较 *************************************
  2964  00084D             Split_Data1:                                                                              ;*
  2965  00084D   783C(1+S)  	B0BTS1	Temp+3.0                                                                  ;*
  2966  00084E   8863(2)  	JMP	Split_Data2			                                          ;*
  2967  00084F   2E43(1)  	B0MOV	A,Temp+10                                                                 ;*
  2968  000850   C7D2(2)  	CALL	Get_LvlData                                                               ;*
  2969  000851   6286(1)  	B0BCLR	FC                                                                        ;*
  2970  000852   0B5C(1)  	RLCM	LibData+0                                                                 ;*
  2971  000853   0B5D(1)  	RLCM	LibData+1                                                                 ;*
  2972  000854   C704(2)  	CALL	Compare_Level_Data                                                        ;*
  2973  000855   7A86(1+S)  	B0BTS1	FC                                                                        ;*
  2974  000856   8863(2)  	JMP	Split_Data2                                                               ;*
  2975  000857   2E5C(1)  	B0MOV	A,LibData+0                                                               ;*
  2976  000858   2F39(1)  	B0MOV	Temp+0,A                                                                  ;*
  2977  000859   2E5D(1)  	B0MOV	A,LibData+1                                                               ;*
  2978  00085A   2F3A(1)  	B0MOV	Temp+1,A                                                                  ;*
  2979  00085B   C7A0(2)  	CALL	Find_Level_Pointer                                                        ;*
  2980  00085C   2E82(1)  	B0MOV	A,R                                                                       ;*
  2981  00085D   073D(1+S)  	CMPRS	A,Temp+4                                                                  ;*
  2982  00085E   8860(2)  	JMP	Split_DataS			                                          ;*
  2983  00085F   8863(2)  	JMP	Split_Data2                                                               ;*
  2984  000860             Split_DataS:                                                                              ;*
  2985  000860             ;	CALL	Send_B0;DDDBUG                                                            ;*
  2986  000860   C8AC(2)  	CALL	Store_Data1                                                               ;*
  2987  000861   C8AC(2)  	CALL	Store_Data1                                                               ;*
  2988  000862   8839(2)  	JMP	Split_Loop			; 比较数据基值1的倍数                     ;*
  2989  000863             ;*******************************************************************************************
  2990  000863             
  2991  000863             ;*** 比较基值2相等则直接保存数据 ***********************************************************
  2992  000863             Split_Data2:										  ;*
  2993  000863   2E41(1)  	B0MOV	A,Temp+8                                                                  ;*
  2994  000864   C7D2(2)  	CALL	Get_LvlData                                                               ;*
  2995  000865   C704(2)  	CALL	Compare_Level_Data                                                        ;*
  2996  000866   7A86(1+S)  	B0BTS1	FC                                                                        ;*
  2997  000867   886A(2)  	JMP	Split_Data3                                                               ;*
  2998  000868             ;	CALL	Send_C0;DDDBUG	                                                          ;*
  2999  000868   C8BD(2)  	CALL	Store_Data2                                                               ;*
  3000  000869   8839(2)  	JMP	Split_Loop			; 比较数据基值2                           ;*
  3001  00086A             ;*******************************************************************************************
  3002  00086A             
  3003  00086A             ;*** 判断bit数据完整标志位，若数据完整则跳过倍数比较 ***************************************
  3004  00086A             Split_Data3:										  ;*
  3005  00086A   783C(1+S)  	B0BTS1	Temp+3.0                                                                  ;*
  3006  00086B   8887(2)  	JMP	Split_Go			                                          ;*
  3007  00086C   2E41(1)  	B0MOV	A,Temp+8                                                                  ;*
  3008  00086D   C7D2(2)  	CALL	Get_LvlData                                                               ;*
  3009  00086E   6286(1)  	B0BCLR	FC                                                                        ;*
  3010  00086F   0B5C(1)  	RLCM	LibData+0                                                                 ;*
  3011  000870   0B5D(1)  	RLCM	LibData+1                                                                 ;*
  3012  000871   C704(2)  	CALL	Compare_Level_Data                                                        ;*
  3013  000872   7A86(1+S)  	B0BTS1	FC                                                                        ;*
  3014  000873   8877(2)  	JMP	Split_Data4                                                               ;*
  3015  000874             ;	CALL	Send_D0;DDDBUG                                                            ;*
  3016  000874   C8BD(2)  	CALL	Store_Data2                                                               ;*
  3017  000875   C8BD(2)  	CALL	Store_Data2                                                               ;*
  3018  000876   8839(2)  	JMP	Split_Loop			; 比较数据基值2的倍数                     ;*
  3019  000877             ;*******************************************************************************************
  3020  000877             
  3021  000877             ;*** 比较数据基值1与基值2的和 **************************************************************
  3022  000877             Split_Data4:										  ;*
  3023  000877   2E40(1)  	B0MOV	A,Temp+7                                                                  ;*
  3024  000878   2F5D(1)  	B0MOV	LibData+1,A                                                               ;*
  3025  000879   2E3F(1)  	B0MOV	A,Temp+6                                                                  ;*
  3026  00087A   2F5C(1)  	B0MOV	LibData+0,A                                                               ;*
  3027  00087B   C704(2)  	CALL	Compare_Level_Data                                                        ;*
  3028  00087C   7A86(1+S)  	B0BTS1	FC                                                                        ;*
  3029  00087D   8887(2)  	JMP	Split_Go						                  ;*
  3030  00087E   2E3D(1)  	B0MOV	A,Temp+4                                                                  ;*
  3031  00087F   0743(1+S)  	CMPRS	A,Temp+10                                                                 ;*
  3032  000880   8884(2)  	JMP	Second_Way                                                                ;*
  3033  000881             ;	CALL	Send_E0;DDDBUG	                                                          ;*
  3034  000881   C8AC(2)  	CALL	Store_Data1                                                               ;*
  3035  000882   C8BD(2)  	CALL	Store_Data2                                                               ;*
  3036  000883   8839(2)  	JMP	Split_Loop                                                                ;*
  3037  000884             Second_Way:                                                                               ;*
  3038  000884             ;	CALL	Send_F0;DDDBUG                                                            ;*
  3039  000884   C8BD(2)  	CALL	Store_Data2                                                               ;*
  3040  000885   C8AC(2)  	CALL	Store_Data1                                                               ;*
  3041  000886   8839(2)  	JMP	Split_Loop                                                                ;*
  3042  000887             ;*******************************************************************************************
  3043  000887             
  3044  000887             Split_Go:
  3045  000887   2E5A(1)  	B0MOV	A,CapData+0
  3046  000888   185B(1)  	OR	A,CapData+1
  3047  000889   0600(1+S)  	CMPRS	A,#0
  3048  00088A   888C(2)  	JMP	$+2
  3049  00088B   889B(2)  	JMP	Split_Finish			; 捕获数据为0，结束数据拆分
  3050  00088C   2E5B(1)  	B0MOV	A,CapData+1
  3051  00088D   2AF0(1)  	AND	A,#0F0H
  3052  00088E   0600(1+S)  	CMPRS	A,#0
  3053  00088F   8891(2)  	JMP	$+2
  3054  000890   88A9(2)  	JMP	Split_Fail			; 捕获数据为停止位则根据比特数据标志位判断是否冗余一个低电平
  3055  000891   783C(1+S)  	B0BTS1	Temp+3.0
  3056  000892   8896(2)  	JMP	Set_StopBit
  3057  000893   2D80(1)  	MOV	A,#80H
  3058  000894   2F3B(1)  	B0MOV	Temp+2,A
  3059  000895   C8AC(2)  	CALL	Store_Data1			; bit位低电平
  3060  000896             Set_StopBit:
  3061  000896   2E49(1)  	B0MOV	A,DecPara+1
  3062  000897   2A30(1)  	AND	A,#030H
  3063  000898   0600(1+S)  	CMPRS	A,#0
  3064  000899   881C(2)  	JMP	Split_Start
  3065  00089A   88A0(2)  	JMP	Split_Stop			; 根据格式库中的参数，若此格式为单帧类型，直接停止数据拆分。
  3066  00089B             
  3067  00089B             Split_Finish:
  3068  00089B   783C(1+S)  	B0BTS1	Temp+3.0
  3069  00089C   88A0(2)  	JMP	Split_Stop
  3070  00089D   2D80(1)  	MOV	A,#80H
  3071  00089E   2F3B(1)  	B0MOV	Temp+2,A
  3072  00089F   C8AC(2)  	CALL	Store_Data1			; bit位低电平
  3073  0008A0             Split_Stop:
  3074  0008A0   CE94(2)  	CALL	Set_LibAddr
  3075  0008A1   2D12(1)  	MOV	A,#18
  3076  0008A2   2FE7(1)  	B0MOV	@YZ,A				; 停止位
  3077  0008A3   167E(1+S)  	INCMS	Number
  3078  0008A4   0000(1)  	NOP
  3079  0008A5   C8CE(2)  	CALL	Move_Data
  3080  0008A6             ;	CALL	Send_LrnRam;DDDBUG
  3081  0008A6   6C00(1)  	B0BSET	RFlag.4
  3082  0008A7   6A86(1)  	B0BSET	FC
  3083  0008A8   0E00(2)  	RET
  3084  0008A9             
  3085  0008A9             Split_Fail:
  3086  0008A9             ;	CALL	Move_Data
  3087  0008A9             ;	CALL	Send_LrnRam
  3088  0008A9   6400(1)  	B0BCLR	RFlag.4
  3089  0008AA   6286(1)  	B0BCLR	FC
  3090  0008AB   0E00(2)  	RET
  3091  0008AC             
  3092  0008AC             Store_Data1:
  3093  0008AC   167E(1+S)  	INCMS	Number
  3094  0008AD   0000(1)  	NOP
  3095  0008AE   2E43(1)  	B0MOV	A,Temp+10
  3096  0008AF   2F3D(1)  	B0MOV	Temp+4,A
  3097  0008B0   2E3C(1)  	B0MOV	A,Temp+3
  3098  0008B1   1D01(1)  	XOR	A,#01H
  3099  0008B2   2F3C(1)  	B0MOV	Temp+3,A			; 翻转比特数据完成标志位
  3100  0008B3   CE94(2)  	CALL	Set_LibAddr
  3101  0008B4   CEA3(2)  	CALL	DEC_LibAddr
  3102  0008B5   773B(1+S)  	B0BTS0	Temp+2.7
  3103  0008B6   88BA(2)  	JMP	Store_Data1L
  3104  0008B7   2E43(1)  	B0MOV	A,Temp+10
  3105  0008B8   2FE7(1)  	B0MOV	@YZ,A
  3106  0008B9   0E00(2)  	RET
  3107  0008BA             Store_Data1L:
  3108  0008BA   2E44(1)  	B0MOV	A,Temp+11
  3109  0008BB   2FE7(1)  	B0MOV	@YZ,A
  3110  0008BC   0E00(2)  	RET
  3111  0008BD             
  3112  0008BD             Store_Data2:
  3113  0008BD   167E(1+S)  	INCMS	Number
  3114  0008BE   0000(1)  	NOP
  3115  0008BF   2E41(1)  	B0MOV	A,Temp+8
  3116  0008C0   2F3D(1)  	B0MOV	Temp+4,A
  3117  0008C1   2E3C(1)  	B0MOV	A,Temp+3
  3118  0008C2   1D01(1)  	XOR	A,#01H
  3119  0008C3   2F3C(1)  	B0MOV	Temp+3,A			; 翻转比特数据完成标志位
  3120  0008C4   CE94(2)  	CALL	Set_LibAddr
  3121  0008C5   CEA3(2)  	CALL	DEC_LibAddr
  3122  0008C6   773B(1+S)  	B0BTS0	Temp+2.7
  3123  0008C7   88CB(2)  	JMP	Store_Data2L
  3124  0008C8   2E41(1)  	B0MOV	A,Temp+8
  3125  0008C9   2FE7(1)  	B0MOV	@YZ,A
  3126  0008CA   0E00(2)  	RET
  3127  0008CB             Store_Data2L:
  3128  0008CB   2E42(1)  	B0MOV	A,Temp+9
  3129  0008CC   2FE7(1)  	B0MOV	@YZ,A
  3130  0008CD   0E00(2)  	RET
  3131  0008CE             
  3132  0008CE             Move_Data:
  3133  0008CE   2D26(1)  	MOV	A,#LrnAddr$L
  3134  0008CF   2F4E(1)  	B0MOV	CapAddr+0,A
  3135  0008D0   2D01(1)  	MOV	A,#LrnAddr$M
  3136  0008D1   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化捕获数据地址
  3137  0008D2   2DFF(1)  	MOV	A,#EndAddr$L
  3138  0008D3   2F52(1)  	B0MOV	LibAddr+0,A
  3139  0008D4   2D01(1)  	MOV	A,#EndAddr$M
  3140  0008D5   2F53(1)  	B0MOV	LibAddr+1,A			; 初始化拆分数据缓冲尾地址（降序）
  3141  0008D6   2E7E(1)  	B0MOV	A,Number
  3142  0008D7   2F44(1)  	B0MOV	Temp+11,A
  3143  0008D8             M_D_Loop:
  3144  0008D8   CE94(2)  	CALL	Set_LibAddr
  3145  0008D9   2EE7(1)  	B0MOV	A,@YZ
  3146  0008DA   2F3A(1)  	B0MOV	Temp+1,A
  3147  0008DB   CEA3(2)  	CALL	DEC_LibAddr
  3148  0008DC   CE99(2)  	CALL	Set_CapAddr
  3149  0008DD   2E3A(1)  	B0MOV	A,Temp+1
  3150  0008DE   2FE7(1)  	B0MOV	@YZ,A
  3151  0008DF   CE71(2)  	CALL	INC_CapAddr
  3152  0008E0   2644(1+S)  	DECMS	Temp+11
  3153  0008E1   88D8(2)  	JMP	M_D_Loop
  3154  0008E2   CE5B(2)  	CALL	INC_YZ
  3155  0008E3   2D12(1)  	MOV	A,#18
  3156  0008E4   2FE7(1)  	B0MOV	@YZ,A
  3157  0008E5   0E00(2)  	RET
  3158  0008E6             
  3159  0008E6             ///
  3160  0008E6             
  3161  0008E6             ;****************************************************************************
  3162  0008E6             ;程序功能:	查询MTP全00值或全FF值
  3163  0008E6             ;输入参数:
  3164  0008E6             ;输出参数:
  3165  0008E6             ;堆栈层数:	1层
  3166  0008E6             ;内存占用:	无
  3167  0008E6             ;****************************************************************************
  3168  0008E6             Check_00FF:
  3169  0008E6   2D09(1)  	MOV	A,#RstAddr$L
  3170  0008E7   2F83(1)  	B0MOV	Z,A
  3171  0008E8   2D00(1)  	MOV	A,#RstAddr$M
  3172  0008E9   2F84(1)  	B0MOV	Y,A
  3173  0008EA   2D30(1)  	MOV	A,#48
  3174  0008EB   2F82(1)  	B0MOV	R,A
  3175  0008EC             
  3176  0008EC   2EE7(1)  	B0MOV	A,@YZ
  3177  0008ED   0600(1+S)  	CMPRS	A,#0
  3178  0008EE   88F4(2)  	JMP	Check_FF			; 若数据中有不为0的数据则结束查空程序转而进行查FF数据
  3179  0008EF   CE5B(2)  	CALL	INC_YZ
  3180  0008F0   2682(1+S)  	DECMS	R
  3181  0008F1   88EC(2)  	JMP	$-5
  3182  0008F2             
  3183  0008F2             C_InValidData:
  3184  0008F2   6286(1)  	B0BCLR	FC
  3185  0008F3   0E00(2)  	RET
  3186  0008F4             
  3187  0008F4             Check_FF:
  3188  0008F4   2D09(1)  	MOV	A,#RstAddr$L
  3189  0008F5   2F83(1)  	B0MOV	Z,A
  3190  0008F6   2D00(1)  	MOV	A,#RstAddr$M
  3191  0008F7   2F84(1)  	B0MOV	Y,A
  3192  0008F8   2D30(1)  	MOV	A,#48
  3193  0008F9   2F82(1)  	B0MOV	R,A
  3194  0008FA             
  3195  0008FA   2EE7(1)  	B0MOV	A,@YZ
  3196  0008FB   06FF(1+S)  	CMPRS	A,#0XFF
  3197  0008FC   8901(2)  	JMP	C_ValidData
  3198  0008FD   CE5B(2)  	CALL	INC_YZ
  3199  0008FE   2682(1+S)  	DECMS	R
  3200  0008FF   88FA(2)  	JMP	$-5
  3201  000900   88F2(2)  	JMP	C_InValidData
  3202  000901             
  3203  000901             C_ValidData:
  3204  000901   6A86(1)  	B0BSET	FC
  3205  000902   0E00(2)  	RET
  3206  000903             
  3207  000903             
  3208  000903             
  3209  000903             ;****************************************************************************
  3210  000903             ;程序功能:	计算校验和
  3211  000903             ;输入参数:
  3212  000903             ;输出参数:
  3213  000903             ;堆栈层数:	1层
  3214  000903             ;内存占用:	无
  3215  000903             ;****************************************************************************
  3216  000903             //
  3217  000903             Cal_CheckSum:
  3218  000903   2D00(1)  	MOV	A,#0
  3219  000904   2F38(1)  	B0MOV	Data+47,A
  3220  000905   2D09(1)  	MOV	A,#RstAddr$L
  3221  000906   2F83(1)  	B0MOV	Z,A
  3222  000907   2D00(1)  	MOV	A,#RstAddr$M
  3223  000908   2F84(1)  	B0MOV	Y,A
  3224  000909   2D2F(1)  	MOV	A,#47
  3225  00090A   2F39(1)  	B0MOV	Temp,A
  3226  00090B             
  3227  00090B   2EE7(1)  	B0MOV	A,@YZ
  3228  00090C   1238(1)  	ADD	A,Data+47
  3229  00090D   2F38(1)  	B0MOV	Data+47,A
  3230  00090E   CE5B(2)  	CALL	INC_YZ
  3231  00090F   2639(1+S)  	DECMS	Temp
  3232  000910   890B(2)  	JMP	$-5
  3233  000911   0E00(2)  	RET
  3234  000912             ///
  3235  000912             
  3236  000912             ;****************************************************************************
  3237  000912             ;程序功能:	获取数据地址
  3238  000912             ;输入参数:	无
  3239  000912             ;输出参数:	无
  3240  000912             ;堆栈层数:	0层
  3241  000912             ;内存占用:	无
  3242  000912             ;****************************************************************************
  3243  000912             //
  3244  000912             Get_UsrAddr:
  3245  000912   2E70(1)  	B0MOV	A,DatPoint
  3246  000913   2A0F(1)  	AND	A,#0FH
  3247  000914   140A(1)  	ADD	A,#UsrAddr$L
  3248  000915   2F83(1)  	B0MOV	Z,A
  3249  000916   2D00(1)  	MOV	A,#UsrAddr$M
  3250  000917   1006(1)  	ADC	A,Zero
  3251  000918   2F84(1)  	B0MOV	Y,A
  3252  000919   0E00(2)  	RET
  3253  00091A             
  3254  00091A             Get_DatAddr:
  3255  00091A   2D37(1)  	MOV	A,#DatAddr$L
  3256  00091B   2270(1)  	SUB	A,DatPoint
  3257  00091C   2F83(1)  	B0MOV	Z,A
  3258  00091D   2D00(1)  	MOV	A,#DatAddr$M
  3259  00091E   2006(1)  	SBC	A,Zero
  3260  00091F   2F84(1)  	B0MOV	Y,A
  3261  000920   0E00(2)  	RET
  3262  000921             	INCLUDE		.\Source\DirectRecord.asm
  3263  000921             ;;; 地址定义
  3264  E 0000000C         First_Index	EQU	Data+3
  3265  E 00000020         Second_Index	EQU	Data+23
  3266  E 00000024         Data_Index	EQU	Data+27
  3267  000921             ;****************************************************************************
  3268  000921             ;程序功能:	合并一级指针
  3269  000921             ;输入参数:	地址
  3270  000921             ;输出参数:	
  3271  000921             ;堆栈层数:	1层	
  3272  000921             ;实现：将指针数据合并放入原来的位置，因为合并后的数据是原来的一半，所以不会覆盖
  3273  000921             ;****************************************************************************
  3274  000921             Check_Index:
  3275  000921   2F82(1)  	B0MOV	R,A
  3276  000922   0612(1+S)  	CMPRS	A,#18
  3277  000923   8928(2)  	JMP	C_I_Continue
  3278  000924   2D0F(1)  	MOV	A,#0x0F
  3279  000925   2F82(1)  	B0MOV	R,A		; 如果指针为18则为IR采集停止的标志，改为F存储
  3280  000926   6A86(1)  	B0BSET	FC
  3281  000927   0E00(2)  	RET
  3282  000928             C_I_Continue:
  3283  000928   2D09(1)  	MOV	A,#9
  3284  000929   2282(1)  	SUB	A,R		; 若R 小于等于9则不产生借位，则FC为1否则为0
  3285  00092A   0E00(2)  	RET
  3286  00092B             
  3287  00092B             Combine_First_Index:
  3288  00092B   3326(1)  	B0MOV	Z,#LrnAddr$L
  3289  00092C   3401(1)  	B0MOV	Y,#LrnAddr$M
  3290  00092D   CE80(2)  	CALL	BackUp_CapAddr	
  3291  00092E   CE8A(2)  	CALL	BackUp_LibAddr	
  3292  00092F             C_F_I_Loop:	
  3293  00092F   CE99(2)  	CALL	Set_CapAddr
  3294  000930   2EE7(1)  	B0MOV	A,@YZ		;读入高电平指针
  3295  000931   C921(2)  	CALL	Check_Index
  3296  000932   7A86(1+S)  	B0BTS1	FC
  3297  000933   8949(2)  	JMP	C_F_I_Fail
  3298  000934   2E82(1)  	B0MOV	A,R
  3299  000935   2F39(1)  	B0MOV	Temp+0,A
  3300  000936   CE5B(2)  	CALL	INC_YZ
  3301  000937   2EE7(1)  	B0MOV	A,@YZ		;读入低电平指针
  3302  000938   C921(2)  	CALL	Check_Index
  3303  000939   7A86(1+S)  	B0BTS1	FC
  3304  00093A   8949(2)  	JMP	C_F_I_Fail
  3305  00093B   1739(1)  	SWAP	Temp+0
  3306  00093C   1882(1)  	OR	A,R
  3307  00093D   2F39(1)  	B0MOV	Temp+0,A	;合并指针存入Temp+0中
  3308  00093E   CE5B(2)  	CALL	INC_YZ	
  3309  00093F   CE80(2)  	CALL	BackUp_CapAddr
  3310  000940   CE94(2)  	CALL	Set_LibAddr
  3311  000941   2E39(1)  	B0MOV	A,Temp+0
  3312  000942   2FE7(1)  	B0MOV	@YZ,A
  3313  000943   CE6C(2)  	CALL	INC_LibAddr	;存入合并后的指针数据
  3314  000944   2E39(1)  	B0MOV	A,Temp+0
  3315  000945   0600(1+S)  	CMPRS	A,#0
  3316  000946   892F(2)  	JMP	C_F_I_Loop	;若合并后的数据为0则退出，因为电平数据带有高低电平标志，故而不可能出现00
  3317  000947   6A86(1)  	B0BSET	FC
  3318  000948   0E00(2)  	RET
  3319  000949             
  3320  000949             C_F_I_Fail:
  3321  000949   6286(1)  	B0BCLR	FC
  3322  00094A   0E00(2)  	RET	
  3323  00094B             
  3324  00094B             ;****************************************************************************
  3325  00094B             ;程序功能:	查找逻辑位数
  3326  00094B             ;输入参数:	地址
  3327  00094B             ;输出参数:	
  3328  00094B             ;堆栈层数:	1层	
  3329  00094B             ;****************************************************************************	
  3330  00094B             Find_Second_Index:
  3331  00094B   2D00(1)  	MOV	A,#0
  3332  00094C   2F82(1)  	B0MOV	R,A
  3333  00094D             F_S_I_Loop:	
  3334  00094D   2D20(1)  	MOV	A,#Second_Index$L
  3335  00094E   1282(1)  	ADD	A,R
  3336  00094F   2F83(1)  	B0MOV	Z,A
  3337  000950   3400(1)  	B0MOV	Y,#Second_Index$M
  3338  000951   2EE7(1)  	B0MOV	A,@YZ
  3339  000952   7886(1+S)  	B0BTS1	FZ
  3340  000953   895A(2)  	JMP	F_S_I_Next
  3341  000954   2E39(1)  	B0MOV	A,Temp+0
  3342  000955   2FE7(1)  	B0MOV	@YZ,A
  3343  000956   166F(1+S)  	INCMS	CtrlData
  3344  000957   0000(1)  	NOP
  3345  000958   6A86(1)  	B0BSET	FC
  3346  000959   0E00(2)  	RET					;查询当前数据为空，直接存入
  3347  00095A             F_S_I_Next:
  3348  00095A   0739(1+S)  	CMPRS	A,Temp+0
  3349  00095B   895E(2)  	JMP	F_S_I_Judge
  3350  00095C   6A86(1)  	B0BSET	FC
  3351  00095D   0E00(2)  	RET					;查询与当前数据相等，直接退出
  3352  00095E             F_S_I_Judge:
  3353  00095E   1682(1+S)  	INCMS	R
  3354  00095F   0000(1)  	NOP
  3355  000960   2E82(1)  	B0MOV	A,R
  3356  000961   0604(1+S)  	CMPRS	A,#4
  3357  000962   894D(2)  	JMP	F_S_I_Loop			
  3358  000963   6286(1)  	B0BCLR	FC
  3359  000964   0E00(2)  	RET					;超过4种逻辑，退出
  3360  000965             	
  3361  000965             	
  3362  000965             Find_Loigc_Num:
  3363  000965   2D00(1)  	MOV	A,#0
  3364  000966   2F6F(1)  	B0MOV	CtrlData,A
  3365  000967   2D03(1)  	MOV	A,#3
  3366  000968   2F3C(1)  	B0MOV	Temp+3,A
  3367  000969   3326(1)  	B0MOV	Z,#LrnAddr$L
  3368  00096A   3401(1)  	B0MOV	Y,#LrnAddr$M
  3369  00096B   CE80(2)  	CALL	BackUp_CapAddr		;载入合并后的数据地址	
  3370  00096C             F_L_N_Again:
  3371  00096C   263C(1+S)  	DECMS	Temp+3
  3372  00096D   896F(2)  	JMP	$+2
  3373  00096E   897F(2)  	JMP	F_L_N_End
  3374  00096F   CE99(2)  	CALL	Set_CapAddr
  3375  000970   CE71(2)  	CALL	INC_CapAddr		;跳过引导头
  3376  000971             F_L_N_Loop:	
  3377  000971   CE99(2)  	CALL	Set_CapAddr		
  3378  000972   2EE7(1)  	B0MOV	A,@YZ
  3379  000973   2F39(1)  	B0MOV	Temp+0,A
  3380  000974   CE71(2)  	CALL	INC_CapAddr		;读取合并后的数据
  3381  000975   C981(2)  	CALL	Check_Stop_Bit
  3382  000976   7886(1+S)  	B0BTS1	FZ
  3383  000977   897F(2)  	JMP	F_L_N_End		;停止位 无第二帧结束
  3384  000978   7A86(1+S)  	B0BTS1	FC
  3385  000979   896C(2)  	JMP	F_L_N_Again		;停止位 有第二帧继续
  3386  00097A   C94B(2)  	CALL	Find_Second_Index
  3387  00097B   7286(1+S)  	B0BTS0	FC
  3388  00097C   8971(2)  	JMP	F_L_N_Loop
  3389  00097D   6286(1)  	B0BCLR	FC
  3390  00097E   0E00(2)  	RET	
  3391  00097F             F_L_N_End:
  3392  00097F   6A86(1)  	B0BSET	FC
  3393  000980   0E00(2)  	RET			
  3394  000981             ;****************************************************************************
  3395  000981             ;程序功能:	检查停止位
  3396  000981             ;输入参数:	地址
  3397  000981             ;输出参数:	
  3398  000981             ;堆栈层数:	1层	
  3399  000981             ;****************************************************************************	
  3400  000981             Check_Stop_Bit:
  3401  000981   2E39(1)  	B0MOV	A,Temp+0
  3402  000982   2A0F(1)  	AND	A,#0FH
  3403  000983   060F(1+S)  	CMPRS	A,#0FH
  3404  000984   8988(2)  	JMP	C_S_B_Compare
  3405  000985             C_S_B_End:
  3406  000985   6086(1)  	B0BCLR	FZ
  3407  000986   6286(1)  	B0BCLR	FC
  3408  000987   0E00(2)  	RET				;结束整个解码程序
  3409  000988             C_S_B_Compare:
  3410  000988   2F82(1)  	B0MOV	R,A
  3411  000989   6286(1)  	B0BCLR	FC
  3412  00098A   0A82(1)  	RLC	R
  3413  00098B   1400(1)  	ADD	A,#LvlAddr$L
  3414  00098C   2F83(1)  	B0MOV	Z,A
  3415  00098D   3401(1)  	B0MOV	Y,#LvlAddr$M
  3416  00098E   CE5B(2)  	CALL	INC_YZ
  3417  00098F   2EE7(1)  	B0MOV	A,@YZ
  3418  000990   2A70(1)  	AND	A,#0x70
  3419  000991   7086(1+S)  	B0BTS0	FZ
  3420  000992   8997(2)  	JMP	C_S_B_Finish
  3421  000993             C_S_B_Go:
  3422  000993   6F0A(1)  	B0BSET	Data+1.7
  3423  000994   6886(1)  	B0BSET	FZ
  3424  000995   6286(1)  	B0BCLR	FC			
  3425  000996   0E00(2)  	RET				;结束本次解码,仍需继续解码第二帧
  3426  000997             C_S_B_Finish:
  3427  000997   6886(1)  	B0BSET	FZ
  3428  000998   6A86(1)  	B0BSET	FC
  3429  000999   0E00(2)  	RET				;继续本次解码
  3430  00099A             	
  3431  00099A             ;****************************************************************************
  3432  00099A             ;程序功能:	按位解码
  3433  00099A             ;输入参数:	地址
  3434  00099A             ;输出参数:	
  3435  00099A             ;堆栈层数:	1层	
  3436  00099A             ;****************************************************************************	
  3437  00099A             Decode_By_Bit:
  3438  00099A   2D00(1)  	MOV	A,#0
  3439  00099B   2F60(1)  	B0MOV	BitNum+0,A		;初始化数据长度
  3440  00099C             Decode_By_Bit_Again:		
  3441  00099C   2D08(1)  	MOV	A,#8
  3442  00099D   2F61(1)  	B0MOV	BitNum+1,A		;初始化一个字节数据长度
  3443  00099E   2D00(1)  	MOV	A,#0
  3444  00099F   2F6A(1)  	B0MOV	Result,A
  3445  0009A0             D_B_B_Loop:	
  3446  0009A0   CE99(2)  	CALL	Set_CapAddr
  3447  0009A1   2EE7(1)  	B0MOV	A,@YZ
  3448  0009A2   2F39(1)  	B0MOV	Temp+0,A
  3449  0009A3   CE71(2)  	CALL	INC_CapAddr		;读取合并后的数据
  3450  0009A4   C981(2)  	CALL	Check_Stop_Bit
  3451  0009A5   7886(1+S)  	B0BTS1	FZ
  3452  0009A6   89C1(2)  	JMP	D_B_B_Finish
  3453  0009A7   7A86(1+S)  	B0BTS1	FC
  3454  0009A8   89C1(2)  	JMP	D_B_B_Finish		;检查停止位
  3455  0009A9   C94B(2)  	CALL	Find_Second_Index
  3456  0009AA   700A(1+S)  	B0BTS0	Data+1.0
  3457  0009AB   89B2(2)  	JMP	D_B_B_4bit
  3458  0009AC             D_B_B_2bit:	
  3459  0009AC   0982(1)  	RRCM	R
  3460  0009AD   096A(1)  	RRCM	Result
  3461  0009AE   1660(1+S)  	INCMS	BitNum+0
  3462  0009AF   2661(1+S)  	DECMS	BitNum+1
  3463  0009B0   89A0(2)  	JMP	D_B_B_Loop	
  3464  0009B1   89BB(2)  	JMP	D_B_B_Store
  3465  0009B2             D_B_B_4bit:
  3466  0009B2   0982(1)  	RRCM	R
  3467  0009B3   096A(1)  	RRCM	Result
  3468  0009B4   0982(1)  	RRCM	R
  3469  0009B5   096A(1)  	RRCM	Result	
  3470  0009B6   1660(1+S)  	INCMS	BitNum+0
  3471  0009B7   1660(1+S)  	INCMS	BitNum+0
  3472  0009B8   2661(1+S)  	DECMS	BitNum+1		
  3473  0009B9   2661(1+S)  	DECMS	BitNum+1
  3474  0009BA   89A0(2)  	JMP	D_B_B_Loop
  3475  0009BB             D_B_B_Store:
  3476  0009BB   CE94(2)  	CALL	Set_LibAddr
  3477  0009BC   2E6A(1)  	B0MOV	A,Result
  3478  0009BD   2FE7(1)  	B0MOV	@YZ,A	
  3479  0009BE   CE6C(2)  	CALL	INC_LibAddr
  3480  0009BF   899C(2)  	JMP	Decode_By_Bit_Again		
  3481  0009C0             D_B_B_End:
  3482  0009C0   0E00(2)  	RET	
  3483  0009C1             
  3484  0009C1             D_B_B_Finish:
  3485  0009C1   2E61(1)          B0MOV   A,BitNum+1
  3486  0009C2   0608(1+S)          CMPRS   A,#8
  3487  0009C3   89C5(2)          JMP     $+2
  3488  0009C4   89C0(2)          JMP     D_B_B_End
  3489  0009C5             D_B_B_F_Loop:        
  3490  0009C5   096A(1)          RRCM    Result
  3491  0009C6   2661(1+S)          DECMS   BitNum+1
  3492  0009C7   89C5(2)          JMP     D_B_B_F_Loop
  3493  0009C8   CE94(2)  	CALL	Set_LibAddr
  3494  0009C9   2E6A(1)  	B0MOV	A,Result
  3495  0009CA   2FE7(1)  	B0MOV	@YZ,A	
  3496  0009CB   CE6C(2)  	CALL	INC_LibAddr
  3497  0009CC   0E00(2)  	RET
  3498  0009CD             ;****************************************************************************
  3499  0009CD             ;程序功能:	直接解码
  3500  0009CD             ;输入参数:	地址
  3501  0009CD             ;输出参数:	
  3502  0009CD             ;堆栈层数:	1层	
  3503  0009CD             ;****************************************************************************	
  3504  0009CD             Direct_Decode:	
  3505  0009CD   3326(1)  	B0MOV	Z,#LrnAddr$L
  3506  0009CE   3401(1)  	B0MOV	Y,#LrnAddr$M
  3507  0009CF   CE80(2)  	CALL	BackUp_CapAddr		;载入合并后的数据地址
  3508  0009D0   3324(1)  	B0MOV	Z,#Data_Index$L
  3509  0009D1   3400(1)  	B0MOV	Y,#Data_Index$M		
  3510  0009D2   CE8A(2)  	CALL	BackUp_LibAddr		;载入解码存储的数据位置
  3511  0009D3   2D02(1)  	MOV	A,#2
  3512  0009D4   2F7E(1)  	B0MOV	Number,A
  3513  0009D5             D_D_Again:	
  3514  0009D5   CE99(2)  	CALL	Set_CapAddr
  3515  0009D6   2EE7(1)  	B0MOV	A,@YZ
  3516  0009D7   2F39(1)  	B0MOV	Temp+0,A
  3517  0009D8   CE71(2)  	CALL	INC_CapAddr
  3518  0009D9   CE94(2)  	CALL	Set_LibAddr
  3519  0009DA   2E39(1)  	B0MOV	A,Temp+0
  3520  0009DB   2FE7(1)  	B0MOV	@YZ,A
  3521  0009DC   CE5B(2)  	CALL	INC_YZ
  3522  0009DD   CE8A(2)  	CALL	BackUp_LibAddr		;存入引导电平数据
  3523  0009DE   CE85(2)  	CALL	BackUp_BakAddr		;保留描述数据长度的数据地址
  3524  0009DF   CE6C(2)  	CALL	INC_LibAddr
  3525  0009E0   C99A(2)  	CALL	Decode_By_Bit
  3526  0009E1   7886(1+S)  	B0BTS1	FZ
  3527  0009E2   89ED(2)  	JMP	D_D_End
  3528  0009E3   CE9E(2)  	CALL	Set_BakAddr
  3529  0009E4   2E60(1)  	B0MOV	A,BitNum+0
  3530  0009E5   2FE7(1)  	B0MOV	@YZ,A			;存入数据长度
  3531  0009E6   CE94(2)  	CALL	Set_LibAddr		
  3532  0009E7   2E39(1)  	B0MOV	A,Temp+0
  3533  0009E8   2FE7(1)  	B0MOV	@YZ,A			;存入停止位电平数据
  3534  0009E9   CE6C(2)  	CALL	INC_LibAddr
  3535  0009EA   267E(1+S)  	DECMS	Number
  3536  0009EB   89D5(2)  	JMP	D_D_Again	
  3537  0009EC   0E00(2)  	RET
  3538  0009ED             D_D_End:
  3539  0009ED   CE9E(2)  	CALL	Set_BakAddr
  3540  0009EE   2E60(1)  	B0MOV	A,BitNum+0
  3541  0009EF   2FE7(1)  	B0MOV	@YZ,A			;存入数据长度
  3542  0009F0   CE94(2)  	CALL	Set_LibAddr
  3543  0009F1   2E39(1)  	B0MOV	A,Temp+0
  3544  0009F2   2FE7(1)  	B0MOV	@YZ,A	
  3545  0009F3   0E00(2)  	RET
  3546  0009F4             	
  3547  0009F4             ;****************************************************************************
  3548  0009F4             ;程序功能:	移动电平数据
  3549  0009F4             ;输入参数:	地址
  3550  0009F4             ;输出参数:	
  3551  0009F4             ;堆栈层数:	1层	
  3552  0009F4             ;****************************************************************************		
  3553  0009F4             Move_Level_Data:
  3554  0009F4   3300(1)  	B0MOV	Z,#LvlAddr$L
  3555  0009F5   3401(1)  	B0MOV	Y,#LvlAddr$M
  3556  0009F6   CE80(2)  	CALL	BackUp_CapAddr
  3557  0009F7   330C(1)  	B0MOV	Z,#First_Index$L
  3558  0009F8   3400(1)  	B0MOV	Y,#First_Index$M
  3559  0009F9   CE8A(2)  	CALL	BackUp_LibAddr	
  3560  0009FA   2D14(1)  	MOV	A,#20
  3561  0009FB   2F3A(1)  	B0MOV	Temp+1,A
  3562  0009FC             M_L_D_Loop:	
  3563  0009FC   CE99(2)  	CALL	Set_CapAddr
  3564  0009FD   2EE7(1)  	B0MOV	A,@YZ
  3565  0009FE   2F39(1)  	B0MOV	Temp+0,A
  3566  0009FF   CE71(2)  	CALL	INC_CapAddr
  3567  000A00   CE94(2)  	CALL	Set_LibAddr
  3568  000A01   2E39(1)  	B0MOV	A,Temp+0
  3569  000A02   2FE7(1)  	B0MOV	@YZ,A
  3570  000A03   CE6C(2)  	CALL	INC_LibAddr
  3571  000A04   263A(1+S)  	DECMS	Temp+1
  3572  000A05   89FC(2)  	JMP	M_L_D_Loop
  3573  000A06   0E00(2)  	RET
  3574  000A07             	
  3575  000A07             ;****************************************************************************
  3576  000A07             ;程序功能:	直接录制
  3577  000A07             ;输入参数:	学习数据缓存
  3578  000A07             ;输出参数:	48字节压缩学习数据
  3579  000A07             ;堆栈层数:	3层
  3580  000A07             ;内存占用:	无	
  3581  000A07             ;****************************************************************************	
  3582  000A07             Direct_Record:
  3583  000A07   CE45(2)  	CALL	Clr_RltData
  3584  000A08   2DF0(1)  	MOV	A,#0F0H
  3585  000A09   2F09(1)  	B0MOV	Format,A
  3586  000A0A   2E63(1)  	B0MOV	A,CrrBuff+0
  3587  000A0B   2F0B(1)  	B0MOV	Data+2,A		;存入载波数据低位
  3588  000A0C   2E64(1)  	B0MOV	A,CrrBuff+1
  3589  000A0D   7886(1+S)  	B0BTS1	FZ
  3590  000A0E   8A1E(2)  	JMP	D_R_Failed		;载波数据高位非0退出
  3591  000A0F   C92B(2)  	CALL	Combine_First_Index
  3592  000A10   7A86(1+S)  	B0BTS1	FC
  3593  000A11   8A1E(2)  	JMP	D_R_Failed
  3594  000A12             ;	CALL	Send_LrnRam	
  3595  000A12   C965(2)  	CALL	Find_Loigc_Num
  3596  000A13   7A86(1+S)  	B0BTS1	FC
  3597  000A14   8A1E(2)  	JMP	D_R_Failed
  3598  000A15   600A(1)  	B0BCLR	Data+1.0		;设置2bit解码标记
  3599  000A16   266F(1+S)  	DECMS	CtrlData
  3600  000A17   0000(1)  	NOP
  3601  000A18   716F(1+S)  	B0BTS0	CtrlData.1
  3602  000A19   680A(1)  	B0BSET	Data+1.0		;设置4bit解码标记
  3603  000A1A             ;	CALL	Send_LrnRam	
  3604  000A1A   C9CD(2)  	CALL	Direct_Decode
  3605  000A1B             D_R_Success:
  3606  000A1B   C9F4(2)  	CALL	Move_Level_Data
  3607  000A1C             ;	CALL	Send_LrnData
  3608  000A1C   6A86(1)  	B0BSET	FC
  3609  000A1D   0E00(2)  	RET			
  3610  000A1E             D_R_Failed:
  3611  000A1E   6286(1)  	B0BCLR	FC
  3612  000A1F   0E00(2)  	RET	
  3613  000A20             	
  3614  000A20             	
  3615  000A20             
  3616  000A20             
  3617  000A20             
  3618  000A20             
  3619  000A20             
  3620  000A20             
  3621  000A20             
  3622  000A20             
  3623  000A20             
  3624  000A20             
  3625  000A20             
  3626  000A20             
  3627  000A20             	INCLUDE		.\Source\MTP.asm
  3628  000A20             ;****************************************************************************
  3629  000A20             ;程序功能:	写一个字节
  3630  000A20             ;输入参数:	MTP地址 待写入数据
  3631  000A20             ;输出参数:	无
  3632  000A20             ;堆栈层数:	0层
  3633  000A20             ;内存占用:	无
  3634  000A20             ;****************************************************************************
  3635  000A20             Write_One_Byte:
  3636  000A20   2FB4(1)  	B0MOV	MTPDB,A
  3637  000A21   2DC0(1)  	MOV	A,#11000000B		; 按字节编程
  3638  000A22   2F98(1)  	B0MOV	MTPCON,A	
  3639  000A23   6998(1)  	B0BSET	MTP_PG			; MTP编程功能开启，开始写入数据
  3640  000A24   7198(1+S)  	B0BTS0	MTP_PG
  3641  000A25   8A24(2)  	JMP	$-1			; 等待字节编程完成，此位自动清零
  3642  000A26   6998(1)  	B0BSET	MTP_PG			; MTP编程功能开启，开始写入数据
  3643  000A27   7198(1+S)  	B0BTS0	MTP_PG
  3644  000A28   8A27(2)  	JMP	$-1			; 等待字节编程完成，此位自动清零	
  3645  000A29             Write_Byte_Finish:
  3646  000A29   0E00(2)  	RET
  3647  000A2A             
  3648  000A2A             ;****************************************************************************
  3649  000A2A             ;程序功能:	写一页数据
  3650  000A2A             ;输入参数:	数据缓冲地址，MTP地址，数据长度
  3651  000A2A             ;输出参数:	无
  3652  000A2A             ;堆栈层数:	1层
  3653  000A2A             ;内存占用:	无
  3654  000A2A             ;****************************************************************************
  3655  000A2A             Write_Page_Data:
  3656  000A2A   2D10(1)  	MOV	A,#16
  3657  000A2B   2F39(1)  	B0MOV	Temp+0,A
  3658  000A2C             Write_Pages_Data:	
  3659  000A2C   2E71(1)  	B0MOV	A,DstAddr+0
  3660  000A2D   2F75(1)  	B0MOV	MTPAddr+0,A
  3661  000A2E   2E72(1)  	B0MOV	A,DstAddr+1
  3662  000A2F   2F76(1)  	B0MOV	MTPAddr+1,A	
  3663  000A30   2E73(1)  	B0MOV	A,SrcAddr+0
  3664  000A31   2F83(1)  	B0MOV	Z,A
  3665  000A32   2E74(1)  	B0MOV	A,SrcAddr+1
  3666  000A33   2F84(1)  	B0MOV	Y,A			; 设置源地址
  3667  000A34             Erase_Page:	
  3668  000A34   2E75(1)  	B0MOV	A,MTPAddr+0
  3669  000A35   2FA8(1)  	B0MOV	MTPADL,A
  3670  000A36   2E76(1)  	B0MOV	A,MTPAddr+1
  3671  000A37   2FA7(1)  	B0MOV	MTPADH,A		; 设置MTP地址
  3672  000A38   2D5A(1)  	MOV	A,#05AH
  3673  000A39   2FCC(1)  	B0MOV	WDTR,A			; 清除看门狗定时器	
  3674  000A3A   6A98(1)  	B0BSET	MTP_STE
  3675  000A3B   7298(1+S)  	B0BTS0	MTP_STE
  3676  000A3C   8A3B(2)  	JMP	$-1			; 页擦除
  3677  000A3D   6A98(1)  	B0BSET	MTP_STE
  3678  000A3E   7298(1+S)  	B0BTS0	MTP_STE
  3679  000A3F   8A3E(2)  	JMP	$-1			; 页擦除
  3680  000A40   8A4B(2)  	JMP	Write_Data_Continue
  3681  000A41             
  3682  000A41             Write_Page_Loop:
  3683  000A41   2E75(1)  	B0MOV	A,MTPAddr+0
  3684  000A42   1BA8(1)  	XOR	A,MTPADL
  3685  000A43   2AF0(1)  	AND	A,#0xF0
  3686  000A44   7886(1+S)  	B0BTS1	FZ
  3687  000A45   8A34(2)  	JMP	Erase_Page
  3688  000A46   2E76(1)  	B0MOV	A,MTPAddr+1
  3689  000A47   1BA7(1)  	XOR	A,MTPADH
  3690  000A48   2A01(1)  	AND	A,#0x01
  3691  000A49   7886(1+S)  	B0BTS1	FZ
  3692  000A4A   8A34(2)  	JMP	Erase_Page	
  3693  000A4B             Write_Data_Continue:	
  3694  000A4B   2E75(1)  	B0MOV	A,MTPAddr+0
  3695  000A4C   2FA8(1)  	B0MOV	MTPADL,A
  3696  000A4D   2E76(1)  	B0MOV	A,MTPAddr+1
  3697  000A4E   2FA7(1)  	B0MOV	MTPADH,A		; 设置MTP地址
  3698  000A4F   2EE7(1)  	B0MOV	A,@YZ
  3699  000A50   CA20(2)  	CALL	Write_One_Byte
  3700  000A51   CE5B(2)  	CALL	INC_YZ
  3701  000A52   CE76(2)  	CALL	INC_MTPAddr
  3702  000A53   2639(1+S)  	DECMS	Temp+0
  3703  000A54   8A41(2)  	JMP	Write_Page_Loop
  3704  000A55   0E00(2)  	RET
  3705  000A56             
  3706  000A56             ;****************************************************************************
  3707  000A56             ;程序功能:	读一个字节
  3708  000A56             ;输入参数:	MTP地址
  3709  000A56             ;输出参数:	将MTP对应地址的数据读取到ACC中
  3710  000A56             ;堆栈层数:	0层
  3711  000A56             ;内存占用:	无
  3712  000A56             ;****************************************************************************
  3713  000A56             ;??????????规格书里说置一之后立即读取数据 存疑！有待查证
  3714  000A56             Read_One_Byte:
  3715  000A56   6898(1)  	B0BSET	MTP_RD
  3716  000A57   0000(1)  	NOP
  3717  000A58   0000(1)  	NOP
  3718  000A59   0000(1)  	NOP
  3719  000A5A   0000(1)  	NOP			; 保险起见，延时1us
  3720  000A5B   2EB4(1)  	B0MOV	A,MTPDB
  3721  000A5C   0E00(2)  	RET
  3722  000A5D             
  3723  000A5D             ;****************************************************************************
  3724  000A5D             ;程序功能:	读一页数据
  3725  000A5D             ;输入参数:	数据缓冲地址，MTP地址，数据长度
  3726  000A5D             ;输出参数:	无
  3727  000A5D             ;堆栈层数:	1层
  3728  000A5D             ;内存占用:	无
  3729  000A5D             ;****************************************************************************
  3730  000A5D             Read_Page_Data:
  3731  000A5D   2D10(1)  	MOV	A,#16
  3732  000A5E   2F39(1)  	B0MOV	Temp+0,A
  3733  000A5F             Read_Pages_Data:	
  3734  000A5F   2E73(1)  	B0MOV	A,SrcAddr+0
  3735  000A60   2F75(1)  	B0MOV	MTPAddr+0,A
  3736  000A61   2E74(1)  	B0MOV	A,SrcAddr+1
  3737  000A62   2F76(1)  	B0MOV	MTPAddr+1,A		; 设置源地址
  3738  000A63   2E71(1)  	B0MOV	A,DstAddr+0
  3739  000A64   2F83(1)  	B0MOV	Z,A
  3740  000A65   2E72(1)  	B0MOV	A,DstAddr+1
  3741  000A66   2F84(1)  	B0MOV	Y,A			; 设置目的地址
  3742  000A67             Read_Page_Loop:
  3743  000A67   2E75(1)  	B0MOV	A,MTPAddr+0
  3744  000A68   2FA8(1)  	B0MOV	MTPADL,A
  3745  000A69   2E76(1)  	B0MOV	A,MTPAddr+1
  3746  000A6A   2FA7(1)  	B0MOV	MTPADH,A		; 设置MTP地址
  3747  000A6B   CA56(2)  	CALL	Read_One_Byte
  3748  000A6C   2FE7(1)  	B0MOV	@YZ,A
  3749  000A6D   CE5B(2)  	CALL	INC_YZ
  3750  000A6E   CE76(2)  	CALL	INC_MTPAddr
  3751  000A6F   2639(1+S)  	DECMS	Temp+0
  3752  000A70   8A67(2)  	JMP	Read_Page_Loop
  3753  000A71   0E00(2)  	RET
  3754  000A72             
  3755  000A72             ;****************************************************************************
  3756  000A72             ;程序功能:	设置学习数据地址
  3757  000A72             ;输入参数:	学习按键指针
  3758  000A72             ;输出参数:	无
  3759  000A72             ;堆栈层数:	0层
  3760  000A72             ;内存占用:	无
  3761  000A72             ;****************************************************************************
  3762  000A72             Lrn_Addr_List:
  3763  000A72   0000(1)  DW	48*0
  3764  000A73   0030(1)  DW	48*1
  3765  000A74   0060(1)  DW	48*2
  3766  000A75   0090(1)  DW	48*3
  3767  000A76   00C0(1)  DW	48*4
  3768  000A77   00F0(1)  DW	48*5
  3769  000A78   0120(1)  DW	48*6
  3770  000A79   0150(1)  DW	48*7
  3771  000A7A   0180(1)  DW	48*8
  3772  000A7B   01B0(1)  DW	48*9
  3773  000A7C             
  3774  000A7C             W_Learn_Addr:
  3775  000A7C   2D09(1)  	MOV	A,#RstAddr$L
  3776  000A7D   2F73(1)  	B0MOV	SrcAddr+0,A
  3777  000A7E   2D00(1)  	MOV	A,#RstAddr$M
  3778  000A7F   2F74(1)  	B0MOV	SrcAddr+1,A		; 源地址
  3779  000A80             
  3780  000A80   2D72(1)  	MOV	A,#Lrn_Addr_List$L
  3781  000A81   127F(1)  	ADD	A,Pointer
  3782  000A82   2F83(1)  	B0MOV	Z,A
  3783  000A83   2D0A(1)  	MOV	A,#Lrn_Addr_List$M
  3784  000A84   1006(1)  	ADC	A,Zero
  3785  000A85   2F84(1)  	B0MOV	Y,A
  3786  000A86   0D00(2)  	MOVC
  3787  000A87   2F71(1)  	B0MOV	DstAddr+0,A
  3788  000A88   2E82(1)  	B0MOV	A,R
  3789  000A89   2F72(1)  	B0MOV	DstAddr+1,A			
  3790  000A8A   0E00(2)  	RET
  3791  000A8B             
  3792  000A8B             R_Learn_Addr:
  3793  000A8B   2D09(1)  	MOV	A,#RstAddr$L
  3794  000A8C   2F71(1)  	B0MOV	DstAddr+0,A
  3795  000A8D   2D00(1)  	MOV	A,#RstAddr$M
  3796  000A8E   2F72(1)  	B0MOV	DstAddr+1,A		; 目的地址
  3797  000A8F             
  3798  000A8F   2D72(1)  	MOV	A,#Lrn_Addr_List$L
  3799  000A90   127F(1)  	ADD	A,Pointer
  3800  000A91   2F83(1)  	B0MOV	Z,A
  3801  000A92   2D0A(1)  	MOV	A,#Lrn_Addr_List$M
  3802  000A93   1006(1)  	ADC	A,Zero
  3803  000A94   2F84(1)  	B0MOV	Y,A
  3804  000A95   0D00(2)  	MOVC
  3805  000A96   2F73(1)  	B0MOV	SrcAddr+0,A
  3806  000A97   2E82(1)  	B0MOV	A,R
  3807  000A98   2F74(1)  	B0MOV	SrcAddr+1,A	
  3808  000A99   0E00(2)  	RET
  3809  000A9A             
  3810  000A9A             ;****************************************************************************
  3811  000A9A             ;程序功能:	设置设置数据地址
  3812  000A9A             ;输入参数:
  3813  000A9A             ;输出参数:	无
  3814  000A9A             ;堆栈层数:	0层
  3815  000A9A             ;内存占用:	无
  3816  000A9A             ;****************************************************************************
  3817  E 000001F0         SMTPAddr		EQU	31*16
  3818  000A9A             
  3819  000A9A             W_Set_Addr:
  3820  000A9A   2D08(1)  	MOV	A,#SetAddr$L
  3821  000A9B   2F73(1)  	B0MOV	SrcAddr+0,A
  3822  000A9C   2D00(1)  	MOV	A,#SetAddr$M
  3823  000A9D   2F74(1)  	B0MOV	SrcAddr+1,A		; 源地址
  3824  000A9E   2DF0(1)  	MOV	A,#SMTPAddr$L
  3825  000A9F   2F71(1)  	B0MOV	DstAddr+0,A
  3826  000AA0   2D01(1)  	MOV	A,#SMTPAddr$M
  3827  000AA1   2F72(1)  	B0MOV	DstAddr+1,A		; 设置目的地址
  3828  000AA2   0E00(2)  	RET
  3829  000AA3             
  3830  000AA3             R_Set_Addr:
  3831  000AA3   2D08(1)  	MOV	A,#SetAddr$L
  3832  000AA4   2F71(1)  	B0MOV	DstAddr+0,A
  3833  000AA5   2D00(1)  	MOV	A,#SetAddr$M
  3834  000AA6   2F72(1)  	B0MOV	DstAddr+1,A		; 目的地址
  3835  000AA7             
  3836  000AA7   2DF0(1)  	MOV	A,#SMTPAddr$L
  3837  000AA8   2F73(1)  	B0MOV	SrcAddr+0,A
  3838  000AA9   2D01(1)  	MOV	A,#SMTPAddr$M
  3839  000AAA   2F74(1)  	B0MOV	SrcAddr+1,A		; 源地址
  3840  000AAB   0E00(2)  	RET
  3841  000AAC             
  3842  000AAC             ;****************************************************************************
  3843  000AAC             ;程序功能:	存储学习数据
  3844  000AAC             ;输入参数:	数据缓冲，数据长度
  3845  000AAC             ;输出参数:	无
  3846  000AAC             ;堆栈层数:	4层
  3847  000AAC             ;内存占用:	无
  3848  000AAC             ;****************************************************************************
  3849  000AAC             Store_Learn_Data:
  3850  000AAC   CA7C(2)  	CALL	W_Learn_Addr
  3851  000AAD   2D30(1)  	MOV	A,#48
  3852  000AAE   2F39(1)  	B0MOV	Temp+0,A
  3853  000AAF   CA2C(2)  	CALL	Write_Pages_Data
  3854  000AB0   0E00(2)  	RET
  3855  000AB1             
  3856  000AB1             ;****************************************************************************
  3857  000AB1             ;程序功能:	存储设置数据
  3858  000AB1             ;输入参数:	数据缓冲，数据长度
  3859  000AB1             ;输出参数:	无
  3860  000AB1             ;堆栈层数:	4层
  3861  000AB1             ;内存占用:	无
  3862  000AB1             ;****************************************************************************
  3863  000AB1             Store_Set_Data:
  3864  000AB1   CA9A(2)  	CALL	W_Set_Addr
  3865  000AB2   CA2A(2)  	CALL	Write_Page_Data
  3866  000AB3   0E00(2)  	RET
  3867  000AB4             
  3868  000AB4             ;****************************************************************************
  3869  000AB4             ;程序功能:	读取学习数据
  3870  000AB4             ;输入参数:	数据缓冲，数据长度
  3871  000AB4             ;输出参数:	无
  3872  000AB4             ;堆栈层数:	3层
  3873  000AB4             ;内存占用:	无
  3874  000AB4             ;****************************************************************************
  3875  000AB4             Read_Learn_Data:
  3876  000AB4   CA8B(2)  	CALL	R_Learn_Addr
  3877  000AB5   2D30(1)  	MOV	A,#48
  3878  000AB6   2F39(1)  	B0MOV	Temp+0,A	
  3879  000AB7   CA5F(2)  	CALL	Read_Pages_Data
  3880  000AB8   0E00(2)  	RET
  3881  000AB9             
  3882  000AB9             
  3883  000AB9             ;****************************************************************************
  3884  000AB9             ;程序功能:	读取设置数据
  3885  000AB9             ;输入参数:	数据缓冲，数据长度
  3886  000AB9             ;输出参数:	无
  3887  000AB9             ;堆栈层数:	3层
  3888  000AB9             ;内存占用:	无
  3889  000AB9             ;****************************************************************************
  3890  000AB9             Read_Set_Data:
  3891  000AB9   CAA3(2)  	CALL	R_Set_Addr
  3892  000ABA   CA5D(2)  	CALL	Read_Page_Data
  3893  000ABB   0E00(2)  	RET
  3894  000ABC             
  3895  000ABC             
  3896  000ABC             
  3897  000ABC             	INCLUDE		.\Source\InitialIRData.asm
  3898  000ABC             ;****************************************************************************
  3899  000ABC             ;程序功能:	初始化发码数据
  3900  000ABC             ;输入参数:	无
  3901  000ABC             ;输出参数:	无
  3902  000ABC             ;堆栈层数:	1层
  3903  000ABC             ;内存占用:	无
  3904  000ABC             ;****************************************************************************
  3905  000ABC             //
  3906  000ABC             Initial_Wave2:
  3907  000ABC   6D00(1)  	B0BSET	RFlag.5
  3908  000ABD   8ABF(2)  	JMP	Initial_Com
  3909  000ABE             Initial_Wave1:
  3910  000ABE   6500(1)  	B0BCLR	RFlag.5
  3911  000ABF             Initial_Com:	
  3912  000ABF   CE3D(2)  	CALL	Clr_Bank12
  3913  000AC0   2DD9(1)  	MOV	A,#Format_List$L
  3914  000AC1   1209(1)  	ADD	A,Format
  3915  000AC2   2F83(1)  	B0MOV	Z,A
  3916  000AC3   2D00(1)  	MOV	A,#Format_List$M
  3917  000AC4   1006(1)  	ADC	A,Zero
  3918  000AC5   2F84(1)  	B0MOV	Y,A				; YZ寄存器作为ROM指针指向格式列表中对应格式的地址
  3919  000AC6   0D00(2)  	MOVC
  3920  000AC7   2F4C(1)  	B0MOV	FmtAddr+0,A
  3921  000AC8   2E82(1)  	B0MOV	A,R
  3922  000AC9   2F4D(1)  	B0MOV	FmtAddr+1,A			; 保存每个格式库的首地址
  3923  000ACA             
  3924  000ACA   2E4C(1)  	B0MOV	A,FmtAddr+0
  3925  000ACB   2F83(1)  	B0MOV	Z,A
  3926  000ACC   2E4D(1)  	B0MOV	A,FmtAddr+1
  3927  000ACD   2F84(1)  	B0MOV	Y,A				; YZ寄存器指向对应格式的格式库
  3928  000ACE   0D00(2)  	MOVC
  3929  000ACF   2F48(1)  	B0MOV	DecPara+0,A
  3930  000AD0   2AF0(1)  	AND	A,#0XF0
  3931  000AD1   2F6B(1)  	B0MOV	MaskCode,A
  3932  000AD2   276B(1)  	SWAPM	MaskCode			; 获取取值掩码
  3933  000AD3   2E6B(1)  	B0MOV	A,MaskCode
  3934  000AD4   1401(1)  	ADD	A,#1
  3935  000AD5   2F62(1)  	B0MOV	BitNum+2,A			; 根据掩码计算出逻辑位数
  3936  000AD6   6286(1)  	B0BCLR	FC
  3937  000AD7   0862(1)  	RRC	BitNum+2
  3938  000AD8   2F7A(1)  	B0MOV	BitWidth,A
  3939  000AD9   0608(1+S)  	CMPRS	A,#8
  3940  000ADA   8ADD(2)  	JMP	$+3
  3941  000ADB   2D04(1)  	MOV	A,#4
  3942  000ADC   2F7A(1)  	B0MOV	BitWidth,A			; 根据逻辑位数计算出存储位宽
  3943  000ADD   2E82(1)  	B0MOV	A,R
  3944  000ADE   2F49(1)  	B0MOV	DecPara+1,A
  3945  000ADF   2A0F(1)  	AND	A,#0X0F
  3946  000AE0   2F6D(1)  	B0MOV	LogicNum,A			; 获取逻辑位所定义的电平数
  3947  000AE1   1749(1)  	SWAP	DecPara+1
  3948  000AE2   2F7B(1)  	B0MOV	SendFlag,A			; 获取发码标志位
  3949  000AE3   CE5B(2)  	CALL	INC_YZ
  3950  000AE4   0D00(2)  	MOVC
  3951  000AE5   2F4A(1)  	B0MOV	DecPara+2,A
  3952  000AE6   2E82(1)  	B0MOV	A,R
  3953  000AE7   2A0F(1)  	AND	A,#0FH
  3954  000AE8   2F69(1)  	B0MOV	CrrPoint,A			; 加载解码参数
  3955  000AE9   1782(1)  	SWAP	R
  3956  000AEA   2A0F(1)  	AND	A,#0FH
  3957  000AEB   2F4B(1)  	B0MOV	DecPara+3,A
  3958  000AEC   C73B(2)  	CALL	Find_Ctrl_Addr
  3959  000AED   7D00(1+S)  	B0BTS1	RFlag.5
  3960  000AEE   8AF6(2)  	JMP	Is_Wave1
  3961  000AEF   CE8F(2)  	CALL	Set_CtrlAddr
  3962  000AF0   CE67(2)  	CALL	INC_CtrlAddr
  3963  000AF1   0D00(2)  	MOVC
  3964  000AF2   2E82(1)  	B0MOV	A,R
  3965  000AF3   2AF0(1)  	AND	A,#0F0H
  3966  000AF4   0690(1+S)  	CMPRS	A,#090H
  3967  000AF5   8AEF(2)  	JMP	$-6				; 查询wave2控制数据首地址
  3968  000AF6             Is_Wave1:
  3969  000AF6   2D26(1)  	MOV	A,#LrnAddr$L
  3970  000AF7   2F4E(1)  	B0MOV	CapAddr+0,A
  3971  000AF8   2D01(1)  	MOV	A,#LrnAddr$M
  3972  000AF9   2F4F(1)  	B0MOV	CapAddr+1,A			; 初始化RAM数据地址
  3973  000AFA             Initial_Data_Loop:
  3974  000AFA   CE8F(2)  	CALL	Set_CtrlAddr
  3975  000AFB   0D00(2)  	MOVC
  3976  000AFC   2F6F(1)  	B0MOV	CtrlData,A
  3977  000AFD   2A0F(1)  	AND	A,#0FH
  3978  000AFE   2F70(1)  	B0MOV	DatPoint,A
  3979  000AFF   276F(1)  	SWAPM	CtrlData			; 获取电平指针初值
  3980  000B00   2E82(1)  	B0MOV	A,R
  3981  000B01   2A0F(1)  	AND	A,#00FH
  3982  000B02   2F60(1)  	B0MOV	BitNum+0,A
  3983  000B03   2F61(1)  	B0MOV	BitNum+1,A			; 获取解码位数
  3984  000B04   1782(1)  	SWAP	R
  3985  000B05   2A0F(1)  	AND	A,#0FH
  3986  000B06             	@JMP_A	16
  3987  000B06   03CE(1)  	b0add PCl ,a
  3988  000B07   8B17(2)  	JMP	Initial_Zero_Data		;0
  3989  000B08   8B1A(2)  	JMP	Initial_One_Data        	;1
  3990  000B09   8B1D(2)  	JMP	Initial_User_Data        	;2
  3991  000B0A   8B21(2)  	JMP	Initial_NUser_Data		;3
  3992  000B0B   8B26(2)  	JMP	Initial_Key_Data         	;4
  3993  000B0C   8B2A(2)  	JMP	Initial_NKey_Data        	;5
  3994  000B0D   8B2F(2)  	JMP	Initial_Toggle_Data      	;6
  3995  000B0E   8B17(2)  	JMP	Initial_Tail_Data        	;7
  3996  000B0F   8B17(2)  	JMP	Initial_Zero_Data        	;8
  3997  000B10   8B32(2)  	JMP	Initial_Stop_Time1        	;9
  3998  000B11   8B32(2)  	JMP	Initial_Stop_Time2        	;10
  3999  000B12   8B40(2)  	JMP	Initial_Run_Error        	;11
  4000  000B13   8B40(2)  	JMP	Initial_Run_Error        	;12
  4001  000B14   8B40(2)  	JMP	Initial_Run_Error        	;13
  4002  000B15   8B40(2)  	JMP	Initial_Run_Error        	;14
  4003  000B16   8B40(2)  	JMP	Initial_Run_Error        	;15
  4004  000B17             
  4005  000B17             Initial_Zero_Data:
  4006  000B17             Initial_Tail_Data:
  4007  000B17   2D00(1)  	MOV	A,#0x00
  4008  000B18   2F6A(1)  	B0MOV	Result,A
  4009  000B19   8B42(2)  	JMP	Initial_Wave_Data
  4010  000B1A             Initial_One_Data:
  4011  000B1A   2DFF(1)  	MOV	A,#0xFF
  4012  000B1B   2F6A(1)  	B0MOV	Result,A
  4013  000B1C   8B42(2)  	JMP	Initial_Wave_Data
  4014  000B1D             Initial_User_Data:
  4015  000B1D   C912(2)  	CALL	Get_UsrAddr
  4016  000B1E   2EE7(1)  	B0MOV	A,@YZ
  4017  000B1F   2F6A(1)  	B0MOV	Result,A
  4018  000B20   8B42(2)  	JMP	Initial_Wave_Data
  4019  000B21             Initial_NUser_Data:
  4020  000B21   C912(2)  	CALL	Get_UsrAddr
  4021  000B22   2EE7(1)  	B0MOV	A,@YZ
  4022  000B23   1DFF(1)  	XOR	A,#0FFH
  4023  000B24   2F6A(1)  	B0MOV	Result,A
  4024  000B25   8B42(2)  	JMP	Initial_Wave_Data
  4025  000B26             Initial_Key_Data:
  4026  000B26   C91A(2)  	CALL	Get_DatAddr
  4027  000B27   2EE7(1)  	B0MOV	A,@YZ
  4028  000B28   2F6A(1)  	B0MOV	Result,A
  4029  000B29   8B42(2)  	JMP	Initial_Wave_Data
  4030  000B2A             Initial_NKey_Data:
  4031  000B2A   C91A(2)  	CALL	Get_DatAddr
  4032  000B2B   2EE7(1)  	B0MOV	A,@YZ
  4033  000B2C   1DFF(1)  	XOR	A,#0FFH
  4034  000B2D   2F6A(1)  	B0MOV	Result,A
  4035  000B2E   8B42(2)  	JMP	Initial_Wave_Data
  4036  000B2F             Initial_Toggle_Data:
  4037  000B2F   2E07(1)  	B0MOV	A,Toggle
  4038  000B30   2F6A(1)  	B0MOV	Result,A
  4039  000B31   8B42(2)  	JMP	Initial_Wave_Data
  4040  000B32             
  4041  000B32             Initial_Stop_Time1:
  4042  000B32             Initial_Stop_Time2:
  4043  000B32   0D00(2)  	MOVC
  4044  000B33   2F77(1)  	B0MOV	Length+0,A
  4045  000B34   2E82(1)  	B0MOV	A,R
  4046  000B35   2A0F(1)  	AND	A,#0FH
  4047  000B36   2F78(1)  	B0MOV	Length+1,A			; 获取帧长
  4048  000B37   CE99(2)  	CALL	Set_CapAddr
  4049  000B38   2D00(1)  	MOV	A,#0
  4050  000B39   2FE7(1)  	B0MOV	@YZ,A
  4051  000B3A   CE5B(2)  	CALL	INC_YZ
  4052  000B3B   2D00(1)  	MOV	A,#0
  4053  000B3C   2FE7(1)  	B0MOV	@YZ,A
  4054  000B3D   CB76(2)  	CALL	Data_Process
  4055  000B3E   6D00(1)  	B0BSET	RFlag.5
  4056  000B3F   0E00(2)  	RET
  4057  000B40             
  4058  000B40             Initial_Run_Error:
  4059  000B40   6500(1)  	B0BCLR	RFlag.5
  4060  000B41   0E00(2)  	RET
  4061  000B42             
  4062  000B42             Initial_Wave_Data:
  4063  000B42   CB45(2)  	CALL	Initial_Wave
  4064  000B43   CE67(2)  	CALL	INC_CtrlAddr
  4065  000B44   8AFA(2)  	JMP	Initial_Data_Loop
  4066  000B45             ///
  4067  000B45             ;****************************************************************************
  4068  000B45             ;程序功能:	按位将电平数据填充到RAM中
  4069  000B45             ;输入参数:	无
  4070  000B45             ;输出参数:	无
  4071  000B45             ;堆栈层数:	1层
  4072  000B45             ;内存占用:	无
  4073  000B45             ;****************************************************************************
  4074  000B45             //
  4075  000B45             Initial_Wave:
  4076  000B45   2E6A(1)  	B0MOV	A,Result
  4077  000B46   286B(1)  	AND	A,MaskCode
  4078  000B47   2F39(1)  	B0MOV	Temp+0,A			; 此步获取bit数据
  4079  000B48   2D00(1)  	MOV	A,#0
  4080  000B49   2F3A(1)  	B0MOV	Temp+1,A
  4081  000B4A   2E6D(1)  	B0MOV	A,LogicNum
  4082  000B4B   2F3B(1)  	B0MOV	Temp+2,A
  4083  000B4C   2E3A(1)  	B0MOV	A,Temp+1
  4084  000B4D   1239(1)  	ADD	A,Temp+0
  4085  000B4E   2F3A(1)  	B0MOV	Temp+1,A
  4086  000B4F   263B(1+S)  	DECMS	Temp+2
  4087  000B50   8B4C(2)  	JMP	$-4				; 将bit数据与逻辑位数相乘获得电平数据偏移量
  4088  000B51   2E6F(1)  	B0MOV	A,CtrlData
  4089  000B52   2A0F(1)  	AND	A,#0FH
  4090  000B53   123A(1)  	ADD	A,Temp+1			; 控制数据最大15，Temp+1最大32 两者相加不会溢出
  4091  000B54   124C(1)  	ADD	A,FmtAddr+0
  4092  000B55   2F83(1)  	B0MOV	Z,A
  4093  000B56   2D00(1)  	MOV	A,#0
  4094  000B57   104D(1)  	ADC	A,FmtAddr+1
  4095  000B58   2F84(1)  	B0MOV	Y,A
  4096  000B59   CE8A(2)  	CALL	BackUp_LibAddr
  4097  000B5A             Initial_Bit_Loop:
  4098  000B5A   CE94(2)  	CALL	Set_LibAddr
  4099  000B5B   0D00(2)  	MOVC
  4100  000B5C   2F39(1)  	B0MOV	Temp+0,A
  4101  000B5D   2E82(1)  	B0MOV	A,R
  4102  000B5E   2F3A(1)  	B0MOV	Temp+1,A			; 读取库中的电平数据
  4103  000B5F             
  4104  000B5F   CE6C(2)  	CALL	INC_LibAddr
  4105  000B60   CE99(2)  	CALL	Set_CapAddr
  4106  000B61   2E3A(1)  	B0MOV	A,Temp+1
  4107  000B62   2ABF(1)  	AND	A,#0xBF				; 去除逻辑电平停止标志位
  4108  000B63   2FE7(1)  	B0MOV	@YZ,A
  4109  000B64   CE71(2)  	CALL	INC_CapAddr
  4110  000B65   CE99(2)  	CALL	Set_CapAddr
  4111  000B66   2E39(1)  	B0MOV	A,Temp+0
  4112  000B67   2FE7(1)  	B0MOV	@YZ,A				; 将库中的电平数据保存到RAM中
  4113  000B68   CE71(2)  	CALL	INC_CapAddr
  4114  000B69   763A(1+S)  	B0BTS0	Temp+1.6
  4115  000B6A   8B6C(2)  	JMP	Initial_Bit_Finish
  4116  000B6B   8B5A(2)  	JMP	Initial_Bit_Loop
  4117  000B6C             Initial_Bit_Finish:
  4118  000B6C   2E7A(1)  	B0MOV	A,BitWidth
  4119  000B6D   2F39(1)  	B0MOV	Temp,A
  4120  000B6E   096A(1)  	RRCM	Result
  4121  000B6F   2660(1+S)  	DECMS	BitNum+0
  4122  000B70   8B72(2)  	JMP	$+2				; 比特位数不为0继续运行
  4123  000B71   8B75(2)  	JMP	$+4				; 比特位数为0退出
  4124  000B72   2639(1+S)  	DECMS	Temp
  4125  000B73   8B6E(2)  	JMP	$-5				; 根据存储位宽去决定要存储几位
  4126  000B74   8B45(2)  	JMP	Initial_Wave
  4127  000B75   0E00(2)  	RET
  4128  000B76             ///
  4129  000B76             
  4130  000B76             
  4131  000B76             ;****************************************************************************
  4132  000B76             ;程序功能:	发码前处理误差
  4133  000B76             ;输入参数:	无
  4134  000B76             ;输出参数:	无
  4135  000B76             ;堆栈层数:	1层
  4136  000B76             ;内存占用:	无
  4137  000B76             ;算法实现：	按百分之一的比例进行误差修正
  4138  000B76             ;****************************************************************************
  4139  E 00000064         P_Num		EQU		100
  4140  000B76             
  4141  000B76             Data_Process:
  4142  000B76   CBAC(2)  	CALL	Calculate_StopTime
  4143  000B77   2D26(1)  	MOV	A,#LrnAddr$L
  4144  000B78   2F83(1)  	B0MOV	Z,A
  4145  000B79   2D01(1)  	MOV	A,#LrnAddr$M
  4146  000B7A   2F84(1)  	B0MOV	Y,A				; 初始化RAM数据地址
  4147  000B7B             D_P_Loop:
  4148  000B7B   2EE7(1)  	B0MOV	A,@YZ
  4149  000B7C   2F44(1)  	B0MOV	Temp+11,A
  4150  000B7D             
  4151  000B7D   CE5B(2)  	CALL	INC_YZ
  4152  000B7E             
  4153  000B7E   2EE7(1)  	B0MOV	A,@YZ
  4154  000B7F   2F43(1)  	B0MOV	Temp+10,A
  4155  000B80             
  4156  000B80   2E44(1)  	B0MOV	A,Temp+11
  4157  000B81   1843(1)  	OR	A,Temp+10
  4158  000B82   0600(1+S)  	CMPRS	A,#0
  4159  000B83   8B85(2)  	JMP	$+2
  4160  000B84   8B9D(2)  	JMP	D_P_Finish
  4161  000B85             
  4162  000B85   2E44(1)  	B0MOV	A,Temp+11
  4163  000B86   2A3F(1)  	AND	A,#3FH
  4164  000B87   2F3A(1)  	B0MOV	Temp+1,A
  4165  000B88   2E43(1)  	B0MOV	A,Temp+10
  4166  000B89   2F39(1)  	B0MOV	Temp+0,A
  4167  000B8A   2D00(1)  	MOV	A,#P_Num$M
  4168  000B8B   2F3C(1)  	B0MOV	Temp+3,A
  4169  000B8C   2D64(1)  	MOV	A,#P_Num$L
  4170  000B8D   2F3B(1)  	B0MOV	Temp+2,A
  4171  000B8E   CEF2(2)  	CALL	Div_Data			; 计算出百分之一的误差
  4172  000B8F   2E43(1)  	B0MOV	A,Temp+10
  4173  000B90   2239(1)  	SUB	A,Temp+0
  4174  000B91   2F43(1)  	B0MOV	Temp+10,A
  4175  000B92   2E44(1)  	B0MOV	A,Temp+11
  4176  000B93   203A(1)  	SBC	A,Temp+1
  4177  000B94   2F44(1)  	B0MOV	Temp+11,A			; 减去上一步计算得到的误差
  4178  000B95             
  4179  000B95   CE60(2)  	CALL	DEC_YZ				; 回溯YZ指针
  4180  000B96   2E44(1)  	B0MOV	A,Temp+11
  4181  000B97   2FE7(1)  	B0MOV	@YZ,A
  4182  000B98   CE5B(2)  	CALL	INC_YZ
  4183  000B99   2E43(1)  	B0MOV	A,Temp+10
  4184  000B9A   2FE7(1)  	B0MOV	@YZ,A
  4185  000B9B   CE5B(2)  	CALL	INC_YZ				; 将处理后的数据回填到原来的地址单元中
  4186  000B9C   8B7B(2)  	JMP	D_P_Loop
  4187  000B9D             
  4188  000B9D             D_P_Finish:
  4189  000B9D   0E00(2)  	RET
  4190  000B9E             
  4191  000B9E             
  4192  000B9E             
  4193  000B9E             Initial_Toggle:
  4194  000B9E   2E09(1)  	B0MOV	A,Format
  4195  000B9F   0616(1+S)  	CMPRS	A,#V_RCMM32
  4196  000BA0   8BAB(2)  	JMP	I_T_Next
  4197  000BA1   7007(1+S)  	B0BTS0	Toggle.0
  4198  000BA2   8BA7(2)  	JMP	I_T_Next1
  4199  000BA3   2E0C(1)  	B0MOV	A,Data+3
  4200  000BA4   2AFC(1)  	AND	A,#0FCH
  4201  000BA5   2F0C(1)  	B0MOV	Data+3,A
  4202  000BA6   0E00(2)  	RET
  4203  000BA7             I_T_Next1:
  4204  000BA7   2E0C(1)  	B0MOV	A,Data+3
  4205  000BA8   1A02(1)  	OR	A,#002H
  4206  000BA9   2F0C(1)  	B0MOV	Data+3,A
  4207  000BAA   0E00(2)  	RET	
  4208  000BAB             I_T_Next:
  4209  000BAB   0E00(2)  	RET
  4210  000BAC             
  4211  000BAC             ;****************************************************************************
  4212  000BAC             ;程序功能:	计算出停止位时间
  4213  000BAC             ;输入参数:	无
  4214  000BAC             ;输出参数:	无
  4215  000BAC             ;堆栈层数:	1层
  4216  000BAC             ;内存占用:	无
  4217  000BAC             ;****************************************************************************
  4218  000BAC             Calculate_StopTime:
  4219  000BAC   2D00(1)  	MOV	A,#0
  4220  000BAD   2F3D(1)  	B0MOV	Temp+4,A
  4221  000BAE   2F3E(1)  	B0MOV	Temp+5,A
  4222  000BAF   2D26(1)  	MOV	A,#LrnAddr$L
  4223  000BB0   2F83(1)  	B0MOV	Z,A
  4224  000BB1   2D01(1)  	MOV	A,#LrnAddr$M
  4225  000BB2   2F84(1)  	B0MOV	Y,A
  4226  000BB3   CE85(2)  	CALL	BackUp_BakAddr
  4227  000BB4             Cal_Loop:
  4228  000BB4   CE9E(2)  	CALL	Set_BakAddr
  4229  000BB5   2EE7(1)  	B0MOV	A,@YZ
  4230  000BB6   2F6A(1)  	B0MOV	Result,A
  4231  000BB7   2A3F(1)  	AND	A,#3FH
  4232  000BB8   2F3A(1)  	B0MOV	Temp+1,A
  4233  000BB9   CE5B(2)  	CALL	INC_YZ
  4234  000BBA   2EE7(1)  	B0MOV	A,@YZ
  4235  000BBB   2F39(1)  	B0MOV	Temp+0,A
  4236  000BBC   CE5B(2)  	CALL	INC_YZ
  4237  000BBD   CE85(2)  	CALL	BackUp_BakAddr
  4238  000BBE   2EE7(1)  	B0MOV	A,@YZ
  4239  000BBF   2F3C(1)  	B0MOV	Temp+3,A
  4240  000BC0   CE5B(2)  	CALL	INC_YZ
  4241  000BC1   2EE7(1)  	B0MOV	A,@YZ
  4242  000BC2   2F3B(1)  	B0MOV	Temp+2,A
  4243  000BC3   7F6A(1+S)  	B0BTS1	Result.7
  4244  000BC4   8BD2(2)  	JMP	Cal_Continue
  4245  000BC5   2E3B(1)  	B0MOV	A,Temp+2
  4246  000BC6   183C(1)  	OR	A,Temp+3
  4247  000BC7   7886(1+S)  	B0BTS1	FZ
  4248  000BC8   8BD2(2)  	JMP	Cal_Continue			; 当后一电平数据为空，当前电平数据为低电平数据时，则当前电平数据不参与发码时间计算
  4249  000BC9   CE9E(2)  	CALL	Set_BakAddr
  4250  000BCA   CE60(2)  	CALL	DEC_YZ
  4251  000BCB   CE60(2)  	CALL	DEC_YZ
  4252  000BCC   2D00(1)  	MOV	A,#0
  4253  000BCD   2FE7(1)  	B0MOV	@YZ,A
  4254  000BCE   CE5B(2)  	CALL	INC_YZ
  4255  000BCF   2D00(1)  	MOV	A,#0
  4256  000BD0   2FE7(1)  	B0MOV	@YZ,A
  4257  000BD1   8BDD(2)  	JMP	Cal_Stop			;  低电平数据之后是停止位，将低电平数据清除	
  4258  000BD2             Cal_Continue:
  4259  000BD2   2E3D(1)  	B0MOV	A,Temp+4
  4260  000BD3   1239(1)  	ADD	A,Temp+0
  4261  000BD4   2F3D(1)  	B0MOV	Temp+4,A
  4262  000BD5   2E3E(1)  	B0MOV	A,Temp+5
  4263  000BD6   103A(1)  	ADC	A,Temp+1
  4264  000BD7   2F3E(1)  	B0MOV	Temp+5,A
  4265  000BD8   2E3B(1)  	B0MOV	A,Temp+2
  4266  000BD9   183C(1)  	OR	A,Temp+3
  4267  000BDA   7086(1+S)  	B0BTS0	FZ
  4268  000BDB   8BDD(2)  	JMP	Cal_Stop			; 若电平数据为空结束发码时间计算
  4269  000BDC   8BB4(2)  	JMP	Cal_Loop
  4270  000BDD             Cal_Stop:
  4271  000BDD             
  4272  000BDD   6286(1)  	B0BCLR	FC
  4273  000BDE   093E(1)  	RRCM	Temp+5
  4274  000BDF   093D(1)  	RRCM	Temp+4
  4275  000BE0   6286(1)  	B0BCLR	FC
  4276  000BE1   093E(1)  	RRCM	Temp+5
  4277  000BE2   093D(1)  	RRCM	Temp+4
  4278  000BE3   6286(1)  	B0BCLR	FC
  4279  000BE4   093E(1)  	RRCM	Temp+5
  4280  000BE5   093D(1)  	RRCM	Temp+4				; 将4us基值改为32us基值
  4281  000BE6   6286(1)  	B0BCLR	FC
  4282  000BE7   0B77(1)  	RLCM	Length+0
  4283  000BE8   0B78(1)  	RLCM	Length+1
  4284  000BE9   6286(1)  	B0BCLR	FC
  4285  000BEA   0B77(1)  	RLCM	Length+0
  4286  000BEB   0B78(1)  	RLCM	Length+1			; 将128us基值改为32us基值
  4287  000BEC   7649(1+S)  	B0BTS0	DecPara+1.6
  4288  000BED   8BF4(2)  	JMP	Fixed_Delay
  4289  000BEE   2E77(1)  	B0MOV	A,Length+0
  4290  000BEF   223D(1)  	SUB	A,Temp+4
  4291  000BF0   2F77(1)  	B0MOV	Length+0,A
  4292  000BF1   2E78(1)  	B0MOV	A,Length+1
  4293  000BF2   203E(1)  	SBC	A,Temp+5
  4294  000BF3   2F78(1)  	B0MOV	Length+1,A			; 将帧长减去发码时间获得停止位时间
  4295  000BF4             Fixed_Delay:
  4296  000BF4             
  4297  000BF4   0E00(2)  	RET
  4298  000BF5             
  4299  000BF5             ;****************************************************************************
  4300  000BF5             ;程序功能:	初始化录制方式学习的数据
  4301  000BF5             ;输入参数:	无
  4302  000BF5             ;输出参数:	无
  4303  000BF5             ;堆栈层数:	1层
  4304  000BF5             ;内存占用:	无
  4305  000BF5             ;****************************************************************************
  4306  E 00000024         Index_Addr	EQU	Data+27
  4307  000BF5             
  4308  000BF5             Initial_Data_By_Index:	
  4309  000BF5   6286(1)  	B0BCLR	FC
  4310  000BF6   0A82(1)  	RLC	R
  4311  000BF7   140C(1)  	ADD	A,#First_Index$L
  4312  000BF8   2F83(1)  	B0MOV	Z,A
  4313  000BF9   3400(1)  	B0MOV	Y,#First_Index$M
  4314  000BFA   2EE7(1)  	B0MOV	A,@YZ
  4315  000BFB   2F39(1)  	B0MOV	Temp+0,A
  4316  000BFC   CE5B(2)  	CALL	INC_YZ
  4317  000BFD   2EE7(1)  	B0MOV	A,@YZ
  4318  000BFE   2F3A(1)  	B0MOV	Temp+1,A
  4319  000BFF   CE99(2)  	CALL	Set_CapAddr
  4320  000C00   2E3A(1)  	B0MOV	A,Temp+1
  4321  000C01   2FE7(1)  	B0MOV	@YZ,A
  4322  000C02   CE5B(2)  	CALL	INC_YZ
  4323  000C03   2E39(1)  	B0MOV	A,Temp+0
  4324  000C04   2FE7(1)  	B0MOV	@YZ,A
  4325  000C05   CE5B(2)  	CALL	INC_YZ
  4326  000C06   CE80(2)  	CALL	BackUp_CapAddr
  4327  000C07   0E00(2)  	RET
  4328  000C08             
  4329  000C08             Initial_By_2st_Index:
  4330  000C08   1420(1)  	ADD	A,#Second_Index$L
  4331  000C09   2F83(1)  	B0MOV	Z,A
  4332  000C0A   3400(1)  	B0MOV	Y,#Second_Index$M
  4333  000C0B   2EE7(1)  	B0MOV	A,@YZ				
  4334  000C0C   2F70(1)  	B0MOV	DatPoint,A	
  4335  000C0D   1770(1)  	SWAP	DatPoint
  4336  000C0E   2A0F(1)  	AND	A,#0x0F
  4337  000C0F   2F82(1)  	B0MOV	R,A
  4338  000C10   CBF5(2)  	CALL	Initial_Data_By_Index
  4339  000C11   2E70(1)  	B0MOV	A,DatPoint
  4340  000C12   2A0F(1)  	AND	A,#0x0F
  4341  000C13   2F82(1)  	B0MOV	R,A
  4342  000C14   CBF5(2)  	CALL	Initial_Data_By_Index
  4343  000C15   0E00(2)  	RET
  4344  000C16             		
  4345  000C16             Initial_Data_By_Bit:
  4346  000C16   2D08(1)  	MOV	A,#8
  4347  000C17   2F7E(1)  	B0MOV	Number,A
  4348  000C18   CE94(2)  	CALL	Set_LibAddr
  4349  000C19   2EE7(1)  	B0MOV	A,@YZ
  4350  000C1A   2F6A(1)  	B0MOV	Result,A
  4351  000C1B   CE6C(2)  	CALL	INC_LibAddr
  4352  000C1C   700A(1+S)  	B0BTS0	Data+1.0
  4353  000C1D   8C28(2)  	JMP	I_D_B_B_4bit
  4354  000C1E             I_D_B_B_2bit:	
  4355  000C1E   2E6A(1)  	B0MOV	A,Result
  4356  000C1F   2A01(1)  	AND	A,#01h
  4357  000C20   CC08(2)  	CALL	Initial_By_2st_Index
  4358  000C21   096A(1)  	RRCM	Result
  4359  000C22   2660(1+S)  	DECMS	BitNum
  4360  000C23   8C25(2)  	JMP	$+2
  4361  000C24   0E00(2)  	RET
  4362  000C25   267E(1+S)  	DECMS	Number
  4363  000C26   8C1E(2)  	JMP	I_D_B_B_2bit
  4364  000C27   8C16(2)  	JMP	Initial_Data_By_Bit		
  4365  000C28             I_D_B_B_4bit:		
  4366  000C28   2E6A(1)  	B0MOV	A,Result
  4367  000C29   2A03(1)  	AND	A,#03h
  4368  000C2A   CC08(2)  	CALL	Initial_By_2st_Index
  4369  000C2B   096A(1)  	RRCM	Result
  4370  000C2C   096A(1)  	RRCM	Result
  4371  000C2D   2660(1+S)  	DECMS	BitNum
  4372  000C2E   2660(1+S)  	DECMS	BitNum
  4373  000C2F   8C31(2)  	JMP	$+2
  4374  000C30   0E00(2)  	RET	
  4375  000C31   267E(1+S)  	DECMS	Number
  4376  000C32   267E(1+S)  	DECMS	Number	
  4377  000C33   8C28(2)  	JMP	I_D_B_B_4bit			
  4378  000C34   8C16(2)  	JMP	Initial_Data_By_Bit	
  4379  000C35             		
  4380  000C35             Initial_Special_IR1:
  4381  000C35   2D00(1)  	MOV	A,#0
  4382  000C36   2F6F(1)  	B0MOV	CtrlData,A			
  4383  000C37             Initial_Special_IR2:
  4384  000C37   CE3D(2)  	CALL	Clr_Bank12
  4385  000C38   2E0B(1)  	B0MOV	A,Data+2
  4386  000C39   2F79(1)  	B0MOV	Carrier,A			; 读入载波
  4387  000C3A             	
  4388  000C3A   3326(1)  	B0MOV	Z,#LrnAddr$L
  4389  000C3B   3401(1)  	B0MOV	Y,#LrnAddr$M
  4390  000C3C   CE80(2)  	CALL	BackUp_CapAddr			; 电平数据填入目的地址	
  4391  000C3D   2D24(1)  	MOV	A,#Data_Index$L
  4392  000C3E   126F(1)  	ADD	A,CtrlData
  4393  000C3F   2F83(1)  	B0MOV	Z,A
  4394  000C40   3400(1)  	B0MOV	Y,#Data_Index$M	
  4395  000C41   2EE7(1)  	B0MOV	A,@YZ				
  4396  000C42   2F70(1)  	B0MOV	DatPoint,A			; 载入引导电平指针
  4397  000C43   0600(1+S)  	CMPRS   A,#0
  4398  000C44   8C46(2)  	JMP     $+2
  4399  000C45   8C35(2)  	JMP     Initial_Special_IR1             ; 暂时
  4400  000C46   CE8A(2)  	CALL	BackUp_LibAddr
  4401  000C47   1770(1)  	SWAP	DatPoint
  4402  000C48   2A0F(1)  	AND	A,#0x0F
  4403  000C49   2F82(1)  	B0MOV	R,A
  4404  000C4A   CBF5(2)  	CALL	Initial_Data_By_Index
  4405  000C4B   2E70(1)  	B0MOV	A,DatPoint
  4406  000C4C   2A0F(1)  	AND	A,#0x0F
  4407  000C4D   2F82(1)  	B0MOV	R,A
  4408  000C4E   CBF5(2)  	CALL	Initial_Data_By_Index		; 载入引导电平数据
  4409  000C4F   CE6C(2)  	CALL	INC_LibAddr	
  4410  000C50   CE94(2)  	CALL	Set_LibAddr
  4411  000C51   2EE7(1)  	B0MOV	A,@YZ
  4412  000C52   2F60(1)  	B0MOV	BitNum,A
  4413  000C53   CE6C(2)  	CALL	INC_LibAddr
  4414  000C54   2E60(1)  	B0MOV	A,BitNum	
  4415  000C55   7086(1+S)  	B0BTS0	FZ
  4416  000C56   8C58(2)  	JMP	It_Is_Not_Have_Data
  4417  000C57   CC16(2)  	CALL	Initial_Data_By_Bit
  4418  000C58             It_Is_Not_Have_Data:		
  4419  000C58   CE94(2)  	CALL	Set_LibAddr
  4420  000C59   2EE7(1)  	B0MOV	A,@YZ				
  4421  000C5A   2F70(1)  	B0MOV	DatPoint,A
  4422  000C5B   1770(1)  	SWAP	DatPoint
  4423  000C5C   2A0F(1)  	AND	A,#0x0F
  4424  000C5D   2F82(1)  	B0MOV	R,A
  4425  000C5E   CBF5(2)  	CALL	Initial_Data_By_Index
  4426  000C5F   2E70(1)  	B0MOV	A,DatPoint
  4427  000C60   2A0F(1)  	AND	A,#0x0F
  4428  000C61   2F82(1)  	B0MOV	R,A
  4429  000C62   060F(1+S)  	CMPRS	A,#0x0F
  4430  000C63   8C65(2)  	JMP	$+2
  4431  000C64   0E00(2)  	RET
  4432  000C65   6286(1)  	B0BCLR	FC
  4433  000C66   0A82(1)  	RLC	R
  4434  000C67   140C(1)  	ADD	A,#First_Index$L
  4435  000C68   2F83(1)  	B0MOV	Z,A
  4436  000C69   3400(1)  	B0MOV	Y,#First_Index$M
  4437  000C6A   2EE7(1)  	B0MOV	A,@YZ
  4438  000C6B   2F77(1)  	B0MOV	Length+0,A
  4439  000C6C   CE5B(2)  	CALL	INC_YZ
  4440  000C6D   2EE7(1)  	B0MOV	A,@YZ
  4441  000C6E   2F78(1)  	B0MOV	Length+1,A
  4442  000C6F   2D05(1)  	MOV	A,#5
  4443  000C70   2F82(1)  	B0MOV	R,A
  4444  000C71   6286(1)  	B0BCLR	FC
  4445  000C72   0978(1)  	RRCM	Length+1
  4446  000C73   0977(1)  	RRCM	Length+0
  4447  000C74   2682(1+S)  	DECMS	R
  4448  000C75   8C71(2)  	JMP	$-4	
  4449  000C76   7500(1+S)  	B0BTS0	RFlag.5
  4450  000C77   0E00(2)  	RET
  4451  000C78   CE6C(2)  	CALL	INC_LibAddr
  4452  000C79   CE94(2)  	CALL	Set_LibAddr	
  4453  000C7A   2E83(1)  	B0MOV	A,Z
  4454  000C7B   2424(1)  	SUB	A,#Data_Index$L
  4455  000C7C   2F6F(1)  	B0MOV	CtrlData,A			;记下第二帧的起始位置	
  4456  000C7D             ;	CALL	Send_LrnRam
  4457  000C7D   0E00(2)  	RET			
  4458  000C7E             
  4459  000C7E             
  4460  000C7E             
  4461  000C7E             
  4462  000C7E             
  4463  000C7E             
  4464  000C7E             
  4465  000C7E             
  4466  000C7E             
  4467  000C7E             
  4468  000C7E             
  4469  000C7E             	INCLUDE		.\Source\SendIRWave.asm
  4470  000C7E             ;****************************************************************************
  4471  000C7E             ;程序功能:	发射红外波形
  4472  000C7E             ;输入参数:	无
  4473  000C7E             ;输出参数:	无
  4474  000C7E             ;堆栈层数:	2层
  4475  000C7E             ;内存占用:	无
  4476  000C7E             ;****************************************************************************
  4477  E 0000FF83         Idle_Time	EQU	10000H-4000/32
  4478  000C7E             
  4479  000C7E             Send_IR:
  4480  000C7E   2D14(1)          MOV     A,#20
  4481  000C7F   2F05(1)          B0MOV   Count,A
  4482  000C80   CEED(2)  	CALL	BackUp_KeyNum			; 备份键值
  4483  000C81   2E09(1)  	B0MOV	A,Format
  4484  000C82   06F0(1+S)  	CMPRS	A,#0xF0
  4485  000C83   8C85(2)  	JMP	$+2
  4486  000C84   8CC7(2)  	JMP	Send_Special_IR
  4487  000C85   CABE(2)  	CALL	Initial_Wave1
  4488  000C86   2E7B(1)  	B0MOV	A,SendFlag
  4489  000C87   2A03(1)  	AND	A,#03H
  4490  000C88             	@JMP_A	4
  4491  000C88   03CE(1)  	b0add PCl ,a
  4492  000C89   8C8D(2)  	JMP	Send_Type1
  4493  000C8A   8C96(2)  	JMP	Send_Type2
  4494  000C8B   8CA2(2)  	JMP	Send_Type3
  4495  000C8C   8CAE(2)  	JMP	Send_Type4
  4496  000C8D             
  4497  000C8D             Send_Type1:
  4498  000C8D   CABE(2)  	CALL	Initial_Wave1
  4499  000C8E             S_I_Loop1:
  4500  000C8E   CCDD(2)  	CALL	Send_IR_Wave	
  4501  000C8F   CCD6(2)  	CALL    Check_PowerKey
  4502  000C90   7100(1+S)  	B0BTS0  RFlag.1
  4503  000C91   0E00(2)  	RET     
  4504  000C92   CCBB(2)  	CALL	Check_Timer1
  4505  000C93   7286(1+S)  	B0BTS0	FC
  4506  000C94   8C8E(2)  	JMP	S_I_Loop1		; 只发一帧的格式
  4507  000C95   0E00(2)  	RET
  4508  000C96             
  4509  000C96             Send_Type2:
  4510  000C96   CABE(2)  	CALL	Initial_Wave1
  4511  000C97   CCDD(2)  	CALL	Send_IR_Wave
  4512  000C98   8C9A(2)  	JMP	S_I_Next2
  4513  000C99             S_I_Loop2:
  4514  000C99   CCDD(2)  	CALL	Send_IR_Wave
  4515  000C9A             S_I_Next2:
  4516  000C9A   CABC(2)  	CALL	Initial_Wave2
  4517  000C9B   CCD6(2)  	CALL    Check_PowerKey
  4518  000C9C   7100(1+S)  	B0BTS0  RFlag.1
  4519  000C9D   0E00(2)  	RET 
  4520  000C9E   CCBB(2)  	CALL	Check_Timer1
  4521  000C9F   7286(1+S)  	B0BTS0	FC
  4522  000CA0   8C99(2)  	JMP	S_I_Loop2		; 重复尾帧的格式
  4523  000CA1   0E00(2)  	RET
  4524  000CA2             
  4525  000CA2             
  4526  000CA2             Send_Type3:
  4527  000CA2   CABE(2)  	CALL	Initial_Wave1
  4528  000CA3             S_I_Loop3:
  4529  000CA3   CCDD(2)  	CALL	Send_IR_Wave
  4530  000CA4   CABC(2)  	CALL	Initial_Wave2
  4531  000CA5   CCDD(2)  	CALL	Send_IR_Wave
  4532  000CA6   CABE(2)  	CALL	Initial_Wave1	
  4533  000CA7   CCD6(2)  	CALL    Check_PowerKey
  4534  000CA8   7100(1+S)  	B0BTS0  RFlag.1
  4535  000CA9   0E00(2)  	RET 	
  4536  000CAA   CCBB(2)  	CALL	Check_Timer1
  4537  000CAB   7286(1+S)  	B0BTS0	FC
  4538  000CAC   8CA3(2)  	JMP	S_I_Loop3		; 重复第一、第二帧的格式
  4539  000CAD   0E00(2)  	RET
  4540  000CAE             
  4541  000CAE             
  4542  000CAE             Send_Type4:
  4543  000CAE   CABE(2)  	CALL	Initial_Wave1
  4544  000CAF   CCDD(2)  	CALL	Send_IR_Wave
  4545  000CB0   CABC(2)  	CALL	Initial_Wave2
  4546  000CB1             S_I_Loop4:	
  4547  000CB1   CCDD(2)  	CALL	Send_IR_Wave
  4548  000CB2   CCD6(2)  	CALL    Check_PowerKey
  4549  000CB3   7100(1+S)  	B0BTS0  RFlag.1
  4550  000CB4   0E00(2)  	RET 	
  4551  000CB5   CCBB(2)  	CALL	Check_Timer1
  4552  000CB6   7286(1+S)  	B0BTS0	FC
  4553  000CB7   8CB1(2)  	JMP	S_I_Loop4
  4554  000CB8   CABE(2)  	CALL	Initial_Wave1
  4555  000CB9   CCDD(2)  	CALL	Send_IR_Wave		; 首帧 重发第二帧  松手发首帧
  4556  000CBA   0E00(2)  	RET
  4557  000CBB             
  4558  000CBB             
  4559  000CBB             Check_Timer1:
  4560  000CBB   C088(2)  	CALL	Scan_Key
  4561  000CBC   CEE3(2)  	CALL	Check_Key
  4562  000CBD   7A86(1+S)  	B0BTS1	FC
  4563  000CBE   0E00(2)  	RET
  4564  000CBF   2D83(1)  	MOV	A,#Idle_Time$L
  4565  000CC0   22DB(1)  	SUB	A,T1L
  4566  000CC1   2DFF(1)  	MOV	A,#Idle_Time$M
  4567  000CC2   20DC(1)  	SBC	A,T1H
  4568  000CC3   7286(1+S)  	B0BTS0	FC
  4569  000CC4   8CBB(2)  	JMP	Check_Timer1	
  4570  000CC5   6A86(1)  	B0BSET	FC
  4571  000CC6   0E00(2)  	RET
  4572  000CC7             	
  4573  000CC7             
  4574  000CC7             Send_Special_IR:
  4575  000CC7             ;	CALL	Send_LrnData
  4576  000CC7   6500(1)  	B0BCLR	RFlag.5	
  4577  000CC8   CC35(2)  	CALL	Initial_Special_IR1
  4578  000CC9   CCE6(2)  	CALL	Send_IR_WaveD
  4579  000CCA   7F0A(1+S)  	B0BTS1	Data+1.7
  4580  000CCB   0E00(2)  	RET
  4581  000CCC             	
  4582  000CCC   6D00(1)  	B0BSET	RFlag.5
  4583  000CCD   CC37(2)  	CALL	Initial_Special_IR2	
  4584  000CCE             ;	CALL	Send_LrnRam
  4585  000CCE             S_S_I_Loop:	
  4586  000CCE   CCE6(2)  	CALL	Send_IR_WaveD
  4587  000CCF   CCD6(2)  	CALL    Check_PowerKey
  4588  000CD0   7100(1+S)  	B0BTS0  RFlag.1
  4589  000CD1   0E00(2)  	RET 	
  4590  000CD2   CCBB(2)  	CALL	Check_Timer1
  4591  000CD3   7286(1+S)  	B0BTS0	FC
  4592  000CD4   8CCE(2)  	JMP	S_S_I_Loop
  4593  000CD5   0E00(2)          RET
  4594  000CD6             
  4595  000CD6             Check_PowerKey:
  4596  000CD6   2E01(1)          B0MOV   A,KeyNum1
  4597  000CD7             POWER_KEY_ADDR:
  4598  000CD7   060B(1+S)          CMPRS   A,#K_Power
  4599  000CD8   0E00(2)          RET     
  4600  000CD9   2605(1+S)          DECMS   Count
  4601  000CDA   0E00(2)          RET
  4602  000CDB   6900(1)          B0BSET  RFlag.1
  4603  000CDC   0E00(2)          RET
  4604  000CDD                     
  4605  000CDD             
  4606  000CDD             ;****************************************************************************
  4607  000CDD             ;程序功能:	发射红外波形
  4608  000CDD             ;输入参数:	无
  4609  000CDD             ;输出参数:	无
  4610  000CDD             ;堆栈层数:	1层
  4611  000CDD             ;内存占用:	无
  4612  000CDD             ;****************************************************************************
  4613  000CDD             Send_IR_Wave:
  4614  000CDD   2DC4(1)  	MOV	A,#Carrier_List$L
  4615  000CDE   1269(1)  	ADD	A,CrrPoint
  4616  000CDF   2F83(1)  	B0MOV	Z,A
  4617  000CE0   2D00(1)  	MOV	A,#Carrier_List$M
  4618  000CE1   1006(1)  	ADC	A,Zero
  4619  000CE2   2F84(1)  	B0MOV	Y,A
  4620  000CE3   0D00(2)  	MOVC
  4621  000CE4   2402(1)  	SUB	A,#2
  4622  000CE5   2F79(1)  	B0MOV	Carrier,A			; 获取载波值
  4623  000CE6             Send_IR_WaveD:	
  4624  000CE6   6DC2(1)  	B0BSET	P2Mode.5			; IR口设置为输出模式
  4625  000CE7   6DD2(1)  	B0BSET	P2Data.5
  4626  000CE8   7B00(1+S)  	B0BTS1	RFlag.3
  4627  000CE9   8CEC(2)  	JMP	$+3				; 根据首次发码标志判断是否等待标志位弹起
  4628  000CEA   7BC8(1+S)  	B0BTS1	INTRQ.3
  4629  000CEB   8CEA(2)  	JMP	$-1				; 等待停止位时间
  4630  000CEC   6B00(1)  	B0BSET	RFlag.3
  4631  000CED             
  4632  000CED   2D01(1)  	MOV	A,#T0DS+Div001+FHMOD+PWMEN
  4633  000CEE   2FD8(1)  	B0MOV	T0M,A
  4634  000CEF   2E79(1)  	B0MOV	A,Carrier
  4635  000CF0   1DFF(1)  	XOR	A,#0xFF
  4636  000CF1   2F95(1)  	B0MOV	T0R,A
  4637  000CF2   6286(1)  	B0BCLR	FC
  4638  000CF3   0879(1)  	RRC	Carrier
  4639  000CF4   1DFF(1)  	XOR	A,#0xFF
  4640  000CF5   2F94(1)  	B0MOV	T0D,A				; 初始化载波发生器
  4641  000CF6             
  4642  000CF6   2D26(1)  	MOV	A,#LrnAddr$L
  4643  000CF7   2F83(1)  	B0MOV	Z,A
  4644  000CF8   2D01(1)  	MOV	A,#LrnAddr$M
  4645  000CF9   2F84(1)  	B0MOV	Y,A
  4646  000CFA             
  4647  000CFA   67DA(1)  	B0BCLR	FTR1
  4648  000CFB   67D8(1)  	B0BCLR	FTR0
  4649  000CFC   CED1(2)  	CALL	Light_On
  4650  000CFD   2D5A(1)  	MOV	A,#05AH
  4651  000CFE   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
  4652  000CFF             S_I_W_Loop:
  4653  000CFF   2D52(1)  	MOV	A,#T1DS+Div032+FHSRC+GNEN+TR1EN
  4654  000D00   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择高频振荡、三十二分频、绿色模式使能、TR1开启）
  4655  000D01   2EE7(1)  	B0MOV	A,@YZ
  4656  000D02   2F44(1)  	B0MOV	Temp+11,A
  4657  000D03   2A3F(1)  	AND	A,#03FH
  4658  000D04   1DFF(1)  	XOR	A,#0FFH
  4659  000D05   2FDC(1)  	B0MOV	T1H,A
  4660  000D06   CE5B(2)  	CALL	INC_YZ
  4661  000D07   2EE7(1)  	B0MOV	A,@YZ
  4662  000D08   2F43(1)  	B0MOV	Temp+10,A
  4663  000D09   1DFF(1)  	XOR	A,#0FFH
  4664  000D0A   2FDB(1)  	B0MOV	T1L,A
  4665  000D0B   CE5B(2)  	CALL	INC_YZ
  4666  000D0C   2E44(1)  	B0MOV	A,Temp+11
  4667  000D0D   1843(1)  	OR	A,Temp+10
  4668  000D0E   0600(1+S)  	CMPRS	A,#0
  4669  000D0F   8D11(2)  	JMP	$+2
  4670  000D10   8D26(2)  	JMP	S_I_W_Stop
  4671  000D11   7744(1+S)  	B0BTS0	Temp+11.7
  4672  000D12   8D20(2)  	JMP	Idle_Wave
  4673  000D13             ;---	载波段
  4674  000D13   6FD8(1)  	B0BSET	T0M.7				; 开启载波
  4675  000D14   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4676  000D15   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4677  000D16   0000(1)  	NOP
  4678  000D17   0000(1)  	NOP
  4679  000D18             	GreenMode				; 从绿色模式退出，发送载波完成
  4680  000D18   6CCA(1)             B0BSET      FCPUM1
  4681  000D19   0000(1)             NOP
  4682  000D1A   0000(1)             NOP
  4683  000D1B   0000(1)  	NOP
  4684  000D1C   0000(1)  	NOP
  4685  000D1D   7BC8(1+S)  	B0BTS1	INTRQ.3
  4686  000D1E   8D1D(2)  	JMP	$-1
  4687  000D1F   8CFF(2)  	JMP	S_I_W_Loop
  4688  000D20             Idle_Wave:
  4689  000D20             ;---	空闲段
  4690  000D20   67D8(1)  	B0BCLR	T0M.7				; 关闭载波
  4691  000D21   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4692  000D22   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4693  000D23   7BC8(1+S)  	B0BTS1	INTRQ.3
  4694  000D24   8D23(2)  	JMP	$-1
  4695  000D25   8CFF(2)  	JMP	S_I_W_Loop
  4696  000D26             S_I_W_Stop:
  4697  000D26             	Slow2Normal
  4698  000D26   61CA(1)             B0BCLR     FSTPHX
  4699  000D27   0000(1)             NOP
  4700  000D28   0000(1)             NOP
  4701  000D29   0000(1)             NOP
  4702  000D2A   62CA(1)             B0BCLR     FCLKMD
  4703  000D2B   CED4(2)  	CALL	Light_Off
  4704  000D2C             		
  4705  000D2C   67D8(1)  	B0BCLR	T0M.7				; 关闭载波
  4706  000D2D   2D78(1)  	MOV	A,#T1DS+Div128+FUSRC+GNDS+TR1EN
  4707  000D2E   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择CPU时钟、128分频、绿色模式关闭、TR1开启）	计数一次32us
  4708  000D2F   2E77(1)  	B0MOV	A,Length+0
  4709  000D30   1DFF(1)  	XOR	A,#0xFF
  4710  000D31   2FDB(1)  	B0MOV	T1L,A	
  4711  000D32   2E78(1)  	B0MOV	A,Length+1
  4712  000D33   1DFF(1)  	XOR	A,#0xFF
  4713  000D34   2FDC(1)  	B0MOV	T1H,A
  4714  000D35   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4715  000D36   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4716  000D37   0E00(2)  	RET
  4717  000D38             
  4718  000D38             
  4719  000D38             
  4720  000D38             ;	INCLUDE		.\Source\EventLog.asm
  4721  000D38             	INCLUDE		.\Source\test.asm
  4722  000D38             Send_LrnData:
  4723  000D38   2D01(1)  	MOV	A,#T0DS+Div001+FHMOD+PWMEN
  4724  000D39   2FD8(1)  	B0MOV	T0M,A
  4725  000D3A   2D2D(1)  	MOV	A,#02DH
  4726  000D3B   2F95(1)  	B0MOV	T0R,A
  4727  000D3C   2D69(1)  	MOV	A,#069H
  4728  000D3D   2F94(1)  	B0MOV	T0D,A
  4729  000D3E   2D09(1)  	MOV	A,#RstAddr$L
  4730  000D3F   2F75(1)  	B0MOV	MTPAddr+0,A
  4731  000D40   2D00(1)  	MOV	A,#RstAddr$M
  4732  000D41   2F76(1)  	B0MOV	MTPAddr+1,A			; 初始化捕获数据地址
  4733  000D42   2D30(1)  	MOV	A,#48
  4734  000D43   2F05(1)  	B0MOV	Count,A
  4735  000D44   8D51(2)  	JMP	S_L_Loop	
  4736  000D45             
  4737  000D45             Send_LrnRam:
  4738  000D45   2D01(1)  	MOV	A,#T0DS+Div001+FHMOD+PWMEN
  4739  000D46   2FD8(1)  	B0MOV	T0M,A
  4740  000D47   2D2D(1)  	MOV	A,#02DH
  4741  000D48   2F95(1)  	B0MOV	T0R,A
  4742  000D49   2D69(1)  	MOV	A,#069H
  4743  000D4A   2F94(1)  	B0MOV	T0D,A
  4744  000D4B   2D00(1)  	MOV	A,#LvlAddr$L
  4745  000D4C   2F75(1)  	B0MOV	MTPAddr+0,A
  4746  000D4D   2D01(1)  	MOV	A,#LvlAddr$M
  4747  000D4E   2F76(1)  	B0MOV	MTPAddr+1,A			; 初始化捕获数据地址
  4748  000D4F   2DC8(1)  	MOV	A,#200
  4749  000D50   2F05(1)  	B0MOV	Count,A
  4750  000D51             S_L_Loop:
  4751  000D51   2E75(1)  	B0MOV	A,MTPAddr+0
  4752  000D52   2F83(1)  	B0MOV	Z,A
  4753  000D53   2E76(1)  	B0MOV	A,MTPAddr+1
  4754  000D54   2F84(1)  	B0MOV	Y,A
  4755  000D55   2EE7(1)  	B0MOV	A,@YZ
  4756  000D56   2F82(1)  	B0MOV    R,A
  4757  000D57   CE76(2)  	CALL	INC_MTPAddr
  4758  000D58   CDC6(2)  	CALL	Send_Byte
  4759  000D59   2605(1+S)  	DECMS	Count
  4760  000D5A   8D51(2)  	JMP	S_L_Loop
  4761  000D5B   0E00(2)  	RET
  4762  000D5C             
  4763  000D5C             Send_Temp:
  4764  000D5C   2D01(1)  	MOV	A,#T0DS+Div001+FHMOD+PWMEN
  4765  000D5D   2FD8(1)  	B0MOV	T0M,A
  4766  000D5E   2D2D(1)  	MOV	A,#02DH
  4767  000D5F   2F95(1)  	B0MOV	T0R,A
  4768  000D60   2D69(1)  	MOV	A,#069H
  4769  000D61   2F94(1)  	B0MOV	T0D,A
  4770  000D62   2E44(1)  	B0MOV	A,Temp+11
  4771  000D63   2F82(1)  	B0MOV    R,A
  4772  000D64   CDC6(2)  	CALL	Send_Byte
  4773  000D65             
  4774  000D65   2E43(1)  	B0MOV	A,Temp+10
  4775  000D66   2F82(1)  	B0MOV    R,A
  4776  000D67   CDC6(2)  	CALL	Send_Byte
  4777  000D68             
  4778  000D68   2E42(1)  	B0MOV	A,Temp+9
  4779  000D69   2F82(1)  	B0MOV    R,A
  4780  000D6A   CDC6(2)  	CALL	Send_Byte
  4781  000D6B             
  4782  000D6B   2E41(1)  	B0MOV	A,Temp+8
  4783  000D6C   2F82(1)  	B0MOV    R,A
  4784  000D6D   CDC6(2)  	CALL	Send_Byte
  4785  000D6E             
  4786  000D6E   2E40(1)  	B0MOV	A,Temp+7
  4787  000D6F   2F82(1)  	B0MOV    R,A
  4788  000D70   CDC6(2)  	CALL	Send_Byte
  4789  000D71             
  4790  000D71   2E3F(1)  	B0MOV	A,Temp+6
  4791  000D72   2F82(1)  	B0MOV    R,A
  4792  000D73   CDC6(2)  	CALL	Send_Byte
  4793  000D74             
  4794  000D74   0E00(2)  	RET
  4795  000D75             
  4796  000D75             Send_LibAddr:
  4797  000D75   2E52(1)  	B0MOV	A,LibAddr+0
  4798  000D76   2F82(1)  	B0MOV	R,A
  4799  000D77   CDC6(2)  	CALL	Send_Byte
  4800  000D78   2E53(1)  	B0MOV	A,LibAddr+1
  4801  000D79   2F82(1)  	B0MOV	R,A
  4802  000D7A   CDC6(2)  	CALL	Send_Byte
  4803  000D7B   0E00(2)  	RET	
  4804  000D7C             
  4805  000D7C             Send_CapAddr:
  4806  000D7C   2E4E(1)  	B0MOV	A,CapAddr+0
  4807  000D7D   2F82(1)  	B0MOV	R,A
  4808  000D7E   CDC6(2)  	CALL	Send_Byte
  4809  000D7F   2E4F(1)  	B0MOV	A,CapAddr+1
  4810  000D80   2F82(1)  	B0MOV	R,A
  4811  000D81   CDC6(2)  	CALL	Send_Byte
  4812  000D82   0E00(2)  	RET
  4813  000D83             
  4814  000D83             Send_LibData:
  4815  000D83   2E5C(1)  	B0MOV	A,LibData+0
  4816  000D84   2F82(1)  	B0MOV	R,A
  4817  000D85   CDC6(2)  	CALL	Send_Byte
  4818  000D86   2E5D(1)  	B0MOV	A,LibData+1
  4819  000D87   2F82(1)  	B0MOV	R,A
  4820  000D88   CDC6(2)  	CALL	Send_Byte
  4821  000D89   0E00(2)  	RET	
  4822  000D8A             
  4823  000D8A             Send_CapData:
  4824  000D8A   2E5A(1)  	B0MOV	A,CapData+0
  4825  000D8B   2F82(1)  	B0MOV	R,A
  4826  000D8C   CDC6(2)  	CALL	Send_Byte
  4827  000D8D   2E5B(1)  	B0MOV	A,CapData+1
  4828  000D8E   2F82(1)  	B0MOV	R,A
  4829  000D8F   CDC6(2)  	CALL	Send_Byte
  4830  000D90   0E00(2)  	RET	
  4831  000D91             
  4832  000D91             Send_FmtAddr:
  4833  000D91   2E4C(1)  	B0MOV	A,FmtAddr+0
  4834  000D92   2F82(1)  	B0MOV	R,A
  4835  000D93   CDC6(2)  	CALL	Send_Byte
  4836  000D94   2E4D(1)  	B0MOV	A,FmtAddr+1
  4837  000D95   2F82(1)  	B0MOV	R,A
  4838  000D96   CDC6(2)  	CALL	Send_Byte
  4839  000D97   0E00(2)  	RET	
  4840  000D98             
  4841  000D98             Send_Format:
  4842  000D98   2E09(1)  	B0MOV	A,Format
  4843  000D99   2F82(1)  	B0MOV    R,A
  4844  000D9A   CDC6(2)  	CALL	Send_Byte	
  4845  000D9B   0E00(2)  	RET
  4846  000D9C             	
  4847  000D9C             Send_CtrlData:
  4848  000D9C   2E6F(1)  	B0MOV	A,CtrlData
  4849  000D9D   2F82(1)  	B0MOV    R,A
  4850  000D9E   CDC6(2)  	CALL	Send_Byte	
  4851  000D9F   0E00(2)  	RET
  4852  000DA0             
  4853  000DA0             Send_CtrlAddr:
  4854  000DA0   2E50(1)  	B0MOV	A,CtrlAddr+0
  4855  000DA1   2F82(1)  	B0MOV    R,A
  4856  000DA2   CDC6(2)  	CALL	Send_Byte
  4857  000DA3   2E51(1)  	B0MOV	A,CtrlAddr+1
  4858  000DA4   2F82(1)  	B0MOV    R,A
  4859  000DA5   CDC6(2)  	CALL	Send_Byte	
  4860  000DA6   0E00(2)  	RET
  4861  000DA7             
  4862  000DA7             Send_CrrBuff:
  4863  000DA7   2E63(1)  	B0MOV	A,CrrBuff+0
  4864  000DA8   2F82(1)  	B0MOV    R,A
  4865  000DA9   CDC6(2)  	CALL	Send_Byte
  4866  000DAA   2E64(1)  	B0MOV	A,CrrBuff+1
  4867  000DAB   2F82(1)  	B0MOV    R,A
  4868  000DAC   CDC6(2)  	CALL	Send_Byte	
  4869  000DAD   0E00(2)  	RET	
  4870  000DAE             	
  4871  000DAE             Send_A0:
  4872  000DAE   2DA0(1)  	MOV	A,#0xA0
  4873  000DAF   2F82(1)  	B0MOV    R,A
  4874  000DB0   CDC6(2)  	CALL	Send_Byte
  4875  000DB1   0E00(2)  	RET	
  4876  000DB2             
  4877  000DB2             Send_B0:
  4878  000DB2   2DB0(1)  	MOV	A,#0xB0
  4879  000DB3   2F82(1)  	B0MOV    R,A
  4880  000DB4   CDC6(2)  	CALL	Send_Byte
  4881  000DB5   0E00(2)  	RET	
  4882  000DB6             
  4883  000DB6             Send_C0:
  4884  000DB6   2DC0(1)  	MOV	A,#0xC0
  4885  000DB7   2F82(1)  	B0MOV    R,A
  4886  000DB8   CDC6(2)  	CALL	Send_Byte
  4887  000DB9   0E00(2)  	RET	
  4888  000DBA             
  4889  000DBA             Send_D0:
  4890  000DBA   2DD0(1)  	MOV	A,#0xD0
  4891  000DBB   2F82(1)  	B0MOV    R,A
  4892  000DBC   CDC6(2)  	CALL	Send_Byte
  4893  000DBD   0E00(2)  	RET	
  4894  000DBE             
  4895  000DBE             Send_E0:
  4896  000DBE   2DE0(1)  	MOV	A,#0xE0
  4897  000DBF   2F82(1)  	B0MOV    R,A
  4898  000DC0   CDC6(2)  	CALL	Send_Byte
  4899  000DC1   0E00(2)  	RET	
  4900  000DC2             
  4901  000DC2             Send_F0:
  4902  000DC2   2DF0(1)  	MOV	A,#0xF0
  4903  000DC3   2F82(1)  	B0MOV    R,A
  4904  000DC4   CDC6(2)  	CALL	Send_Byte
  4905  000DC5   0E00(2)  	RET	
  4906  000DC6             
  4907  000DC6             
  4908  000DC6             
  4909  000DC6             //发射字节
  4910  000DC6             Send_Byte:
  4911  000DC6   2D5A(1)  	MOV	A,#05AH
  4912  000DC7   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
  4913  000DC8   2D01(1)  	MOV	A,#T0DS+Div001+FHMOD+PWMEN
  4914  000DC9   2FD8(1)  	B0MOV	T0M,A
  4915  000DCA   2D2D(1)  	MOV	A,#02DH
  4916  000DCB   2F95(1)  	B0MOV	T0R,A
  4917  000DCC   2D69(1)  	MOV	A,#069H
  4918  000DCD   2F94(1)  	B0MOV	T0D,A
  4919  000DCE   2D09(1)  	MOV	A,#9
  4920  000DCF   2F83(1)  	B0MOV	Z,A
  4921  000DD0             Send_Bit_Loop:
  4922  000DD0   7882(1+S)  	B0BTS1    R.0
  4923  000DD1   8DD3(2)  	JMP	Bit_0
  4924  000DD2   8DD5(2)  	JMP	Bit_1
  4925  000DD3             Bit_0:
  4926  000DD3   CDE6(2)  	CALL	Send_Bit0
  4927  000DD4   8DD6(2)  	JMP	Send_Com
  4928  000DD5             Bit_1:
  4929  000DD5   CDFE(2)  	CALL	Send_Bit1
  4930  000DD6             Send_Com:
  4931  000DD6   0982(1)  	RRCM    R
  4932  000DD7   2683(1+S)  	DECMS	Z
  4933  000DD8   8DD0(2)  	JMP	Send_Bit_Loop
  4934  000DD9             ;---	空闲段
  4935  000DD9   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4936  000DDA   67D8(1)  	B0BCLR	T0M.7				; 关闭载波
  4937  000DDB   2D52(1)  	MOV	A,#T1DS+Div032+FHSRC+GNEN+TR1EN
  4938  000DDC   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择高频振荡、三十二分频、绿色模式使能、TR1开启）
  4939  000DDD   2DE0(1)  	MOV	A,#0E0H
  4940  000DDE   2FDC(1)  	B0MOV	T1H,A
  4941  000DDF   2D00(1)  	MOV	A,#000H
  4942  000DE0   2FDB(1)  	B0MOV	T1L,A				; 将电平时间赋值给T1 计数器
  4943  000DE1   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4944  000DE2   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4945  000DE3   7BC8(1+S)  	B0BTS1	INTRQ.3
  4946  000DE4   8DE3(2)  	JMP	$-1
  4947  000DE5   0E00(2)  	RET
  4948  000DE6             
  4949  000DE6             //发射逻辑位0
  4950  000DE6             Send_Bit0:
  4951  000DE6   2D52(1)  	MOV	A,#T1DS+Div032+FHSRC+GNEN+TR1EN
  4952  000DE7   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择高频振荡、三十二分频、绿色模式使能、TR1开启）
  4953  000DE8   2DFF(1)  	MOV	A,#0FFH
  4954  000DE9   2FDC(1)  	B0MOV	T1H,A
  4955  000DEA   2D00(1)  	MOV	A,#000H
  4956  000DEB   2FDB(1)  	B0MOV	T1L,A				; 将电平时间赋值给T1 计数器
  4957  000DEC   6FD8(1)  	B0BSET	T0M.7				; 开启载波
  4958  000DED   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4959  000DEE   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4960  000DEF   7BC8(1+S)  	B0BTS1	INTRQ.3
  4961  000DF0   8DEF(2)  	JMP	$-1
  4962  000DF1             ;---	空闲段
  4963  000DF1   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4964  000DF2   67D8(1)  	B0BCLR	T0M.7				; 关闭载波
  4965  000DF3   2D52(1)  	MOV	A,#T1DS+Div032+FHSRC+GNEN+TR1EN
  4966  000DF4   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择高频振荡、三十二分频、绿色模式使能、TR1开启）
  4967  000DF5   2DFF(1)  	MOV	A,#0FFH
  4968  000DF6   2FDC(1)  	B0MOV	T1H,A
  4969  000DF7   2D00(1)  	MOV	A,#00H
  4970  000DF8   2FDB(1)  	B0MOV	T1L,A				; 将电平时间赋值给T1 计数器
  4971  000DF9   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4972  000DFA   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4973  000DFB   7BC8(1+S)  	B0BTS1	INTRQ.3
  4974  000DFC   8DFB(2)  	JMP	$-1
  4975  000DFD   0E00(2)  	RET
  4976  000DFE             
  4977  000DFE             //发射逻辑位1
  4978  000DFE             Send_Bit1:
  4979  000DFE   2D52(1)  	MOV	A,#T1DS+Div032+FHSRC+GNEN+TR1EN
  4980  000DFF   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择高频振荡、三十二分频、绿色模式使能、TR1开启）
  4981  000E00   2DFF(1)  	MOV	A,#0FFH
  4982  000E01   2FDC(1)  	B0MOV	T1H,A
  4983  000E02   2D00(1)  	MOV	A,#00H
  4984  000E03   2FDB(1)  	B0MOV	T1L,A				; 将电平时间赋值给T1 计数器
  4985  000E04   6FD8(1)  	B0BSET	T0M.7				; 开启载波
  4986  000E05   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  4987  000E06   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4988  000E07   7BC8(1+S)  	B0BTS1	INTRQ.3
  4989  000E08   8E07(2)  	JMP	$-1
  4990  000E09             ;---	空闲段
  4991  000E09   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  4992  000E0A   67D8(1)  	B0BCLR	T0M.7				; 关闭载波
  4993  000E0B   2D52(1)  	MOV	A,#T1DS+Div032+FHSRC+GNEN+TR1EN
  4994  000E0C   2FDA(1)  	B0MOV	T1M,A				; 关闭定时器1 并配置（选择高频振荡、三十二分频、绿色模式使能、TR1开启）
  4995  000E0D   2DFE(1)  	MOV	A,#0FEH
  4996  000E0E   2FDC(1)  	B0MOV	T1H,A
  4997  000E0F   2D00(1)  	MOV	A,#000H
  4998  000E10   2FDB(1)  	B0MOV	T1L,A				; 将电平时间赋值给T1 计数器
  4999  000E11   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  5000  000E12   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器
  5001  000E13   7BC8(1+S)  	B0BTS1	INTRQ.3
  5002  000E14   8E13(2)  	JMP	$-1
  5003  000E15   0E00(2)  	RET
  5004  000E16             
  5005  000E16             
  5006  000E16             	INCLUDE		.\Source\Function.asm	
  5007  000E16             
  5008  000E16             // 单片机上电初始化
  5009  000E16             ;****************************************************************************
  5010  000E16             ;程序功能:	单片机上电初始化
  5011  000E16             ;输入参数:	无
  5012  000E16             ;输出参数:	无
  5013  000E16             ;堆栈层数:	0层
  5014  000E16             ;内存占用:	无
  5015  000E16             ;****************************************************************************
  5016  000E16             MCU_Initialize:
  5017  000E16   67D8(1)  	B0BCLR	T0M.7				; 关闭定时器0
  5018  000E17   67DA(1)  	B0BCLR	T1M.7				; 关闭定时器1
  5019  000E18             IO_P1UPRE_ADDR:
  5020  000E18   2DFF(1)  	MOV	A,#SP02+SP03+SP04+SP05+SP06+SP07+SP08+SP09
  5021  000E19   2FE1(1)  	B0MOV	P1UPRE,A
  5022  000E1A             IO_P2UPRE_ADDR:	
  5023  000E1A   2D3F(1)  	MOV	A,#SP10+SP11+SP12+SP13+SP14+SP15
  5024  000E1B   2FE2(1)  	B0MOV	P2UPRE,A		; 所有IO口接上拉电阻
  5025  000E1C             IO_P1TSM_ADDR:	
  5026  000E1C   2DFF(1)  	MOV	A,#SP02+SP03+SP04+SP05+SP06+SP07+SP08+SP09
  5027  000E1D   2FA3(1)  	B0MOV	P1TSM,A
  5028  000E1E             IO_P2TSM_ADDR:	
  5029  000E1E   2D0F(1)  	MOV	A,#SP10+SP11+SP12+SP13+CP14+CP15
  5030  000E1F   2FA4(1)  	B0MOV	P2TSM,A			; 除2，14，15脚其他IO口皆设置为输出扫描波形
  5031  000E20             IO_P1WAKE_ADDR:	
  5032  000E20   2DFF(1)  	MOV	A,#SP02+SP03+SP04+SP05+SP06+SP07+SP08+SP09
  5033  000E21   2FC0(1)  	B0MOV	P1WAKE,A
  5034  000E22             IO_P2WAKE_ADDR:	
  5035  000E22   2D0F(1)  	MOV	A,#SP10+SP11+SP12+SP13+CP14+CP15	
  5036  000E23   2FA6(1)  	B0MOV	P2WAKE,A		; 除2，14，15脚其他IO口皆设置为可被唤醒
  5037  000E24             IO_Initialize:
  5038  000E24             IO_P1MODE_ADDR:
  5039  000E24   2D00(1)  	MOV	A,#CP02+CP03+CP04+CP05+CP06+CP07+CP08+CP09
  5040  000E25   2FC1(1)  	B0MOV	P1Mode,A
  5041  000E26             IO_P2MODE_ADDR:	
  5042  000E26   2D30(1)  	MOV	A,#CP10+CP11+CP12+CP13+SP14+SP15
  5043  000E27   2FC2(1)  	B0MOV	P2Mode,A		; 3~13脚设置为输入模式，2、14、15设置为输出模式
  5044  000E28             IO_P1DATA_ADDR:	
  5045  000E28   2D00(1)  	MOV	A,#CP02+CP03+CP04+CP05+CP06+CP07+CP08+CP09
  5046  000E29   2FD1(1)  	B0MOV	P1DATA,A
  5047  000E2A             IO_P2DATA_ADDR:	
  5048  000E2A   2D30(1)  	MOV	A,#CP10+CP11+CP12+CP13+SP14+SP15
  5049  000E2B   2FD2(1)  	B0MOV	P2DATA,A		; 除14，15脚输出高电平，其他引脚皆为输入状态
  5050  000E2C   0E00(2)  	RET
  5051  000E2D             
  5052  000E2D             //关闭IO唤醒以及扫描波形
  5053  000E2D             ;****************************************************************************
  5054  000E2D             ;程序功能:	关闭IO口唤醒功能并关闭输出扫描波形功能
  5055  000E2D             ;输入参数:	无
  5056  000E2D             ;输出参数:	无
  5057  000E2D             ;堆栈层数:	0层
  5058  000E2D             ;内存占用:	无
  5059  000E2D             ;****************************************************************************
  5060  000E2D             Close_IO_Wake:
  5061  000E2D   2D00(1)  	MOV	A,#CP02+CP03+CP04+CP05+CP06+CP07+CP08+CP09
  5062  000E2E   2FA3(1)  	B0MOV	P1TSM,A
  5063  000E2F   2D00(1)  	MOV	A,#CP10+CP11+CP12+CP13+CP14+CP15
  5064  000E30   2FA4(1)  	B0MOV	P2TSM,A			; 关闭IO口输出波形
  5065  000E31   2D00(1)  	MOV	A,#CP02+CP03+CP04+CP05+CP06+CP07+CP08+CP09
  5066  000E32   2FC0(1)  	B0MOV	P1WAKE,A
  5067  000E33   2D00(1)  	MOV	A,#CP10+CP11+CP12+CP13+CP14+CP15
  5068  000E34   2FA6(1)  	B0MOV	P2WAKE,A		; 关闭IO口唤醒功能
  5069  000E35   0E00(2)  	RET
  5070  000E36             ///
  5071  000E36             
  5072  000E36             //清除RAM
  5073  000E36             ;****************************************************************************
  5074  000E36             ;程序功能:	清除RAM
  5075  000E36             ;输入参数:	无
  5076  000E36             ;输出参数:	无
  5077  000E36             ;堆栈层数:	0层
  5078  000E36             ;内存占用:	无
  5079  000E36             ;****************************************************************************
  5080  000E36             Clr_RAM:
  5081  000E36   2B84(1)  	CLR 		Y		 	; bank0
  5082  000E37   2D7F(1)  	MOV		A, #0x7F
  5083  000E38   2F83(1)  	B0MOV		Z, A			; Set @YZ address from 2fh
  5084  000E39   2BE7(1)  	CLR 		@YZ			; Clear @YZ content
  5085  000E3A   2683(1+S)  	DECMS		Z   			; z = z - 1 , skip next if z=0
  5086  000E3B   8E39(2)  	JMP 		$-2
  5087  000E3C   2BE7(1)  	CLR 		@YZ			; Clear address $00
  5088  000E3D             Clr_Bank12:
  5089  000E3D   3401(1)  	B0MOV		y,#1
  5090  000E3E   2DFF(1)  	MOV		A,#0xFF
  5091  000E3F   2F83(1)  	B0MOV		Z,A
  5092  000E40   2BE7(1)  	CLR		@YZ
  5093  000E41   2683(1+S)  	DECMS		Z
  5094  000E42   8E40(2)  	JMP		$-2
  5095  000E43   2BE7(1)  	CLR		@YZ
  5096  000E44   0E00(2)  	RET
  5097  000E45             	
  5098  000E45             ;****************************************************************************
  5099  000E45             ;程序功能:	清除解码结果寄存器
  5100  000E45             ;输入参数:	无
  5101  000E45             ;输出参数:	无
  5102  000E45             ;堆栈层数:	0层
  5103  000E45             ;内存占用:	无
  5104  000E45             ;****************************************************************************
  5105  000E45             Clr_RltData:
  5106  000E45   2D38(1)  	MOV	A,#RstLAddr$L
  5107  000E46   2F83(1)  	B0MOV	Z,A
  5108  000E47   2D00(1)  	MOV	A,#RstLAddr$M
  5109  000E48   2F84(1)  	B0MOV	Y,A
  5110  000E49   2D2F(1)  	MOV	A,#47
  5111  000E4A   2F82(1)  	B0MOV	R,A
  5112  000E4B   2BE7(1)  	CLR	@YZ
  5113  000E4C   2683(1+S)  	DECMS	Z			;在000h-07fh之间，可以省去nop
  5114  000E4D   2682(1+S)  	DECMS	R
  5115  000E4E   8E4B(2)  	JMP	$-3
  5116  000E4F   0E00(2)  	RET
  5117  000E50             	
  5118  000E50             Clr_LvlData:
  5119  000E50   2D25(1)  	MOV	A,#LvlLAddr$L
  5120  000E51   2F83(1)  	B0MOV	Z,A
  5121  000E52   2D01(1)  	MOV	A,#LvlLAddr$M
  5122  000E53   2F84(1)  	B0MOV	Y,A
  5123  000E54   2D26(1)  	MOV	A,#19*2
  5124  000E55   2F82(1)  	B0MOV	R,A
  5125  000E56   2BE7(1)  	CLR	@YZ
  5126  000E57   2683(1+S)  	DECMS	Z			;在000h-07fh之间，可以省去nop
  5127  000E58   2682(1+S)  	DECMS	R
  5128  000E59   8E56(2)  	JMP	$-3
  5129  000E5A   0E00(2)  	RET
  5130  000E5B             
  5131  000E5B             //RAM指针操作
  5132  000E5B             ;****************************************************************************
  5133  000E5B             ;程序功能:	RAM指针操作
  5134  000E5B             ;输入参数:	无
  5135  000E5B             ;输出参数:	无
  5136  000E5B             ;堆栈层数:	0层
  5137  000E5B             ;内存占用:	无
  5138  000E5B             ;****************************************************************************
  5139  000E5B             INC_YZ:
  5140  000E5B   1683(1+S)  	INCMS	Z
  5141  000E5C   0E00(2)  	RET
  5142  000E5D   1684(1+S)  	INCMS	Y
  5143  000E5E   0E00(2)  	RET
  5144  000E5F   0E00(2)  	RET
  5145  000E60             
  5146  000E60             DEC_YZ:
  5147  000E60   2E83(1)  	B0MOV	A,Z
  5148  000E61   2401(1)  	SUB	A,#1
  5149  000E62   2F83(1)  	B0MOV	Z,A
  5150  000E63   2E84(1)  	B0MOV	A,Y
  5151  000E64   2006(1)  	SBC	A,Zero
  5152  000E65   2F84(1)  	B0MOV	Y,A
  5153  000E66   0E00(2)  	RET
  5154  000E67             
  5155  000E67             INC_CtrlAddr:
  5156  000E67   1650(1+S)  	INCMS	CtrlAddr+0
  5157  000E68   0E00(2)  	RET
  5158  000E69   1651(1+S)  	INCMS	CtrlAddr+1
  5159  000E6A   0E00(2)  	RET
  5160  000E6B   0E00(2)  	RET
  5161  000E6C             
  5162  000E6C             INC_LibAddr:
  5163  000E6C   1652(1+S)  	INCMS	LibAddr+0
  5164  000E6D   0E00(2)  	RET
  5165  000E6E   1653(1+S)  	INCMS	LibAddr+1
  5166  000E6F   0E00(2)  	RET
  5167  000E70   0E00(2)  	RET
  5168  000E71             
  5169  000E71             INC_CapAddr:
  5170  000E71   164E(1+S)  	INCMS	CapAddr+0
  5171  000E72   0E00(2)  	RET
  5172  000E73   164F(1+S)  	INCMS	CapAddr+1
  5173  000E74   0E00(2)  	RET
  5174  000E75   0E00(2)  	RET
  5175  000E76             
  5176  000E76             INC_MTPAddr:
  5177  000E76   1675(1+S)  	INCMS	MTPAddr+0
  5178  000E77   0E00(2)  	RET
  5179  000E78   1676(1+S)  	INCMS	MTPAddr+1
  5180  000E79   0E00(2)  	RET
  5181  000E7A   0E00(2)  	RET
  5182  000E7B             
  5183  000E7B             INC_BakAddr:
  5184  000E7B   1654(1+S)  	INCMS	BakAddr+0
  5185  000E7C   0E00(2)  	RET
  5186  000E7D   1655(1+S)  	INCMS	BakAddr+1
  5187  000E7E   0E00(2)  	RET
  5188  000E7F   0E00(2)  	RET
  5189  000E80             
  5190  000E80             BackUp_CapAddr:
  5191  000E80   2E83(1)  	B0MOV	A,Z
  5192  000E81   2F4E(1)  	B0MOV	CapAddr+0,A
  5193  000E82   2E84(1)  	B0MOV	A,Y
  5194  000E83   2F4F(1)  	B0MOV	CapAddr+1,A
  5195  000E84   0E00(2)  	RET
  5196  000E85             
  5197  000E85             BackUp_BakAddr:
  5198  000E85   2E83(1)  	B0MOV	A,Z
  5199  000E86   2F54(1)  	B0MOV	BakAddr+0,A
  5200  000E87   2E84(1)  	B0MOV	A,Y
  5201  000E88   2F55(1)  	B0MOV	BakAddr+1,A
  5202  000E89   0E00(2)  	RET
  5203  000E8A             
  5204  000E8A             BackUp_LibAddr:
  5205  000E8A   2E83(1)  	B0MOV	A,Z
  5206  000E8B   2F52(1)  	B0MOV	LibAddr+0,A
  5207  000E8C   2E84(1)  	B0MOV	A,Y
  5208  000E8D   2F53(1)  	B0MOV	LibAddr+1,A
  5209  000E8E   0E00(2)  	RET
  5210  000E8F             
  5211  000E8F             Set_CtrlAddr:
  5212  000E8F   2E50(1)  	B0MOV	A,CtrlAddr+0
  5213  000E90   2F83(1)  	B0MOV	Z,A
  5214  000E91   2E51(1)  	B0MOV	A,CtrlAddr+1
  5215  000E92   2F84(1)  	B0MOV	Y,A
  5216  000E93   0E00(2)  	RET
  5217  000E94             
  5218  000E94             Set_LibAddr:
  5219  000E94   2E52(1)  	B0MOV	A,LibAddr+0
  5220  000E95   2F83(1)  	B0MOV	Z,A
  5221  000E96   2E53(1)  	B0MOV	A,LibAddr+1
  5222  000E97   2F84(1)  	B0MOV	Y,A
  5223  000E98   0E00(2)  	RET
  5224  000E99             
  5225  000E99             Set_CapAddr:
  5226  000E99   2E4E(1)  	B0MOV	A,CapAddr+0
  5227  000E9A   2F83(1)  	B0MOV	Z,A
  5228  000E9B   2E4F(1)  	B0MOV	A,CapAddr+1
  5229  000E9C   2F84(1)  	B0MOV	Y,A
  5230  000E9D   0E00(2)  	RET
  5231  000E9E             
  5232  000E9E             Set_BakAddr:
  5233  000E9E   2E54(1)  	B0MOV	A,BakAddr+0
  5234  000E9F   2F83(1)  	B0MOV	Z,A
  5235  000EA0   2E55(1)  	B0MOV	A,BakAddr+1
  5236  000EA1   2F84(1)  	B0MOV	Y,A
  5237  000EA2   0E00(2)  	RET
  5238  000EA3             
  5239  000EA3             DEC_LibAddr:
  5240  000EA3   2E52(1)  	B0MOV	A,LibAddr+0
  5241  000EA4   2401(1)  	SUB	A,#1
  5242  000EA5   2F52(1)  	B0MOV	LibAddr+0,A
  5243  000EA6   2E53(1)  	B0MOV	A,LibAddr+1
  5244  000EA7   2006(1)  	SBC	A,Zero
  5245  000EA8   2F53(1)  	B0MOV	LibAddr+1,A
  5246  000EA9   0E00(2)  	RET
  5247  000EAA             
  5248  000EAA             
  5249  000EAA             ///
  5250  000EAA             ;****************************************************************************
  5251  000EAA             ;程序功能:	产生一定时间的延时
  5252  000EAA             ;输入参数:	延时参数
  5253  000EAA             ;输出参数:	无
  5254  000EAA             ;堆栈层数:	3层
  5255  000EAA             ;内存占用:	Temp+9,Temp+10,Temp+11
  5256  000EAA             ;****************************************************************************
  5257  000EAA             //
  5258  000EAA             Delay_200ms:
  5259  000EAA   2DC8(1)  	MOV	A,#200
  5260  000EAB   2F42(1)  	B0MOV	Temp+9,A
  5261  000EAC   CEC2(2)  	CALL	Delay_1ms
  5262  000EAD   2642(1+S)  	DECMS	Temp+9
  5263  000EAE   8EAC(2)  	JMP	$-2
  5264  000EAF   0E00(2)  	RET
  5265  000EB0             
  5266  000EB0             Delay_100ms:
  5267  000EB0   2D64(1)  	MOV	A,#100
  5268  000EB1   2F42(1)  	B0MOV	Temp+9,A
  5269  000EB2   CEC2(2)  	CALL	Delay_1ms
  5270  000EB3   2642(1+S)  	DECMS	Temp+9
  5271  000EB4   8EB2(2)  	JMP	$-2
  5272  000EB5   0E00(2)  	RET
  5273  000EB6             
  5274  000EB6             Delay_30ms:
  5275  000EB6   2D1E(1)  	MOV	A,#30
  5276  000EB7   2F42(1)  	B0MOV	Temp+9,A
  5277  000EB8   CEC2(2)  	CALL	Delay_1ms
  5278  000EB9   2642(1+S)  	DECMS	Temp+9
  5279  000EBA   8EB8(2)  	JMP	$-2
  5280  000EBB   0E00(2)  	RET
  5281  000EBC             
  5282  000EBC             Delay_10ms:
  5283  000EBC   2D0A(1)  	MOV	A,#10
  5284  000EBD   2F42(1)  	B0MOV	Temp+9,A
  5285  000EBE   CEC2(2)  	CALL	Delay_1ms
  5286  000EBF   2642(1+S)  	DECMS	Temp+9
  5287  000EC0   8EBE(2)  	JMP	$-2
  5288  000EC1   0E00(2)  	RET
  5289  000EC2             
  5290  000EC2             Delay_1ms:
  5291  000EC2   2D5A(1)  	MOV	A,#05AH
  5292  000EC3   2FCC(1)  	B0MOV	WDTR,A				; 清除看门狗定时器
  5293  000EC4   2D0A(1)  	MOV	A,#10
  5294  000EC5   2F43(1)  	B0MOV	Temp+10,A
  5295  000EC6   CECA(2)  	CALL	Delay_100us
  5296  000EC7   2643(1+S)  	DECMS	Temp+10
  5297  000EC8   8EC6(2)  	JMP	$-2
  5298  000EC9   0E00(2)  	RET
  5299  000ECA             
  5300  000ECA             ;指令周期=133*3-1+2=400
  5301  000ECA             ;由于为0时没有执行JMP指令所以整个循环体周期要减去1
  5302  000ECA             Delay_100us:
  5303  000ECA   2D85(1)  	MOV	A,#133
  5304  000ECB             Delay_Com:
  5305  000ECB   2F44(1)  	B0MOV	Temp+11,A
  5306  000ECC   2644(1+S)  	DECMS	Temp+11
  5307  000ECD   8ECC(2)  	JMP	$-1
  5308  000ECE   0E00(2)  	RET
  5309  000ECF             
  5310  000ECF             ;指令周期=40*3-1+2=121 * 0.25us = 30.25us
  5311  000ECF             ;由于为0时没有执行JMP指令所以整个循环体周期要减去1
  5312  000ECF             Delay_30us:
  5313  000ECF   2D28(1)  	MOV	A,#40
  5314  000ED0   8ECB(2)  	JMP	Delay_Com
  5315  000ED1             ///
  5316  000ED1             
  5317  000ED1             ;****************************************************************************
  5318  000ED1             ;程序功能:	灯控制
  5319  000ED1             ;输入参数:	无
  5320  000ED1             ;输出参数:	无
  5321  000ED1             ;堆栈层数:	1层
  5322  000ED1             ;内存占用:	Temp,Temp+9,Temp+10,Temp+11
  5323  000ED1             ;****************************************************************************
  5324  000ED1             //
  5325  000ED1             Light_On:
  5326  000ED1             LIGHT_ON_M_ADDR:
  5327  000ED1   6CC2(1)  	B0BSET	P2Mode.4
  5328  000ED2             LIGHT_ON_D_ADDR:	
  5329  000ED2   64D2(1)  	B0BCLR	P2DATA.4
  5330  000ED3   0E00(2)  	RET
  5331  000ED4             
  5332  000ED4             Light_Off:
  5333  000ED4             LIGHT_OFF_M_ADDR:
  5334  000ED4   6CC2(1)  	B0BSET	P2Mode.4
  5335  000ED5             LIGHT_OFF_D_ADDR:	
  5336  000ED5   6CD2(1)  	B0BSET	P2DATA.4
  5337  000ED6   0E00(2)  	RET
  5338  000ED7             
  5339  000ED7             Flash_1Times:
  5340  000ED7   2D01(1)  	MOV	A,#1
  5341  000ED8   2F39(1)  	B0MOV	Temp,A
  5342  000ED9   8EDC(2)  	JMP	Flash_Loop
  5343  000EDA             
  5344  000EDA             Flash_3Times:
  5345  000EDA   2D03(1)  	MOV	A,#3
  5346  000EDB   2F39(1)  	B0MOV	Temp,A
  5347  000EDC             Flash_Loop:
  5348  000EDC   CED1(2)  	CALL	Light_On
  5349  000EDD   CEB0(2)  	CALL	Delay_100ms
  5350  000EDE   CED4(2)  	CALL	Light_Off
  5351  000EDF   CEB0(2)  	CALL	Delay_100ms
  5352  000EE0   2639(1+S)  	DECMS	Temp
  5353  000EE1   8EDC(2)  	JMP	Flash_Loop
  5354  000EE2   0E00(2)  	RET
  5355  000EE3             ///
  5356  000EE3             
  5357  000EE3             ;****************************************************************************
  5358  000EE3             ;程序功能:	检测按键是否改变
  5359  000EE3             ;输入参数:
  5360  000EE3             ;输出参数:	无
  5361  000EE3             ;堆栈层数:	0层
  5362  000EE3             ;内存占用:
  5363  000EE3             ;****************************************************************************
  5364  000EE3             Check_Key:
  5365  000EE3   2E01(1)  	B0MOV	A,KeyNum1
  5366  000EE4   0703(1+S)  	CMPRS	A,KeyNum1BK
  5367  000EE5   8EEB(2)  	JMP	C_K_Next
  5368  000EE6   2E02(1)  	B0MOV	A,KeyNum2
  5369  000EE7   0704(1+S)  	CMPRS	A,KeyNum2BK
  5370  000EE8   8EEB(2)  	JMP	C_K_Next
  5371  000EE9   6A86(1)  	B0BSET	FC
  5372  000EEA   0E00(2)  	RET
  5373  000EEB             
  5374  000EEB             C_K_Next:
  5375  000EEB   6286(1)  	B0BCLR	FC
  5376  000EEC   0E00(2)  	RET
  5377  000EED             	
  5378  000EED             ;****************************************************************************
  5379  000EED             ;程序功能:	备份按键键值
  5380  000EED             ;输入参数:
  5381  000EED             ;输出参数:	无
  5382  000EED             ;堆栈层数:	0层
  5383  000EED             ;内存占用:
  5384  000EED             ;****************************************************************************	
  5385  000EED             BackUp_KeyNum:
  5386  000EED   2E01(1)  	B0MOV	A,KeyNum1
  5387  000EEE   2F03(1)  	B0MOV	KeyNum1BK,A
  5388  000EEF   2E02(1)  	B0MOV	A,KeyNum2
  5389  000EF0   2F04(1)  	B0MOV	KeyNum2BK,A			; 备份键值
  5390  000EF1   0E00(2)  	RET
  5391  000EF2             ;****************************************************************************
  5392  000EF2             ;程序功能:	无符号双字节乘法
  5393  000EF2             ;输入参数:	被乘数，乘数
  5394  000EF2             ;输出参数:	积
  5395  000EF2             ;堆栈层数:	0层
  5396  000EF2             ;内存占用:
  5397  000EF2             ;****************************************************************************
  5398  000EF2             ;Mul_Data:
  5399  000EF2             ;	B0MOV	R,#16
  5400  000EF2             ;	CLR	Temp+2
  5401  000EF2             ;	CLR	Temp+3
  5402  000EF2             ;Mul_Data10:
  5403  000EF2             ;	RRCM	Y		;	移位乘数高字节
  5404  000EF2             ;	RRCM	Z		;	移位乘数低字节
  5405  000EF2             ;	B0BTS1	FC
  5406  000EF2             ;	JMP	Mul_Data20
  5407  000EF2             ;	B0MOV	A,Temp+10
  5408  000EF2             ;	ADD	Temp+2,A	;	被乘数加低字节
  5409  000EF2             ;	B0MOV	A,Temp+11
  5410  000EF2             ;	ADC	Temp+3,A	;	被乘数加高字节
  5411  000EF2             ;Mul_Data20:
  5412  000EF2             ;	RRCM	Temp+3
  5413  000EF2             ;	RRCM	Temp+2
  5414  000EF2             ;	RRCM	Temp+1
  5415  000EF2             ;	RRCM	Temp+0
  5416  000EF2             ;	DECMS	R
  5417  000EF2             ;	JMP	Mul_Data10
  5418  000EF2             ;	RET
  5419  000EF2             
  5420  000EF2             ;****************************************************************************
  5421  000EF2             ;程序功能:	无符号双字节除法
  5422  000EF2             ;输入参数:	被除数(Temp+1,Temp+0)，除数(Temp+3,Temp+2)
  5423  000EF2             ;输出参数:	商(Temp+1,Temp+0)，余数(Temp+5,Temp+4)
  5424  000EF2             ;堆栈层数:	0层
  5425  000EF2             ;内存占用:
  5426  000EF2             ;****************************************************************************
  5427  000EF2             Div_Data:
  5428  000EF2   2E3C(1)  	B0MOV	A,Temp+3
  5429  000EF3   7886(1+S)  	B0BTS1	FZ
  5430  000EF4   8EF8(2)  	JMP	Div_Data2
  5431  000EF5   2E3B(1)  	B0MOV	A,Temp+2
  5432  000EF6   7086(1+S)  	B0BTS0	FZ
  5433  000EF7   0E00(2)  	RET				; 判断除数为0则结束运算	
  5434  000EF8             Div_Data2:	
  5435  000EF8   3211(1)  	B0MOV	R,#17			; 设置移位次数
  5436  000EF9   2B3E(1)  	CLR	Temp+5
  5437  000EFA   2B3D(1)  	CLR	Temp+4			; 清余数寄存器	
  5438  000EFB   6286(1)  	B0BCLR	FC
  5439  000EFC             Div_Data4:
  5440  000EFC   0B39(1)  	RLCM	Temp+0
  5441  000EFD   0B3A(1)  	RLCM	Temp+1
  5442  000EFE   0B42(1)  	RLCM	Temp+9
  5443  000EFF   2682(1+S)  	DECMS	R
  5444  000F00   8F02(2)  	JMP	$+2
  5445  000F01   8F12(2)  	JMP	Div_Data8
  5446  000F02   0942(1)  	RRCM	Temp+9
  5447  000F03   0B3D(1)  	RLCM	Temp+4
  5448  000F04   0B3E(1)  	RLCM	Temp+5
  5449  000F05             	
  5450  000F05   2E3D(1)  	B0MOV	A,Temp+4
  5451  000F06   223B(1)  	SUB	A,Temp+2
  5452  000F07   2F3F(1)  	B0MOV	Temp+6,A
  5453  000F08   2E3E(1)  	B0MOV	A,Temp+5
  5454  000F09   203C(1)  	SBC	A,Temp+3
  5455  000F0A   2F40(1)  	B0MOV	Temp+7,A
  5456  000F0B             	
  5457  000F0B   7A86(1+S)  	B0BTS1	FC
  5458  000F0C   8EFC(2)  	JMP	Div_Data4
  5459  000F0D             	
  5460  000F0D   2E3F(1)  	B0MOV	A,Temp+6
  5461  000F0E   2F3D(1)  	B0MOV	Temp+4,A
  5462  000F0F   2E40(1)  	B0MOV	A,Temp+7
  5463  000F10   2F3E(1)  	B0MOV	Temp+5,A
  5464  000F11   8EFC(2)  	JMP	Div_Data4
  5465  000F12             Div_Data8:	
  5466  000F12   0E00(2)  	RET		
  5467  000F13             
  5468  000F13             ;****************************************************************************
  5469  000F13             ;程序功能:	改变帧长
  5470  000F13             ;输入参数:
  5471  000F13             ;输出参数:	无
  5472  000F13             ;堆栈层数:	0层
  5473  000F13             ;内存占用:
  5474  000F13             ;****************************************************************************
  5475  E 000003A9         F_Length	EQU	30000/32
  5476  000F13             Change_FLength:
  5477  000F13   67DA(1)  	B0BCLR	T1M.7				; 关闭T1定时器
  5478  000F14   2D03(1)  	MOV	A,#F_Length$M
  5479  000F15   1DFF(1)  	XOR	A,#0xFF
  5480  000F16   2FDC(1)  	B0MOV	T1H,A
  5481  000F17   2DA9(1)  	MOV	A,#F_Length$L
  5482  000F18   1DFF(1)  	XOR	A,#0xFF
  5483  000F19   2FDB(1)  	B0MOV	T1L,A
  5484  000F1A   63C8(1)  	B0BCLR	INTRQ.3				; 清除T1定时器标志位
  5485  000F1B   6FDA(1)  	B0BSET	T1M.7				; 开启T1定时器12	
  5486  000F1C   0E00(2)  	RET		
  5487  000F1D             
  5488  000F1D             ;****************************************************************************
  5489  000F1D             ;程序功能:	读入数据
  5490  000F1D             ;输入参数:
  5491  000F1D             ;输出参数:	
  5492  000F1D             ;堆栈层数:	0层
  5493  000F1D             ;内存占用:
  5494  000F1D             ;****************************************************************************
  5495  000F1D             ;	ORG	0xF00
  5496  E 00004CB3         UserCode	=	0X4CB3
  5497  000F1D             
  5498  000F1D             STB_Data:
  5499  000F1D             KEY_DATA_ADDR:
  5500  000F1D   0042(1)  DW    66,67,68,69,70,71,72,73,74,75,76,77
  5501  000F1E   0043(1)  
  5502  000F1F   0044(1)  
  5503  000F20   0045(1)  
  5504  000F21   0046(1)  
  5505  000F22   0047(1)  
  5506  000F23   0048(1)  
  5507  000F24   0049(1)  
  5508  000F25   004A(1)  
  5509  000F26   004B(1)  
  5510  000F27   004C(1)  
  5511  000F28   004D(1)  
  5512  000F29   0037(1)  DW    55,56,57,58,59,60,61,62,63,64,65
  5513  000F2A   0038(1)  
  5514  000F2B   0039(1)  
  5515  000F2C   003A(1)  
  5516  000F2D   003B(1)  
  5517  000F2E   003C(1)  
  5518  000F2F   003D(1)  
  5519  000F30   003E(1)  
  5520  000F31   003F(1)  
  5521  000F32   0040(1)  
  5522  000F33   0041(1)  
  5523  000F34   002D(1)  DW    45,46,47,48,49,50,51,52,53,54
  5524  000F35   002E(1)  
  5525  000F36   002F(1)  
  5526  000F37   0030(1)  
  5527  000F38   0031(1)  
  5528  000F39   0032(1)  
  5529  000F3A   0033(1)  
  5530  000F3B   0034(1)  
  5531  000F3C   0035(1)  
  5532  000F3D   0036(1)  
  5533  000F3E   0024(1)  DW    36,37,38,39,40,41,42,43,44
  5534  000F3F   0025(1)  
  5535  000F40   0026(1)  
  5536  000F41   0027(1)  
  5537  000F42   0028(1)  
  5538  000F43   0029(1)  
  5539  000F44   002A(1)  
  5540  000F45   002B(1)  
  5541  000F46   002C(1)  
  5542  000F47   001C(1)  DW    28,29,30,31,32,33,34,35
  5543  000F48   001D(1)  
  5544  000F49   001E(1)  
  5545  000F4A   001F(1)  
  5546  000F4B   0020(1)  
  5547  000F4C   0021(1)  
  5548  000F4D   0022(1)  
  5549  000F4E   0023(1)  
  5550  000F4F   0015(1)  DW    21,22,23,24,25,26,27
  5551  000F50   0016(1)  
  5552  000F51   0017(1)  
  5553  000F52   0018(1)  
  5554  000F53   0019(1)  
  5555  000F54   001A(1)  
  5556  000F55   001B(1)  
  5557  000F56   000F(1)  DW    15,16,17,18,19,20
  5558  000F57   0010(1)  
  5559  000F58   0011(1)  
  5560  000F59   0012(1)  
  5561  000F5A   0013(1)  
  5562  000F5B   0014(1)  
  5563  000F5C   000A(1)  DW    10,11,12,13,14
  5564  000F5D   000B(1)  
  5565  000F5E   000C(1)  
  5566  000F5F   000D(1)  
  5567  000F60   000E(1)  
  5568  000F61   0006(1)  DW     6, 7, 8, 9
  5569  000F62   0007(1)  
  5570  000F63   0008(1)  
  5571  000F64   0009(1)  
  5572  000F65   0003(1)  DW     3, 4, 5
  5573  000F66   0004(1)  
  5574  000F67   0005(1)  
  5575  000F68   0001(1)  DW     1, 2
  5576  000F69   0002(1)  
  5577  000F6A   0000(1)  DW     0
  5578  000F6B             
  5579  000F6B             Load_TV_Data:
  5580  000F6B             TV_USER_FORMAT_ADDR:
  5581  000F6B   2D2E(1)  	MOV	A,#V_6122
  5582  000F6C   2F09(1)  	B0MOV	Format,A
  5583  000F6D             TV_USER_CODE1_ADDR:	
  5584  000F6D   2DB3(1)  	MOV	A,#UserCode$L
  5585  000F6E   2F0A(1)  	B0MOV	Data+1,A
  5586  000F6F             TV_USER_CODE2_ADDR:	
  5587  000F6F   2D4C(1)  	MOV	A,#UserCode$M
  5588  000F70   2F0B(1)  	B0MOV	Data+2,A
  5589  000F71             TV_USER_CODE3_ADDR:	
  5590  000F71   2DB3(1)  	MOV	A,#UserCode$L
  5591  000F72   2F0C(1)  	B0MOV	Data+3,A
  5592  000F73             TV_USER_CODE4_ADDR:	
  5593  000F73   2D4C(1)  	MOV	A,#UserCode$M
  5594  000F74   2F0D(1)  	B0MOV	Data+4,A	
  5595  000F75   8F80(2)  	JMP	Load_Data_Common
  5596  000F76             Load_STB_Data:
  5597  000F76             STB_USER_FORMAT_ADDR:
  5598  000F76   2D2E(1)  	MOV	A,#V_6122
  5599  000F77   2F09(1)  	B0MOV	Format,A
  5600  000F78             STB_USER_CODE1_ADDR:	
  5601  000F78   2DB3(1)  	MOV	A,#UserCode$L
  5602  000F79   2F0A(1)  	B0MOV	Data+1,A
  5603  000F7A             STB_USER_CODE2_ADDR:	
  5604  000F7A   2D4C(1)  	MOV	A,#UserCode$M
  5605  000F7B   2F0B(1)  	B0MOV	Data+2,A
  5606  000F7C             STB_USER_CODE3_ADDR:	
  5607  000F7C   2DB3(1)  	MOV	A,#UserCode$L
  5608  000F7D   2F0C(1)  	B0MOV	Data+3,A
  5609  000F7E             STB_USER_CODE4_ADDR:	
  5610  000F7E   2D4C(1)  	MOV	A,#UserCode$M
  5611  000F7F   2F0D(1)  	B0MOV	Data+4,A	
  5612  000F80             Load_Data_Common:
  5613  000F80   2E01(1)  	B0MOV	A,KeyNum1
  5614  000F81   141D(1)  	ADD	A,#STB_Data$L
  5615  000F82   2F83(1)  	B0MOV	Z,A
  5616  000F83   2B84(1)  	CLR	Y
  5617  000F84   2D0F(1)  	MOV	A,#STB_Data$M
  5618  000F85   1184(1)  	ADC	Y,A
  5619  000F86   0D00(2)  	MOVC
  5620  000F87   2F37(1)  	B0MOV	Data+46,A
  5621  000F88   2E82(1)  	B0MOV	A,R
  5622  000F89   2F36(1)  	B0MOV	Data+45,A
  5623  000F8A   0E00(2)  	RET
  5624  000F8B             	
  5625  000F8B             	
  5626  000F8B             ;****************************************************************************
  5627  000F8B             ;程序功能:	查询学习按键
  5628  000F8B             ;输入参数:	无
  5629  000F8B             ;输出参数:	无
  5630  000F8B             ;堆栈层数:	0层
  5631  000F8B             ;内存占用:	无
  5632  000F8B             ;****************************************************************************
  5633  000F8B             //
  5634  000F8B             Learn_Key_List:
  5635  000F8B             LEARN_KEY_ADDR:
  5636  000F8B   0009(1)  DW	L_Key01
  5637  000F8C   0008(1)  DW	L_Key02
  5638  000F8D   0007(1)  DW	L_Key03
  5639  000F8E   0006(1)  DW	L_Key04
  5640  000F8F   000A(1)  DW	L_Key05
  5641  000F90   004D(1)  DW	L_Key06
  5642  000F91   004D(1)  DW	L_Key07
  5643  000F92   004D(1)  DW	L_Key08
  5644  000F93   004D(1)  DW	L_Key09
  5645  000F94   004D(1)  DW	L_Key10
  5646  000F95             
  5647  E 0000000A         Learn_Key_Num	EQU	$-Learn_Key_List
  5648  000F95             
  5649  000F95             Check_Learn_Key:
  5650  000F95   2D00(1)  	MOV	A,#0
  5651  000F96   2F7F(1)  	B0MOV	Pointer,A
  5652  000F97             C_L_K_Loop:
  5653  000F97   2D8B(1)  	MOV	A,#Learn_Key_List$L
  5654  000F98   127F(1)  	ADD	A,Pointer
  5655  000F99   2F83(1)  	B0MOV	Z,A
  5656  000F9A   2D0F(1)  	MOV	A,#Learn_Key_List$M
  5657  000F9B   1006(1)  	ADC	A,Zero
  5658  000F9C   2F84(1)  	B0MOV	Y,A
  5659  000F9D   0D00(2)  	MOVC
  5660  000F9E   0701(1+S)  	CMPRS	A,KeyNum1
  5661  000F9F   8FA2(2)  	JMP	C_L_K_Next
  5662  000FA0   6A86(1)  	B0BSET	FC
  5663  000FA1   0E00(2)  	RET
  5664  000FA2             
  5665  000FA2             C_L_K_Next:
  5666  000FA2   167F(1+S)  	INCMS	Pointer
  5667  000FA3   0000(1)  	NOP
  5668  000FA4   2E7F(1)  	B0MOV	A,Pointer
  5669  000FA5   060A(1+S)  	CMPRS	A,#Learn_Key_Num
  5670  000FA6   8F97(2)  	JMP	C_L_K_Loop
  5671  000FA7   6286(1)  	B0BCLR	FC
  5672  000FA8   0E00(2)  	RET
  5673  000FA9             ///	
  5674  000FA9             
  5675  000FA9             	
  5676  000FA9             			
  5677  000FA9             
  5678  000FA9             
  5679  000FA9             
